webpackJsonp([1],{"+tBu":function(t,e,n){"use strict";var r=n("/oeL"),o=n("Z04r");n.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},c=function(){function t(t,e){this.dialogRef=t,this.data=e,this.onLogin=new r.EventEmitter}return t.prototype.login=function(){console.log("Logging in...");var t={email:this.email,password:this.password};this.onLogin.emit(t),this.data.consumer.login(t)},t}();s([n.i(r.Output)(),i("design:type",Object)],c.prototype,"onLogin",void 0),s([n.i(r.Input)(),i("design:type",Object)],c.prototype,"errorMsg",void 0),c=s([n.i(r.Component)({selector:"login-component",template:n("8Vg4"),styles:[n("dCN4")]}),a(1,n.i(r.Inject)(o.c)),i("design:paramtypes",["function"==typeof(d=void 0!==o.d&&o.d)&&d||Object,Object])],c);var d},0:function(t,e,n){t.exports=n("cDNt")},"0+Pn":function(t,e,n){"use strict";var r=n("/oeL"),o=n("bKpL"),s=(n.n(o),n("8k1a")),i=n("B2Lq"),a=n("xrDH");n.n(a);n.d(e,"a",function(){return u});var c=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(){}return t.prototype.isAdmin=function(){return this.roles&&1==this.roles.admin},t.prototype.isUpdater=function(){return this.roles&&1==this.roles.updater},t.prototype.isFsgOverseer=function(){return this.roles&&1==this.roles.fsgoverseer},t.prototype.isPublisher=function(){return this.roles&&1==this.roles.publisher},Object.defineProperty(t.prototype,"hasUserInfo",{get:function(){return this.roles&&this.userInfoObj},enumerable:!0,configurable:!0}),t}(),u=function(){function t(t,e){this.af=t,this.db=e,this.roleList=["admin","updater","fsgoverseer","publisher"],this.onCurrentUserInfo=new r.EventEmitter}return t.prototype.getUser=function(){return this.af.auth.currentUser},t.prototype.getUserObs=function(){return this.af.authState},t.prototype.isLoggedIn=function(){return null!=this.getUser()},t.prototype.onAuthChange=function(t){this.af.auth.onAuthStateChanged(t)},t.prototype.login=function(t,e){return this.af.auth.signInWithEmailAndPassword(t,e)},t.prototype.logout=function(){return this.af.auth.signOut()},t.prototype.getUserRole=function(t){return this.db.object("/roles/"+t.userObj.uid).flatMap(function(e){return t.roles=e,o.Observable.of(t)})},t.prototype.getUserInfo=function(t){return this.db.object("/users/"+t.userObj.uid).flatMap(function(e){return t.userInfoObj=e,o.Observable.of(t)})},t.prototype.getAllUserInfo=function(){var t=this;this.currentUser=new p,this.currentUser.userObj=this.getUser(),this.getUserRole(this.currentUser).flatMap(function(e){return t.getUserInfo(t.currentUser)}).subscribe(function(e){console.log("Emitting..."),console.log(t.currentUser),t.onCurrentUserInfo.emit(t.currentUser)})},t.prototype.getAllUsersList=function(){var t=this;return this.usersList?o.Observable.of(this.usersList):this.db.list("/users/list").flatMap(function(e){return t.usersList?t.usersList.length=0:t.usersList=[],o.Observable.from(e)}).flatMap(function(e){return t.db.object("/users/"+e.$value).flatMap(function(e){return a.remove(t.usersList,function(t){return t.$key==e.$key}),t.usersList.push(e),o.Observable.of(e)})}).debounceTime(300).flatMap(function(e){return o.Observable.of(t.usersList)})},t}();c([n.i(r.Output)(),d("design:type",Object)],u.prototype,"onCurrentUserInfo",void 0),u=c([n.i(r.Injectable)(),d("design:paramtypes",["function"==typeof(l=void 0!==s.a&&s.a)&&l||Object,"function"==typeof(h=void 0!==i.a&&i.a)&&h||Object])],u);var l,h},"0o1w":function(t,e,n){"use strict";var r=n("/oeL"),o=n("GsmQ"),s=n("Z04r"),i=n("HGbW"),a=n("0+Pn"),c=n("xrDH");n.n(c);n.d(e,"a",function(){return l});var d=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(t){function e(e,n,r){var o=t.call(this)||this;return o.mapService=r,o.loaded=!1,o.hasMaps=!1,o.dialog=e,o.fireAuth=n,o}return d(e,t),e.prototype.load=function(){this.showLoadingDialog(),this.fireAuth.currentUser.isAdmin()||this.fireAuth.currentUser.isUpdater()?(console.log("Loading current maps..."),this.getAllMapsList()):this.getAllUserMaps(),this.subs.push(this.fireAuth.getAllUsersList().subscribe(function(t){console.log("User list pre-loaded..")}))},e.prototype.getAllUserMaps=function(){var t=this;console.log("Getting all user maps..."),this.subs.push(this.mapService.getUserMaps(this.fireAuth.currentUser).subscribe(function(e){console.log("Got all user maps..."),c.forEach(e,function(n,r){c.remove(n.maps,function(e){return!e.isUser(t.fireAuth.currentUser)}),0==n.maps.length&&e.length>0&&e.splice(r,1)}),t.hasMaps=e&&e.length>0,t.hasMaps||(t.oldFsgMaps=[],t.fsgMaps=[]),t.oldFsgMaps&&c.forEach(t.oldFsgMaps,function(e){var n=c.find(t.fsgMaps,function(t){return t.fsgName==e.fsgName});n&&(n.expanded=e.expanded)}),t.oldFsgMaps=t.fsgMaps,t.fsgMaps=e,t.hideLoadingDialog()}))},e.prototype.getAllMapsList=function(){var t=this;console.log("Getting all maps..."),this.hasMaps=!0,(this.fireAuth.currentUser.isAdmin()||this.fireAuth.currentUser.isUpdater())&&this.subs.push(this.mapService.getAllFsgMapsList().flatMap(function(e){return t.fsgMaps=e,console.log("All maps:"),console.log(e),t.mapService.getUserMaps(t.fireAuth.currentUser)}).subscribe(function(e){if(console.log("User maps:"),console.log(e),t.fsgMaps.length>0&&e.length>0){c.find(t.fsgMaps,function(t){return t.fsgName==e[0].fsgName})||(t.fsgMaps=e.concat(t.fsgMaps))}t.oldFsgMaps&&c.forEach(t.oldFsgMaps,function(e){console.log("Old:"),console.log(e);var n=c.find(t.fsgMaps,function(t){return t.fsgName==e.fsgName});n&&(console.log("Set expanded state."),n.expanded=e.expanded)}),t.oldFsgMaps=t.fsgMaps,t.hideLoadingDialog()}))},e.prototype.getMapUsers=function(t){var e="";return c.forEach(t.getUsersList(),function(t){e=""+(c.isEmpty(e)?e:e+", ")+t.name}),e},e.prototype.toggleExpand=function(t,e){t.expanded=e},e.prototype.canOpenMap=function(t){return this.fireAuth.currentUser&&(t.isUser(this.fireAuth.currentUser)||this.fireAuth.currentUser.isAdmin()||this.fireAuth.currentUser.isUpdater())},e.prototype.getCompletionPercentage=function(t){return this.mapService.getCompletionPercentage(t)},e.prototype.getRemaining=function(t){return this.mapService.getRemainingAddresses(t)},e.prototype.isUpdater=function(){return this.fireAuth.currentUser&&(this.fireAuth.currentUser.isAdmin()||this.fireAuth.currentUser.isUpdater())},e}(i.a);l=p([n.i(r.Component)({selector:"mapslist-component",template:n("ivJn"),styles:[n("Z2wb")]}),u("design:paramtypes",["function"==typeof(h=void 0!==s.a&&s.a)&&h||Object,"function"==typeof(f=void 0!==a.a&&a.a)&&f||Object,"function"==typeof(m=void 0!==o.a&&o.a)&&m||Object])],l);var h,f,m},"3CHR":function(t,e){t.exports='<md-toolbar [ngClass]="\'bgc-blue-grey-900 whiteText marginTopBottom-2\'">\n  <span><h3>{{title}}</h3></span>\n  <span class="fill-remaining-space"></span>\n\n  \x3c!-- <span><button md-mini-fab (click)="startMap()" *ngIf="currentMap" style="margin-right: 10px;"><md-icon>play_arrow</md-icon></button></span> --\x3e\n  <span>\n    <button md-mini-fab (click)="toggleShowLocation()" style="margin-right: 5px;" >\n      <md-icon *ngIf="!showLocation">location_disabled</md-icon>\n      <md-icon *ngIf="showLocation && !locationSearching">my_location</md-icon>\n      <md-icon *ngIf="showLocation && locationSearching">location_searching</md-icon>\n    </button>\n  </span>\n  <span *ngIf="isUpdater()"><button md-mini-fab (click)="viewList()" style="margin-right: 5px;" ><md-icon>view_list</md-icon></button></span>\n  <span><button md-mini-fab (click)="fitMap()" style="margin-right: 5px;" ><md-icon svgIcon="fit-map"></md-icon></button></span>\n  <span><a href="{{ addUrl }}" target="_blank" md-mini-fab style="margin-right: 5px;"><md-icon svgIcon="add-address"></md-icon></a></span>\n  <span><a md-mini-fab [routerLink]="[\'/home\']" style="margin-right: 5px;"><md-icon>home</md-icon></a></span>\n</md-toolbar>\n\x3c!-- <md-toolbar [ngClass]="\'bgc-yellow-100 marginTopBottom-2\'" *ngIf="isAdmin()">\n  <span><md-button-toggle style="margin-right: 10px;" (change)="toggleShowInfo($event)"><md-icon>info</md-icon></md-button-toggle></span>\n  <span class="fill-remaining-space"></span>\n</md-toolbar> --\x3e\n<agm-map [latitude]="centerLat" [longitude]="centerLng" [zoom]="zoom" [ngStyle]="{\'height\': height}">\n  <marker-cluster [onAddLocMarker]="onAddLocMarker" [onFit]="onFit" [minimumClusterSize]="minimumClusterSize" [onAddressClick]="onAddressClick" [onUpdate]="mapService.onUpdate" [onSetShowClusterInfo]="onToggleShowInfo" [points]="points" ></marker-cluster>\n</agm-map>\n'},"8Sw2":function(t,e,n){function r(t){return n(o(t))}function o(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var s={"./af":"FQor","./af.js":"FQor","./ar":"EcI0","./ar-dz":"cw72","./ar-dz.js":"cw72","./ar-kw":"fu+8","./ar-kw.js":"fu+8","./ar-ly":"7CVz","./ar-ly.js":"7CVz","./ar-ma":"1dFW","./ar-ma.js":"1dFW","./ar-sa":"UxV2","./ar-sa.js":"UxV2","./ar-tn":"nm31","./ar-tn.js":"nm31","./ar.js":"EcI0","./az":"EbpX","./az.js":"EbpX","./be":"SQlX","./be.js":"SQlX","./bg":"R3V+","./bg.js":"R3V+","./bn":"cAX3","./bn.js":"cAX3","./bo":"dHgA","./bo.js":"dHgA","./br":"W7ww","./br.js":"W7ww","./bs":"lZ6K","./bs.js":"lZ6K","./ca":"udbC","./ca.js":"udbC","./cs":"oSQb","./cs.js":"oSQb","./cv":"yPEm","./cv.js":"yPEm","./cy":"PpYB","./cy.js":"PpYB","./da":"oiZG","./da.js":"oiZG","./de":"LYe6","./de-at":"KOG5","./de-at.js":"KOG5","./de-ch":"o3JY","./de-ch.js":"o3JY","./de.js":"LYe6","./dv":"OkYT","./dv.js":"OkYT","./el":"QFnp","./el.js":"QFnp","./en-au":"dBGl","./en-au.js":"dBGl","./en-ca":"vv0C","./en-ca.js":"vv0C","./en-gb":"IoCy","./en-gb.js":"IoCy","./en-ie":"qVAg","./en-ie.js":"qVAg","./en-nz":"FbT0","./en-nz.js":"FbT0","./eo":"y/6j","./eo.js":"y/6j","./es":"ivpd","./es-do":"DBbP","./es-do.js":"DBbP","./es.js":"ivpd","./et":"FrUj","./et.js":"FrUj","./eu":"LAVD","./eu.js":"LAVD","./fa":"J2cK","./fa.js":"J2cK","./fi":"5FCP","./fi.js":"5FCP","./fo":"jIZb","./fo.js":"jIZb","./fr":"Lq8I","./fr-ca":"ICRA","./fr-ca.js":"ICRA","./fr-ch":"QWmo","./fr-ch.js":"QWmo","./fr.js":"Lq8I","./fy":"Fbnp","./fy.js":"Fbnp","./gd":"zhFu","./gd.js":"zhFu","./gl":"o10m","./gl.js":"o10m","./gom-latn":"UoXv","./gom-latn.js":"UoXv","./he":"gbvS","./he.js":"gbvS","./hi":"+UQz","./hi.js":"+UQz","./hr":"qGYH","./hr.js":"qGYH","./hu":"hGGh","./hu.js":"hGGh","./hy-am":"1AR5","./hy-am.js":"1AR5","./id":"Ie9h","./id.js":"Ie9h","./is":"piS+","./is.js":"piS+","./it":"5P9/","./it.js":"5P9/","./ja":"3cRe","./ja.js":"3cRe","./jv":"vwCJ","./jv.js":"vwCJ","./ka":"R7aq","./ka.js":"R7aq","./kk":"d8hV","./kk.js":"d8hV","./km":"nCdc","./km.js":"nCdc","./kn":"5K8n","./kn.js":"5K8n","./ko":"1jN3","./ko.js":"1jN3","./ky":"74/W","./ky.js":"74/W","./lb":"XAyT","./lb.js":"XAyT","./lo":"w/Mz","./lo.js":"w/Mz","./lt":"IetG","./lt.js":"IetG","./lv":"CRPd","./lv.js":"CRPd","./me":"1mee","./me.js":"1mee","./mi":"yRr3","./mi.js":"yRr3","./mk":"bfn1","./mk.js":"bfn1","./ml":"r1ky","./ml.js":"r1ky","./mr":"+K6p","./mr.js":"+K6p","./ms":"asMk","./ms-my":"IcWU","./ms-my.js":"IcWU","./ms.js":"asMk","./my":"Isng","./my.js":"Isng","./nb":"FjNp","./nb.js":"FjNp","./ne":"P9zQ","./ne.js":"P9zQ","./nl":"pejQ","./nl-be":"c3/i","./nl-be.js":"c3/i","./nl.js":"pejQ","./nn":"ALD8","./nn.js":"ALD8","./pa-in":"1YTd","./pa-in.js":"1YTd","./pl":"Gs99","./pl.js":"Gs99","./pt":"eunO","./pt-br":"uHKL","./pt-br.js":"uHKL","./pt.js":"eunO","./ro":"1FZw","./ro.js":"1FZw","./ru":"Cy48","./ru.js":"Cy48","./sd":"+28k","./sd.js":"+28k","./se":"EiHj","./se.js":"EiHj","./si":"77bI","./si.js":"77bI","./sk":"BgyH","./sk.js":"BgyH","./sl":"K7sG","./sl.js":"K7sG","./sq":"pwQJ","./sq.js":"pwQJ","./sr":"N0T2","./sr-cyrl":"9OoP","./sr-cyrl.js":"9OoP","./sr.js":"N0T2","./ss":"Mh9L","./ss.js":"Mh9L","./sv":"YZAt","./sv.js":"YZAt","./sw":"/7jV","./sw.js":"/7jV","./ta":"VKBt","./ta.js":"VKBt","./te":"TIcV","./te.js":"TIcV","./tet":"BlC1","./tet.js":"BlC1","./th":"Zi3L","./th.js":"Zi3L","./tl-ph":"D4Y9","./tl-ph.js":"D4Y9","./tlh":"muBP","./tlh.js":"muBP","./tr":"82s3","./tr.js":"82s3","./tzl":"vjXv","./tzl.js":"vjXv","./tzm":"Vhfe","./tzm-latn":"m0Pg","./tzm-latn.js":"m0Pg","./tzm.js":"Vhfe","./uk":"Y3Ex","./uk.js":"Y3Ex","./ur":"4DIg","./ur.js":"4DIg","./uz":"wDue","./uz-latn":"Li28","./uz-latn.js":"Li28","./uz.js":"wDue","./vi":"UbP6","./vi.js":"UbP6","./x-pseudo":"fQLM","./x-pseudo.js":"fQLM","./yo":"evMD","./yo.js":"evMD","./zh-cn":"DV5H","./zh-cn.js":"DV5H","./zh-hk":"iEKH","./zh-hk.js":"iEKH","./zh-tw":"X9uL","./zh-tw.js":"X9uL"};r.keys=function(){return Object.keys(s)},r.resolve=o,t.exports=r,r.id="8Sw2"},"8Vg4":function(t,e){t.exports='<div md-dialog-content>\n  <form name=\'loginFrm\' (submit)=\'login($event)\'>\n    <div class="flex-container"\n       fxLayout="column"\n       fxLayout.xs="column"\n       fxLayoutAlign="center center"\n       fxLayoutAlign.xs="start">\n       <div>\n        <div>\n          <md-input-container>\n            <label>Email</label>\n            <input mdInput type=\'email\' name="email" [(ngModel)]="email" >\n          </md-input-container>\n        </div>\n        <div>\n          <md-input-container>\n            <label>Password</label>\n            <input mdInput type=\'password\' name="password" [(ngModel)]="password" >\n          </md-input-container>\n        </div>\n        <md-dialog-actions>\n          <button md-button md-raised-button type=\'submit\' [disabled]="isPending || isMaint" >Login</button>\n        </md-dialog-actions>\n        <div>\n          {{data.consumer.errorMsg}}\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n'},APxZ:function(t,e){t.exports='<div md-dialog-content>\n  <form name=\'shareForm\'>\n    <md-card *ngIf="data.consumer.ownerMode">\n      <md-card-header>\n        <md-card-title>\n          <h4>{{data.consumer.ownerCardTitle}}</h4>\n        </md-card-title>\n        <md-card-subtitle>{{ data.consumer.ownerCardDesc }}</md-card-subtitle>\n      </md-card-header>\n      <md-card-content>\n        <tag-input [(ngModel)]="data.consumer.userList" name="ownerDlg"\n           [editable]="true" [identifyBy]="\'id\'" [displayBy]="\'name\'"\n           [maxItems]="1" [onlyFromAutocomplete]="true" [placeholder]="data.consumer.placeHolderTxt" [secondaryPlaceholder]="data.consumer.placeHolderTxt">\n           <tag-input-dropdown [appendToBody]="false" [autocompleteItems]=\'data.consumer.mapUsers\' [identifyBy]="\'$key\'" [displayBy]="\'name\'"></tag-input-dropdown>\n        </tag-input>\n        \x3c!-- <md-input-container>\n           <input type="text" mdInput name="selUser" [(ngModel)]="data.consumer.selUser"  [mdAutocomplete]="autoPub">\n        </md-input-container>\n        <md-autocomplete #autoPub="mdAutocomplete" [displayWith]="displayFn">\n           <md-option *ngFor="let mapUser of data.consumer.mapUsers" [value]="mapUser">\n             {{ mapUser.userInfoObj.name }}\n           </md-option>\n        </md-autocomplete> --\x3e\n        \x3c!-- <button md-mini-fab (click)="data.consumer.done()"><md-icon>person_add</md-icon></button> --\x3e\n      </md-card-content>\n    </md-card>\n    <md-card *ngIf="!data.consumer.ownerMode">\n      <md-card-header>\n        <md-card-title>\n          <h4>{{data.consumer.shareCardTitle}}</h4>\n        </md-card-title>\n        <md-card-subtitle>{{ data.consumer.shareCardDesc }}</md-card-subtitle>\n      </md-card-header>\n      <md-card-content>\n        <tag-input [(ngModel)]="data.consumer.userList" name="ownerDlg"\n           [editable]="true" [identifyBy]="\'id\'" [displayBy]="\'name\'" (onAdd)="data.consumer.onItemAdded($event)" (onRemove)="data.consumer.onItemRemove($event)"\n           [onlyFromAutocomplete]="true" [placeholder]="data.consumer.placeHolderTxt" [secondaryPlaceholder]="data.consumer.placeHolderTxt">\n           <tag-input-dropdown [appendToBody]="false" [autocompleteItems]=\'data.consumer.mapUsers\' [identifyBy]="\'$key\'" [displayBy]="\'name\'"></tag-input-dropdown>\n        </tag-input>\n      </md-card-content>\n    </md-card>\n  </form>\n  <md-dialog-actions>\n    <button md-mini-fab (click)="data.consumer.done()"><md-icon>save</md-icon></button>\n    <button md-mini-fab (click)="data.consumer.cancel()"><md-icon>cancel</md-icon></button>\n  </md-dialog-actions>\n  <div>\n    {{data.consumer.errorMsg}}\n  </div>\n</div>\n'},CKBp:function(t,e,n){"use strict";var r=n("/oeL"),o=n("GsmQ"),s=n("Z04r"),i=n("HGbW"),a=n("0+Pn"),c=n("Dcui"),d=n("PMtK"),p=n.n(d),u=n("xrDH");n.n(u);n.d(e,"a",function(){return g}),n.d(e,"b",function(){return b});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},f=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},m=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},g=function(t){function e(e,n,r,o){var s=t.call(this)||this;return s.mapService=r,s.winRef=o,s.mapUsers=[],s.newUsersList=[],s.removeUsersList=[],s.curOwner=null,s.placeHolderTxt="Type and select name",s.ownerCardTitle="Map Owner",s.ownerCardDesc="An owner can use/share the map within 2 weeks from the time of assignment. After this time, the map will be removed from the owner's assignment list. Please reassign ownership if needed. A map can only have one owner. Removing an owner, will remove all users.",s.shareCardTitle="Map Users",s.shareCardDesc="A user will have access to the map within the day of the assignment. After this time, the map will be removed from the user's list. Please reshare again if needed.",s.ownerMode=!1,s.dialog=e,s.fireAuth=n,s}return l(e,t),e.prototype.showShareDlg=function(t){var e=this;void 0===t&&(t=!0),this.ownerMode=t,this.subs.push(this.fireAuth.getAllUsersList().subscribe(function(t){e.mapUsers=t,e.ownerMode&&e.map.hasOwner()?(e.curOwner=e.map.getOwner(),e.userList=[e.curOwner]):e.userList=e.map.getUsersList(),e.shareDlg||(e.shareDlg=e.dialog.open(b,{data:{consumer:e},disableClose:!0}))}))},e.prototype.done=function(){this.showLoadingDialog(),this.ownerMode?u.isEmpty(this.userList)?(this.mapService.removeOwner(this.map,this.curOwner),this.mapService.removeUsers(this.map,this.map.getUsersList())):(this.userList[0].expiry=p()().hour(20).minute(0).second(0).add(1,"week").toDate(),this.mapService.updateOwner(this.map,this.userList[0],this.curOwner)):u.isEmpty(this.userList)?(console.log("Remove userslist"),console.log(this.removeUsersList),this.mapService.removeUsers(this.map,this.removeUsersList)):(u.forEach(this.newUsersList,function(t){t.expiry=p()().hour(20).minute(0).second(0).add(1,"day").toDate()}),this.mapService.removeUsers(this.map,this.removeUsersList),this.mapService.updateUsers(this.map,this.userList)),this.closeShareDialog(),this.hideLoadingDialog()},e.prototype.cancel=function(){this.closeShareDialog()},e.prototype.closeShareDialog=function(){this.shareDlg.close(),this.shareDlg=null},e.prototype.canAssignOwner=function(){return this.fireAuth.currentUser.isAdmin()||this.fireAuth.currentUser.isUpdater()},e.prototype.canShare=function(){return this.map.hasOwner()},e.prototype.canReturn=function(){return this.map.hasOwner()&&this.map.isOwner(this.fireAuth.currentUser)},e.prototype.returnMap=function(){this.fireAuth.currentUser.isAdmin()?(this.mapService.removeUsers(this.map,this.map.getUsersList()),this.mapService.updateUsers(this.map,[]),this.mapService.removeOwner(this.map,this.map.getOwner())):this.map.isOwner(this.fireAuth.currentUser)&&(this.mapService.removeUsers(this.map,this.map.getUsersList()),this.mapService.updateUsers(this.map,[]),this.mapService.removeOwner(this.map,this.map.getOwner()))},e.prototype.onItemAdded=function(t){this.newUsersList.push(t),u.remove(this.removeUsersList,function(e){return e.id==t.id})},e.prototype.onItemRemove=function(t){console.log(t),u.remove(this.newUsersList,function(e){return e.id==t.id}),this.removeUsersList.push(t)},e}(i.a);h([n.i(r.Input)(),f("design:type","function"==typeof(y=void 0!==o.b&&o.b)&&y||Object)],g.prototype,"map",void 0),g=h([n.i(r.Component)({selector:"mapshare",template:n("RvYO")}),f("design:paramtypes",["function"==typeof(v=void 0!==s.a&&s.a)&&v||Object,"function"==typeof(j=void 0!==a.a&&a.a)&&j||Object,"function"==typeof(_=void 0!==o.a&&o.a)&&_||Object,"function"==typeof(w=void 0!==c.a&&c.a)&&w||Object])],g);var b=function(){function t(t,e){this.dialogRef=t,this.data=e}return t.prototype.displayFn=function(t){return t?t.userInfoObj.name:""},t}();b=h([n.i(r.Component)({selector:"share-dlg",template:n("APxZ")}),m(1,n.i(r.Inject)(s.c)),f("design:paramtypes",["function"==typeof(O=void 0!==s.d&&s.d)&&O||Object,Object])],b);var y,v,j,_,w,O},Dcui:function(t,e,n){"use strict";var r=n("/oeL");n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},s=function(){function t(){}return Object.defineProperty(t.prototype,"nativeWindow",{get:function(){return window},enumerable:!0,configurable:!0}),t}();s=o([n.i(r.Injectable)()],s)},GsmQ:function(t,e,n){"use strict";var r=n("/oeL"),o=n("Dqrr"),s=(n.n(o),n("xrDH")),i=(n.n(s),n("B2Lq")),a=n("PMtK"),c=n.n(a);n.d(e,"b",function(){return u}),n.d(e,"a",function(){return f});var d=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,n){this.id=t,this.mapObj=e,this.assgnObj=n,this.addressCount=s.isEmpty(e.addresses)?0:s.size(e.addresses)}return Object.defineProperty(t.prototype,"isAssigned",{get:function(){return this.assgnObj.$exists()},enumerable:!0,configurable:!0}),t.prototype.hasOwner=function(){return this.assgnObj&&this.assgnObj.$exists()&&!s.isEmpty(this.assgnObj.owner)},Object.defineProperty(t.prototype,"ownerInfo",{get:function(){return this.assgnObj.owner},enumerable:!0,configurable:!0}),t.prototype.getOwner=function(){return this.assgnObj.owner},t.prototype.setOwner=function(t){!s.isFunction(this.assgnObj.$exists)&&this.assgnObj.$exists()||(this.assgnObj={}),this.assgnObj.owner||(this.assgnObj.owner={}),this.assgnObj.owner.id=t.$key,this.assgnObj.owner.name=t.name},t.prototype.getUsersList=function(){var t=[];return s.forOwn(this.assgnObj.users,function(e,n){t.push({name:e.name,id:n,expiry:e.expiry})}),t},t.prototype.hasUsers=function(){return!s.isEmpty(this.getUsersList())},t.prototype.isOwner=function(t){return t.userInfoObj.$key==this.assgnObj.owner.id},t.prototype.isUser=function(t){var e=null!=s.find(this.getUsersList(),function(e){return e.id==t.userInfoObj.$key});return this.hasOwner()&&this.isOwner(t)||this.hasUsers()&&e},t.prototype.getStatus=function(t){return s.get(this.assgnObj,"address."+t)},t.prototype.getStatusDetail=function(t){return s.get(this.assgnObj,"det."+t)},t}(),l=function(){function t(t,e){this.fsgName=t,this.maps=e}return t}(),h=function(){function t(){}return t}(),f=function(){function t(t){var e=this;this.db=t,this.onUpdate=new r.EventEmitter,this.mapMarkers=[],this.markerIdx=0,this.trackUpdates=!1,this.updatePipe=new o.Subject,this.subs=[],this.fsgs=[],this.addrStatuses=[{val:0,label:"Not Done"},{val:1,label:"Done"},{val:2,label:"Not Chinese"},{val:3,label:"Not at Home - 1"},{val:4,label:"Not at Home - 2"},{val:5,label:"Do Not Call"},{val:7,label:"Phone Witnessing"}],this.maps=[],this.updatePipe.debounceTime(5e3).subscribe(function(t){e.onUpdate.emit(t)})}return t.prototype.triggerUpdate=function(){this.onUpdate.emit({})},t.prototype.loadMapMarkersObs=function(t,e){var n=this,r={};return this.db.object("/maps/"+e).flatMap(function(t){if(t.addresses){if(!n.trackUpdates)return n.maps.push(t),r.mapObj=t,o.Observable.of(t);n.updatePipe.next({})}return o.Observable.of(null)}).filter(function(t){return null!=t}).flatMap(function(t){return n.db.object("/assignedMaps/active/"+e).flatMap(function(e){return console.log("Got assigned maps object..."),console.log(e),r.assgnObj=e,o.Observable.of(t)})}).flatMap(function(t){return n.db.list("/maps/"+e+"/addresses").flatMap(function(t){return o.Observable.from(t)})}).filter(function(t){return null!=t}).flatMap(function(t){return n.db.object("/addresses/"+t.$value)}).filter(function(t){return null!=t}).flatMap(function(t){return r.addresses||(r.addresses=[]),s.remove(r.addresses,function(e){return e.$key==t.$key}),r.addresses.push(t),o.Observable.of(t)}).flatMap(function(t){return o.Observable.of(r)}).debounce(function(){return o.Observable.interval(1e3)}).flatMap(function(t){var n=new u(e,r.mapObj,r.assgnObj);return s.forEach(r.addresses,function(t){s.forOwn(r.assgnObj.address,function(e,n){n==t.$key&&(t.status=s.toNumber(e))})}),n.addresses=r.addresses,o.Observable.of(n)})},t.prototype.createStatusMarkerIconConfig=function(t,e){return{scaledSize:t,url:"/assets/images/place-markers/status-"+e+".svg"}},t.prototype.createMarkersWithStatus=function(t){var e=this,n=new google.maps.Size(35,35),r={},o=this.createStatusMarkerIconConfig(n,403);s.forEach(this.addrStatuses,function(t){s.isEmpty(t)&&(t=0),r[t.val]=e.createStatusMarkerIconConfig(n,t.val)}),console.log(this.mapMarkers),s.forEach(t.addresses,function(n){var i=null,a=n.$key;e.trackUpdates?i=s.find(e.mapMarkers,function(t){return s.find(t.addId,function(t){return t==a})}):(i=new h,i.addId=[a],i.map=t),n.clat=s.toNumber(n.clat),n.clong=s.toNumber(n.clong);var c=s.find(e.mapMarkers,function(t){return s.isArray(t.addObj)?s.find(t.addObj,function(t){return t.clat==n.clat&&t.clong==n.clong&&t.$key!=a}):t.addObj.clat==n.clat&&t.addObj.clong==n.clong&&t.addObj.$key!=a});if(c){if(!e.trackUpdates){if(s.isArray(c.addObj))c.addObj.push(n);else{var d=[c.addObj];d.push(n),c.addObj=d}i=c,i.addId.push(a)}}else i.addObj=n;i.mapObj=t.mapObj,i.modalMode=!0;var p=o;if(c){if(n.status){p=r[n.status];var u=s.map(c.addObj,function(t){return t.status});s.forEach(u,function(t){switch(t){case 0:case 3:p=r[t]}})}else s.isEmpty(t.assgnObj.started)||(p=r[0]);console.log(p),c.marker=new google.maps.Marker({position:new google.maps.LatLng(n.clat,n.clong),icon:p,label:""+c.addObj.length})}else n.status?p=r[n.status]:s.isEmpty(t.assgnObj.started)||(p=r[0]),i.marker=new google.maps.Marker({position:new google.maps.LatLng(n.clat,n.clong),icon:p}),e.trackUpdates||e.mapMarkers.push(i)})},t.prototype.loadMapMarkers=function(t,e,n){var r=this;void 0===n&&(n=!1),this.subs.push(this.db.object("/maps/"+e).subscribe(function(o){if(o.addresses){r.trackUpdates?r.updatePipe.next({}):r.maps.push(o);var i=r.markerIdx++,a=0;s.forEach(o.addresses,function(c){console.log("/addresses/"+c),r.subs.push(r.db.object("/addresses/"+c).subscribe(function(d){if(s.isEmpty(d.burb))console.log("Address not found: "+c+" in map: "+e);else{a++;var p=null;r.trackUpdates?p=s.find(r.mapMarkers,function(t){return t.addId==c}):(p=new h,p.addId=c),d.clat=s.toNumber(d.clat),d.clong=s.toNumber(d.clong),p.addObj=d,p.mapObj=o,n?p.modalMode=n:(p.url=t+"/maps/detail/"+e,p.infoWindowStr="\n                                          <div>Address: "+(-9!=d.unit?"Unit "+d.unit+",":"")+" "+d.hnum+" "+d.st+", "+d.burb+"</div>\n                                          <div>Map: <a href='"+p.url+"' target='_blank'>"+o.terId+" - "+o.name+"</a></div>\n                                          <div>FSG: "+o.fsg+"</div>\n                                        ",p.markerIdx=i),r.trackUpdates||r.mapMarkers.push(p)}}))})}else console.log("Map not found: "+e)}))},t.prototype.loadAllMapsWithMarkers=function(t){var e=this;this.subs.push(this.db.list("/fsg/list").subscribe(function(n){n.forEach(function(n){e.subs.push(e.db.list("/fsg/"+n.$value).subscribe(function(n){n.forEach(function(n){e.loadMapMarkers(t,n.$value)})}))})}))},t.prototype.clearAllMarkers=function(){s.forEach(this.subs,function(t){t.unsubscribe()}),this.subs.length=0,this.maps.length=0,this.mapMarkers.length=0,this.trackUpdates=!1,this.triggerUpdate()},t.prototype.getAllFsgMaps=function(t){var e=this;return this.fsgs.length=0,this.db.list("/fsg/list").flatMap(function(t){return o.Observable.from(t)}).flatMap(function(n){var r=n.$value;return e.db.list("/fsg/"+r).flatMap(function(e){return e.forEach(function(e){t[e.$value]={fsgName:r}}),o.Observable.from(e)})})},t.prototype.getAllFsgMapsList=function(){var t=this,e={};return this.getAllFsgMaps(e).flatMap(function(e){return t.db.object("/maps/"+e.$value)}).flatMap(function(n){return e[n.$key].mapObj=n,t.db.object("/assignedMaps/active/"+n.$key).flatMap(function(t){return e[n.$key].assgnObj=t,o.Observable.of(n)})}).flatMap(function(t){return o.Observable.of(e)}).debounce(function(){return o.Observable.interval(1e3)}).flatMap(function(n){return s.forOwn(e,function(e,n){var r=s.find(t.fsgs,function(t){return t.fsgName==e.fsgName});r||(r=new l(e.fsgName,[]),t.fsgs.push(r));var o=s.find(r.maps,function(t){return t.id==n});o?(o.mapObj=e.mapObj,o.assgnObj=e.assgnObj):r.maps.push(new u(n,e.mapObj,e.assgnObj))}),o.Observable.of(t.fsgs)})},t.prototype.getUserMaps=function(t){var e=this,n={};return this.db.object("/users/"+t.userInfoObj.$key+"/maps").flatMap(function(t){if(console.log("Got user maps list..."),e.fsgs=[],t.$exists()){var n=[];return s.forOwn(t,function(t,e){n.push(e)}),o.Observable.from(n)}return o.Observable.of(null)}).flatMap(function(t){return console.log("Got map id...."),e.fsgs.length=0,t?e.db.object("/maps/"+t):o.Observable.of(null)}).flatMap(function(t){return console.log("Got map obj...."),e.fsgs.length=0,t?(s.isEmpty(n[t.$key])&&(n[t.$key]={fsgName:"Your Maps"}),n[t.$key].mapObj=t,e.db.object("/assignedMaps/active/"+t.$key).flatMap(function(e){return n[t.$key].assgnObj=e,o.Observable.of(t)})):o.Observable.of(null)}).flatMap(function(t){return o.Observable.of(n)}).debounce(function(){return o.Observable.interval(1e3)}).flatMap(function(t){var e=[];return s.forOwn(n,function(t,n){var r=s.find(e,function(e){return e.fsgName==t.fsgName});r||(r=new l(t.fsgName,[]),e.push(r)),r.maps.push(new u(n,t.mapObj,t.assgnObj))}),o.Observable.of(e)})},t.prototype.updateLastSaved=function(t,e){},t.prototype.updateOwner=function(t,e,n){var r={},o={owner:{id:e.id,name:e.name,expiry:e.expiry},expiry:e.expiry};s.isEmpty(t.assgnObj.started)&&(o.started=c()().toDate()),n&&e.id!=n.id&&(o.prevOwner=n),r["/assignedMaps/active/"+t.id]=o,r["/users/"+e.id+"/maps/"+t.id+"/expiry"]=e.expiry,this.db.database.ref().update(r)},t.prototype.updateUsers=function(t,e){var n={},r={};s.forEach(e,function(e){r[e.id]={name:e.name,expiry:e.expiry},n["/users/"+e.id+"/maps/"+t.id+"/expiry"]=e.expiry}),n["/assignedMaps/active/"+t.id+"/users"]=r,console.log(n),this.db.database.ref().update(n)},t.prototype.removeOwner=function(t,e){var n={};n["/assignedMaps/active/"+t.id+"/owner"]=null,n["/assignedMaps/active/"+t.id+"/expiry"]=null,n["/users/"+e.id+"/maps/"+t.id]=null,n["/assignedMaps/active/"+t.id+"/prevOwner"]=e,this.db.database.ref().update(n)},t.prototype.removeUsers=function(t,e){var n={};s.forEach(e,function(e){n["/users/"+e.id+"/maps/"+t.id]=null,n["/assignedMaps/active/"+t.id+"/users/"+e.id]=null}),this.db.database.ref().update(n)},t.prototype.updateAddrStat=function(t,e,n,r,o){void 0===o&&(o=null);var s={};s["/assignedMaps/active/"+t+"/address/"+e]=n,s["/assignedMaps/active/"+t+"/det/"+e+"/nh_when"]=c()().toDate(),s["/assignedMaps/active/"+t+"/det/"+e+"/nh_by"]=r.userInfoObj.name,s["/assignedMaps/active/"+t+"/lastSaved"]={id:r.userObj.uid,name:r.userInfoObj.name,when:c()().toDate()},this.db.database.ref().update(s).then(function(){o&&o()})},t.prototype.getCompletionPercentage=function(t){return t.mapObj.addresses&&t.assgnObj&&!s.isUndefined(t.assgnObj.address)?Math.round(this.getVisitedAddresses(t)/t.addressCount*100):0},t.prototype.getVisitedAddresses=function(t){var e=0;return t.mapObj.addresses&&t.assgnObj&&!s.isUndefined(t.assgnObj.address)?(s.forOwn(t.mapObj.addresses,function(n,r){if(!s.isUndefined(t.assgnObj.address[n])){switch(t.assgnObj.address[n]){case 1:case 2:case 4:case 5:case 7:e++}}}),e):0},t.prototype.getRemainingAddresses=function(t){return t.addressCount-this.getVisitedAddresses(t)},t}();d([n.i(r.Output)(),p("design:type",Object)],f.prototype,"onUpdate",void 0),f=d([n.i(r.Injectable)(),p("design:paramtypes",["function"==typeof(m=void 0!==i.a&&i.a)&&m||Object])],f);var m},HGbW:function(t,e,n){"use strict";var r=n("hoZb"),o=n("xrDH"),s=(n.n(o),n("+tBu"));n.d(e,"a",function(){return i});var i=function(){function t(){this.subs=[]}return t.prototype.showLoadingDialog=function(){this.loadingDialog=this.dialog.open(r.a,{disableClose:!0})},t.prototype.hideLoadingDialog=function(){this.loadingDialog&&this.loadingDialog.close()},t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){this.unsubscribeAll()},t.prototype.unsubscribeAll=function(){o.forEach(this.subs,function(t){t.unsubscribe()})},t.prototype.requireLogin=function(){var t=this;this.subs.push(this.fireAuth.getUserObs().subscribe(function(e){e?(t.loginDiag&&t.loginDiag.close(),t.fireAuth.currentUser?t.postLoginSetup():(t.fireAuth.getAllUserInfo(),t.subs.push(t.fireAuth.onCurrentUserInfo.subscribe(function(e){t.postLoginSetup()})))):t.loginDiag=t.dialog.open(s.a,{data:{consumer:t},disableClose:!0})}))},t.prototype.postLoginSetup=function(){console.log("BaseComponent post login, doing nothing.")},t.prototype.login=function(t){var e=this;this.errorMsg="",console.log("BaseComponent logging in: "),console.log(t),this.showLoadingDialog(),this.fireAuth.login(t.email,t.password).then(function(t){e.hideLoadingDialog()}).catch(function(t){e.hideLoadingDialog(),console.log(t);var n=t.message;e.errorMsg=n})},t.prototype.logout=function(){this.fireAuth.logout()},t}()},HbVw:function(t,e,n){"use strict";var r=n("fc+i"),o=n("/oeL"),s=n("13je"),i=n("B2Lq"),a=n("8k1a"),c=n("p5Ee"),d=n("0+Pn"),p=n("mPw8");n.d(e,"a",function(){return l});var u=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},l=function(){function t(){}return t}();l=u([n.i(o.NgModule)({imports:[r.a,s.a.initializeApp(c.a.firebase),i.b,a.b],exports:[p.a],declarations:[p.a],bootstrap:[],providers:[d.a]})],l)},Iqat:function(t,e,n){"use strict";var r=n("/oeL"),o=n("BkNc"),s=n("SAdc"),i=n("wINU");n.d(e,"a",function(){return d});var a=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},c=[{path:"",pathMatch:"full",redirectTo:"home"},{path:"home",component:s.a},{path:"map/:id",component:i.a}],d=function(){function t(){}return t}();d=a([n.i(r.NgModule)({imports:[o.a.forRoot(c)],exports:[o.a]})],d);s.a,i.a},KJMk:function(t,e,n){e=t.exports=n("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},MnZv:function(t,e,n){e=t.exports=n("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},RvYO:function(t,e){t.exports='<button md-mini-fab (click)="showShareDlg(true)" *ngIf="canAssignOwner()"><md-icon>assignment_ind</md-icon></button>\n<button md-mini-fab (click)="showShareDlg(false)" *ngIf="canShare()"><md-icon>share</md-icon></button>\n<button md-mini-fab (click)="returnMap()" *ngIf="canReturn()"><md-icon>assignment_return</md-icon></button>\n'},SAdc:function(t,e,n){"use strict";var r=n("/oeL"),o=n("0+Pn"),s=n("Z04r"),i=n("0o1w"),a=n("HGbW"),c=n("fc+i");n.d(e,"a",function(){return l});var d=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(t){function e(e,n,r,o){var s=t.call(this)||this;return s.dialog=n,s.fireAuth=e,s.errorMsg=s.fireAuth.currentUser?"":"Please login.",s.requireLogin(),r.addSvgIcon("add-address",o.bypassSecurityTrustResourceUrl("/assets/images/add_address.svg")),s}return d(e,t),e.prototype.postLoginSetup=function(){console.log("Home Component Post Login");var t=this.fireAuth.currentUser&&this.fireAuth.currentUser.userInfoObj?this.fireAuth.currentUser.userInfoObj.name:"";this.addUrl="https://docs.google.com/forms/d/e/1FAIpQLScYHfYNwnSIWAL9RAH3rEPC74WfkFT0FgcvaJKx1nAIROXS6A/viewform?usp=pp_url&entry.1810388592=Yes&entry.1189370340&entry.45257833&entry.681741514&entry.1482719893&entry.1018422546&entry.2060338072&entry.1052547294&entry.365006055&entry.1323592748=&entry.1534052334="+t,this.mapListComp.load()},e.prototype.canViewAllMaps=function(){return this.fireAuth.currentUser&&(this.fireAuth.currentUser.isAdmin()||this.fireAuth.currentUser.isUpdater())},e}(a.a);p([n.i(r.ViewChild)("myMapsList"),u("design:type","function"==typeof(h=void 0!==i.a&&i.a)&&h||Object)],l.prototype,"mapListComp",void 0),l=p([n.i(r.Component)({selector:"home-component",template:n("zgAq"),styles:[n("MnZv")]}),u("design:paramtypes",["function"==typeof(f=void 0!==o.a&&o.a)&&f||Object,"function"==typeof(m=void 0!==s.a&&s.a)&&m||Object,"function"==typeof(g=void 0!==s.b&&s.b)&&g||Object,"function"==typeof(b=void 0!==c.c&&c.c)&&b||Object])],l);var h,f,m,g,b},SicF:function(t,e){t.exports='<span *ngIf="user && user.userObj"><h3>{{user?.userInfoObj?.name}}</h3></span>\n'},"Xir+":function(t,e){/**
 * @license
 * Copyright 2010 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function n(t,e,r){this.extend(n,google.maps.OverlayView),this.map_=t,this.showInfo=!1,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var o=r||{};this.gridSize_=o.gridSize||60,this.minClusterSize_=o.minimumClusterSize||2,this.maxZoom_=o.maxZoom||null,this.styles_=o.styles||[],this.imagePath_=o.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=o.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,void 0!=o.zoomOnClick&&(this.zoomOnClick_=o.zoomOnClick),this.averageCenter_=!1,void 0!=o.averageCenter&&(this.averageCenter_=o.averageCenter),this.setupStyles_(),this.setMap(t),this.prevZoom_=this.map_.getZoom();var s=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var t=s.map_.getZoom();s.prevZoom_!=t&&(s.prevZoom_=t,s.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){s.redraw()}),e&&e.length&&this.addMarkers(e,!1)}function r(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinClusterSize(),this.averageCenter_=t.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new o(this,t.getStyles(),t.getGridSize()),this.infoWindowStr=null}function o(t,e,n,r){t.getMarkerClusterer().extend(o,google.maps.OverlayView),this.styles_=e,this.padding_=n||0,this.cluster_=t,this.center_=null,this.map_=t.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.infowindow=null,this.showInfo=r,this.setMap(this.map_)}n.prototype.MARKER_CLUSTER_IMAGE_PATH_="../images/m",n.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",n.prototype.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},n.prototype.onAdd=function(){this.setReady_(!0)},n.prototype.draw=function(){},n.prototype.setupStyles_=function(){if(!this.styles_.length)for(var t,e=0;t=this.sizes[e];e++)this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})},n.prototype.fitMapToMarkers=function(){for(var t,e=this.getMarkers(),n=new google.maps.LatLngBounds,r=0;t=e[r];r++)n.extend(t.getPosition());this.map_.fitBounds(n)},n.prototype.setStyles=function(t){this.styles_=t},n.prototype.getStyles=function(){return this.styles_},n.prototype.isZoomOnClick=function(){return this.zoomOnClick_},n.prototype.isAverageCenter=function(){return this.averageCenter_},n.prototype.getMarkers=function(){return this.markers_},n.prototype.getTotalMarkers=function(){return this.markers_.length},n.prototype.setMaxZoom=function(t){this.maxZoom_=t},n.prototype.getMaxZoom=function(){return this.maxZoom_},n.prototype.calculator_=function(t,e){for(var n=0,r=t.length,o=r;0!==o;)o=parseInt(o/10,10),n++;return n=Math.min(n,e),{text:r,index:n}},n.prototype.setCalculator=function(t){this.calculator_=t},n.prototype.getCalculator=function(){return this.calculator_},n.prototype.addMarkers=function(t,e){for(var n,r=0;n=t[r];r++)this.pushMarkerTo_(n);e||this.redraw()},n.prototype.pushMarkerTo_=function(t){if(t.isAdded=!1,t.draggable){var e=this;google.maps.event.addListener(t,"dragend",function(){t.isAdded=!1,e.repaint()})}this.markers_.push(t)},n.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw()},n.prototype.removeMarker_=function(t){var e=-1;if(this.markers_.indexOf)e=this.markers_.indexOf(t);else for(var n,r=0;n=this.markers_[r];r++)if(n==t){e=r;break}return-1!=e&&(t.setMap(null),this.markers_.splice(e,1),!0)},n.prototype.removeMarker=function(t,e){var n=this.removeMarker_(t);return!(e||!n)&&(this.resetViewport(),this.redraw(),!0)},n.prototype.removeMarkers=function(t,e){for(var n,r=!1,o=0;n=t[o];o++){var s=this.removeMarker_(n);r=r||s}if(!e&&r)return this.resetViewport(),this.redraw(),!0},n.prototype.setReady_=function(t){this.ready_||(this.ready_=t,this.createClusters_())},n.prototype.getTotalClusters=function(){return this.clusters_.length},n.prototype.getMap=function(){return this.map_},n.prototype.setMap=function(t){this.map_=t},n.prototype.getGridSize=function(){return this.gridSize_},n.prototype.setGridSize=function(t){this.gridSize_=t},n.prototype.getMinClusterSize=function(){return this.minClusterSize_},n.prototype.setMinClusterSize=function(t){this.minClusterSize_=t},n.prototype.getExtendedBounds=function(t){var e=this.getProjection(),n=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),r=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),o=e.fromLatLngToDivPixel(n);o.x+=this.gridSize_,o.y-=this.gridSize_;var s=e.fromLatLngToDivPixel(r);s.x-=this.gridSize_,s.y+=this.gridSize_;var i=e.fromDivPixelToLatLng(o),a=e.fromDivPixelToLatLng(s);return t.extend(i),t.extend(a),t},n.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},n.prototype.clearMarkers=function(){this.hideAllClusterInfo(),this.resetViewport(!0),this.markers_=[]},n.prototype.resetViewport=function(t){this.hideAllClusterInfo();for(var e,n=0;e=this.clusters_[n];n++)e.remove();for(var r,n=0;r=this.markers_[n];n++)r.isAdded=!1,t&&r.setMap(null);this.clusters_=[]},n.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var e,n=0;e=t[n];n++)e.remove()},0)},n.prototype.redraw=function(){this.createClusters_()},n.prototype.distanceBetweenPoints_=function(t,e){if(!t||!e)return 0;var n=(e.lat()-t.lat())*Math.PI/180,r=(e.lng()-t.lng())*Math.PI/180,o=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*6371},n.prototype.addToClosestCluster_=function(t){for(var e,n=4e4,o=null,s=(t.getPosition(),0);e=this.clusters_[s];s++){var i=e.getCenter();if(i){var a=this.distanceBetweenPoints_(i,t.getPosition());a<n&&(n=a,o=e)}}if(o&&o.isMarkerInClusterBounds(t))o.addMarker(t);else{var e=new r(this);e.setShowInfo(this.showInfo),e.addMarker(t),this.clusters_.push(e)}},n.prototype.createClusters_=function(){if(this.ready_)for(var t,e=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),n=this.getExtendedBounds(e),r=0;t=this.markers_[r];r++)!t.isAdded&&this.isMarkerInBounds_(t,n)&&this.addToClosestCluster_(t)},n.prototype.hideAllClusterInfo=function(){for(var t,e=0;t=this.clusters_[e];e++)t.closeAllInfo()},n.prototype.setShowInfo=function(t){this.showInfo=t;for(var e,n=0;e=this.clusters_[n];n++)e.setShowInfo(t),t||e.closeAllInfo()},r.prototype.closeAllInfo=function(){this.clusterIcon_.closeAllInfo()},r.prototype.setShowInfo=function(t){this.clusterIcon_.showInfo=t},r.prototype.isMarkerAlreadyAdded=function(t){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(t);for(var e,n=0;e=this.markers_[n];n++)if(e==t)return!0;return!1},r.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t))return!1;if(this.center_){if(this.averageCenter_){var e=this.markers_.length+1,n=(this.center_.lat()*(e-1)+t.getPosition().lat())/e,r=(this.center_.lng()*(e-1)+t.getPosition().lng())/e;this.center_=new google.maps.LatLng(n,r),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();t.isAdded=!0,this.markers_.push(t);var o=this.markers_.length;if(o<this.minClusterSize_&&t.getMap()!=this.map_&&t.setMap(this.map_),o==this.minClusterSize_)for(var s=0;s<o;s++)this.markers_[s].setMap(null);return o>=this.minClusterSize_&&t.setMap(null),this.updateIcon(),this.infoWindowStr=(this.infoWindowStr?this.infoWindowStr+"<hr>":"")+t.infoWindowStr,!0},r.prototype.getMarkerClusterer=function(){return this.markerClusterer_},r.prototype.getBounds=function(){for(var t,e=new google.maps.LatLngBounds(this.center_,this.center_),n=this.getMarkers(),r=0;t=n[r];r++)e.extend(t.getPosition());return e},r.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},r.prototype.getSize=function(){return this.markers_.length},r.prototype.getMarkers=function(){return this.markers_},r.prototype.getCenter=function(){return this.center_},r.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},r.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},r.prototype.getMap=function(){return this.map_},r.prototype.updateIcon=function(){var t=this.map_.getZoom(),e=this.markerClusterer_.getMaxZoom();if(e&&t>e)for(var n,r=0;n=this.markers_[r];r++)n.setMap(this.map_);else{if(this.markers_.length<this.minClusterSize_)return void this.clusterIcon_.hide();var o=this.markerClusterer_.getStyles().length,s=this.markerClusterer_.getCalculator()(this.markers_,o);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(s),this.clusterIcon_.show()}},o.prototype.triggerClusterClick=function(t){var e=this.cluster_.getMarkerClusterer();google.maps.event.trigger(e,"clusterclick",this.cluster_,t),e.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},o.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var e=this,n=!1;google.maps.event.addDomListener(this.div_,"click",function(t){n||e.triggerClusterClick(t)}),google.maps.event.addDomListener(this.div_,"mousedown",function(){n=!1}),google.maps.event.addDomListener(this.div_,"mousemove",function(){n=!0}),this.infowindow=new google.maps.InfoWindow({content:"<div id='info-window'>"+this.cluster_.infoWindowStr+"</div>"});var r=this.map_,o=this.center_,s=this.infowindow;this.showInfo;google.maps.event.addDomListener(this.div_,"mouseover",function(){e.showInfo&&(s.setPosition(o),s.open(r))})},o.prototype.closeAllInfo=function(){this.infowindow&&this.infowindow.close(this.map_)},o.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return"object"==typeof this.iconAnchor_&&2===this.iconAnchor_.length?(e.x-=this.iconAnchor_[0],e.y-=this.iconAnchor_[1]):(e.x-=parseInt(this.width_/2,10),e.y-=parseInt(this.height_/2,10)),e},o.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},o.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},o.prototype.show=function(){if(this.div_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.style.display=""}this.visible_=!0},o.prototype.remove=function(){this.setMap(null)},o.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},o.prototype.setSums=function(t){this.sums_=t,this.text_=t.text,this.index_=t.index,this.div_&&(this.div_.innerHTML=t.text),this.useStyle()},o.prototype.useStyle=function(){var t=Math.max(0,this.sums_.index-1);t=Math.min(this.styles_.length-1,t);var e=this.styles_[t];this.url_=e.url,this.height_=e.height,this.width_=e.width,this.textColor_=e.textColor,this.anchor_=e.anchor,this.textSize_=e.textSize,this.backgroundPosition_=e.backgroundPosition,this.iconAnchor_=e.iconAnchor},o.prototype.setCenter=function(t){this.center_=t},o.prototype.createCss=function(t){var e=[];e.push("background-image:url("+this.url_+");");var n=this.backgroundPosition_?this.backgroundPosition_:"0 0";e.push("background-position:"+n+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?e.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):"number"==typeof this.anchor_[0]&&this.anchor_[0]<0&&-this.anchor_[0]<this.height_?e.push("height:"+this.height_+"px; line-height:"+(this.height_+this.anchor_[0])+"px;"):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?e.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):e.push("width:"+this.width_+"px; text-align:center;")):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var r=this.textColor_?this.textColor_:"black",o=this.textSize_?this.textSize_:11;return e.push("cursor:pointer; top:"+t.y+"px; left:"+t.x+"px; color:"+r+"; position:absolute; font-size:"+o+"px; font-family:Arial,sans-serif; font-weight:bold"),e.join("")},window.MarkerClusterer=n,n.prototype.addMarker=n.prototype.addMarker,n.prototype.addMarkers=n.prototype.addMarkers,n.prototype.clearMarkers=n.prototype.clearMarkers,n.prototype.fitMapToMarkers=n.prototype.fitMapToMarkers,n.prototype.getCalculator=n.prototype.getCalculator,n.prototype.getGridSize=n.prototype.getGridSize,n.prototype.getExtendedBounds=n.prototype.getExtendedBounds,n.prototype.getMap=n.prototype.getMap,n.prototype.getMarkers=n.prototype.getMarkers,n.prototype.getMaxZoom=n.prototype.getMaxZoom,n.prototype.getStyles=n.prototype.getStyles,n.prototype.getTotalClusters=n.prototype.getTotalClusters,n.prototype.getTotalMarkers=n.prototype.getTotalMarkers,n.prototype.redraw=n.prototype.redraw,n.prototype.removeMarker=n.prototype.removeMarker,n.prototype.removeMarkers=n.prototype.removeMarkers,n.prototype.resetViewport=n.prototype.resetViewport,n.prototype.repaint=n.prototype.repaint,n.prototype.setCalculator=n.prototype.setCalculator,n.prototype.setGridSize=n.prototype.setGridSize,n.prototype.setMaxZoom=n.prototype.setMaxZoom,n.prototype.onAdd=n.prototype.onAdd,n.prototype.draw=n.prototype.draw,n.prototype.hideAllClusterInfo=n.prototype.hideAllClusterInfo,n.prototype.setShowInfo=n.prototype.setShowInfo,r.prototype.getCenter=r.prototype.getCenter,r.prototype.getSize=r.prototype.getSize,r.prototype.getMarkers=r.prototype.getMarkers,r.prototype.closeAllInfo=r.prototype.closeAllInfo,r.prototype.setShowInfo=r.prototype.setShowInfo,o.prototype.onAdd=o.prototype.onAdd,o.prototype.draw=o.prototype.draw,o.prototype.onRemove=o.prototype.onRemove,o.prototype.closeAllInfo=o.prototype.closeAllInfo},"Z/XM":function(t,e){t.exports='<form name=\'addrForm\'>\n  <div md-dialog-content>\n    <div flex="" layout="row" layout-align="center center" style="margin-top:5px;">\n      <button *ngIf="data.consumer.currentGmapUrl && data.consumer.mapStarted" md-fab (click)="data.consumer.saveStatus()" style="margin-right:5px;"><md-icon>save</md-icon></button>\n      <a *ngIf="data.consumer.currentGmapUrl" target="_blank" href="{{ data.consumer.currentGmapUrl }}" md-fab style="margin-right:5px;"><md-icon svgIcon="google-map"></md-icon></a>\n      <a *ngIf="!data.consumer.hasMultiAdds()" href="{{ data.consumer.currentFeedbackUrl }}" target="_blank" md-fab style="margin-right:5px;"><md-icon svgIcon="edit-address"></md-icon></a>\n      <button md-fab (click)="data.consumer.cancelAddrDlg()"><md-icon>cancel</md-icon></button>\n    </div>\n      <md-card *ngIf="data.consumer.mapStarted">\n        <md-card-content>\n          <div><h3>{{ data.consumer.currentAddrTitle }} </h3></div>\n          <div *ngIf="data.consumer.isNotAtHome() && data.consumer.hasDetail()"><h4>Last Visited: {{ getLastVisited() | date:\'hh:mm a dd MMM y\' }} </h4></div>\n          <md-radio-group *ngIf="!data.consumer.hasMultiAdds() && data.consumer.selectedAddObj" class="addrstat-radio-group" name="stat" [(ngModel)]="data.consumer.selectedAddObj.status">\n            <md-radio-button class="addrstat-radio-button" *ngFor="let stat of data.consumer.addrStatuses" [value]="stat.val">\n              {{ stat.label }}\n            </md-radio-button>\n          </md-radio-group>\n          <md-list *ngIf="data.consumer.hasMultiAdds()">\n            <md-list-item *ngFor="let addObj of data.consumer.currentAddr.addObj">\n              <button md-raised-button color="accent" (click)="data.consumer.selectAdd(addObj)"> {{ data.consumer.getAddressTitle(addObj) }} </button>\n            </md-list-item>\n          </md-list>\n        </md-card-content>\n      </md-card>\n      <md-card *ngIf="!data.consumer.mapStarted">\n        <md-card-content>\n          <span><h3>{{ data.consumer.currentAddrTitle }} </h3></span>\n          <div>\n              If you are expecting to work on this map, please ask any map updaters to assign this map to an owner.\n          </div>\n        </md-card-content>\n      </md-card>\n  </div>\n</form>\n'},Z2wb:function(t,e,n){e=t.exports=n("rP7Y")(!1),e.push([t.i,".mapCard{margin-top:10px;margin-bottom:10px}",""]),t.exports=t.exports.toString()},aHcY:function(t,e,n){"use strict";var r=n("/oeL"),o=n("a0oU"),s=n("wINU"),i=n("0o1w"),a=n("qbdv"),c=n("bm2B"),d=n("GsmQ"),p=n("B2Lq"),u=n("hoZb"),l=n("xwLn"),h=n("Z04r"),f=n("Htvr"),m=n("BkNc"),g=n("HbVw"),b=n("Dcui"),y=n("CKBp"),v=n("cn2Z"),j=(n.n(v),n("fL27")),_=n("CPp0");n.d(e,"a",function(){return O});var w=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},O=function(){function t(){}return t}();O=w([n.i(r.NgModule)({imports:[a.CommonModule,c.FormsModule,j.a,v.TagInputModule,o.a.forRoot({apiKey:"AIzaSyB6EVRDfSAHTAkrx-VmXyKU7Y3qLSuD0Ag"}),p.b,h.k,h.l,h.i,h.m,h.n,h.e,h.j,h.o,h.g,h.p,h.q,h.h,h.r,h.s,_.b,m.a,f.a,f.b,g.a],declarations:[s.a,i.a,l.a,u.a,y.a,y.b,s.b,s.c],exports:[s.a,i.a,l.a,y.a,y.b,s.b,s.c],providers:[d.a,b.a],entryComponents:[u.a,y.b,s.b,s.c]})],O)},"aR8+":function(t,e,n){"use strict";var r=n("fc+i"),o=n("/oeL"),s=n("fL27"),i=n("Iqat"),a=n("rgUS"),c=(n.n(a),n("wQAS")),d=n("ktAp");n.d(e,"a",function(){return u});var p=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},u=function(){function t(){}return t}();u=p([n.i(o.NgModule)({declarations:[c.a],imports:[r.a,s.a,d.a,i.a],providers:[],bootstrap:[c.a]})],u)},cDNt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("/oeL"),o=n("Qa4U"),s=n("aR8+");n("p5Ee").a.production&&n.i(r.enableProdMode)(),n.i(o.a)().bootstrapModule(s.a)},cukb:function(t,e){t.exports='<div md-dialog-content>\n  <md-card>\n    <md-card-content>\n      <span><h3>{{ data.consumer.title }} </h3></span>\n      <table width="100%">\n        <tr>\n            <td width="80%"><strong>Address</strong></td>\n            <td width="20%"><strong>Status</strong></td>\n        </tr>\n        <tr *ngFor="let addObj of data.consumer.currentMap.addresses">\n          <td width="80%">{{ data.consumer.getAddressTitle(addObj) }}</td>\n          <td width="20%">{{ data.consumer.getStatusLabel(addObj) }}</td>\n        </tr>\n      </table>\n    </md-card-content>\n    <md-card-actions>\n      <button md-fab (click)="data.consumer.closeAddrListDlg()"><md-icon>cancel</md-icon></button>\n    </md-card-actions>\n  </md-card>\n</div>\n'},dCN4:function(t,e,n){e=t.exports=n("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},efyd:function(t,e){t.exports="\x3c!--The whole content below can be removed with the new code.--\x3e\n<div mat-app-background>\n  <router-outlet></router-outlet>\n</div>\n"},hoZb:function(t,e,n){"use strict";var r=n("Z04r"),o=n("/oeL");n.d(e,"a",function(){return a});var s=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=function(){function t(t){this.dialogRef=t}return t}();a=s([n.i(o.Component)({selector:"loading-dialog",template:'\n            <div md-dialog-content>\n              <div class="flex-container"\n               fxLayout="column"\n               fxLayout.xs="column"\n               fxLayoutAlign="center center"\n               fxLayoutAlign.xs="start">\n                  <img src="/assets/images/pie-loader.svg">\n               </div>\n            </div>\n            '}),i("design:paramtypes",["function"==typeof(c=void 0!==r.d&&r.d)&&c||Object])],a);var c},hxJY:function(t,e,n){e=t.exports=n("rP7Y")(!1),e.push([t.i,"*{font-family:Roboto,sans-serif}",""]),t.exports=t.exports.toString()},ivJn:function(t,e){t.exports='\n<td-message *ngIf="!hasMaps" label="Info" sublabel="You have no maps, please contact the maps team if you are expecting maps." color="accent" icon="info"></td-message>\n<td-expansion-panel *ngFor="let fsg of fsgMaps" [expand]="fsg.expanded" (expanded)="toggleExpand(fsg, true)" (collapsed)="toggleExpand(fsg, false)">\n  <ng-template td-expansion-panel-header>\n    <md-toolbar [ngClass]="\'bgc-blue-grey-600 whiteText marginTopBottom-2\'">\n      <span><h2>{{fsg.fsgName}}</h2> </span>\n      <span class="fill-remaining-space"></span>\n      <span><md-icon *ngIf="!fsg.expanded">keyboard_arrow_down</md-icon><md-icon *ngIf="fsg.expanded">keyboard_arrow_up</md-icon></span>\n    </md-toolbar>\n  </ng-template>\n  <md-card class=\'mapCard\' *ngFor="let map of fsg.maps">\n    <md-card-header>\n      <md-card-title>\n        <h3>\n          {{map.mapObj.terId}} - {{map.mapObj.name}}\n        </h3>\n      </md-card-title>\n    </md-card-header>\n    <md-card-content>\n      <md-progress-bar class="marginBottom-10" *ngIf="map.assgnObj && map.assgnObj.started" [value]="getCompletionPercentage(map)" [color]="primary"></md-progress-bar>\n      <div>\n        <md-chip-list selectable="false">\n          <md-chip *ngIf="map.assgnObj && map.assgnObj.started">Remaining: {{ getRemaining(map) }}</md-chip>\n          <md-chip>Addresses: {{map.addressCount}}</md-chip>\n          <md-chip *ngIf="map.assgnObj && map.assgnObj.lastSaved">Last used on: {{ map.assgnObj.lastSaved.when  | date:\'dd MMM y\' }} </md-chip>\n          <md-chip *ngIf="map.assgnObj && map.assgnObj.lastSaved">Last used by: {{ map.assgnObj.lastSaved.name }}</md-chip>\n          <md-chip *ngIf="map.hasOwner()">Owner: {{ map.getOwner().name}} </md-chip>\n          <md-chip *ngIf="map.hasUsers()">Users: {{ getMapUsers(map) }}</md-chip>\n          <md-chip *ngIf="map.assgnObj && map.assgnObj.started">Started: {{ map.assgnObj.started | date:\'dd MMM y\'}}</md-chip>\n          <md-chip *ngIf="map.assgnObj && map.assgnObj.expiry">Expiry: {{ map.assgnObj.expiry | date:\'dd MMM y\'}}</md-chip>\n          <md-chip *ngIf="map.mapObj.lastCompleted && isUpdater()">Last completed: {{ map.mapObj.lastCompleted | date:\'dd MMM y\'}}</md-chip>\n          <md-chip *ngIf="map.assgnObj.prevOwner && isUpdater()" >Last Owner: {{ map.assgnObj.prevOwner.name }}</md-chip>\n        </md-chip-list>\n      </div>\n    </md-card-content>\n    <md-card-actions>\n      <a *ngIf="canOpenMap(map)" md-mini-fab [routerLink]="[\'/map\', map.id]"><md-icon>map</md-icon></a>\n      <mapshare *ngIf="canOpenMap(map)" [map]="map"></mapshare>\n    </md-card-actions>\n  </md-card>\n</td-expansion-panel>\n'},ktAp:function(t,e,n){"use strict";var r=n("qbdv"),o=n("/oeL"),s=n("bm2B"),i=n("Z04r"),a=n("SAdc"),c=n("+tBu"),d=n("HbVw"),p=n("aHcY"),u=n("b9Zm"),l=n("BkNc");n.d(e,"a",function(){return f});var h=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},f=function(){function t(){}return t}();f=h([n.i(o.NgModule)({imports:[r.CommonModule,s.FormsModule,i.e,i.f,i.g,i.h,i.i,i.j,u.a,i.k,d.a,p.a,l.a],declarations:[a.a,c.a],exports:[r.CommonModule,s.FormsModule,p.a,a.a,c.a,d.a],providers:[],entryComponents:[c.a]})],f)},mPw8:function(t,e,n){"use strict";var r=n("/oeL"),o=n("0+Pn"),s=n("HGbW");n.d(e,"a",function(){return d});var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(t){function e(e){var n=t.call(this)||this;return n.fireAuth=e,n.subs=[],n}return i(e,t),e.prototype.ngOnInit=function(){var t=this;this.user=this.fireAuth.currentUser,this.subs.push(this.fireAuth.onCurrentUserInfo.subscribe(function(e){t.user=t.fireAuth.currentUser,console.log("User info:"),console.log(t.user)}))},e}(s.a);d=a([n.i(r.Component)({selector:"userinfo",template:n("SicF")}),c("design:paramtypes",["function"==typeof(p=void 0!==o.a&&o.a)&&p||Object])],d);var p},n7du:function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="n7du"},p5Ee:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={production:!0,app:{mapBase:"https://macgregor.jwapp.xyz/#"},firebase:{apiKey:"AIzaSyCjArW7DreGKLfBes3RXS_-z9B1ICQX5KE",authDomain:"congmap-prod.firebaseapp.com",databaseURL:"https://congmap-prod.firebaseio.com",projectId:"congmap-prod",storageBucket:"congmap-prod.appspot.com",messagingSenderId:"232314776603"}}},wINU:function(t,e,n){"use strict";var r=n("/oeL"),o=n("GsmQ"),s=n("Dqrr"),i=(n.n(s),n("p5Ee")),a=n("Z04r"),c=n("xrDH"),d=(n.n(c),n("BkNc")),p=n("Dcui"),u=n("HGbW"),l=n("0+Pn"),h=n("fc+i");n.d(e,"a",function(){return y}),n.d(e,"b",function(){return v}),n.d(e,"c",function(){return j});var f=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},g=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},b=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},y=function(t){function e(e,n,o,s,i,a,c){var d=t.call(this)||this;return d.mapService=e,d.route=s,d.winRef=i,d.currentLocation={addObj:{clat:null,clang:null},iconUrl:"/assets/images/my_location_1.svg",pushed:!1},d.points=[],d.centerLat=-27.5518075,d.centerLng=153.0807544,d.zoom=13,d.height="700px",d.heightPadding=50,d.maxWaitTries=20,d.maxWaitCtr=0,d.sameCtr=0,d.sameMax=10,d.checkInterval=1e3,d.showInfo=!1,d.onToggleShowInfo=new r.EventEmitter,d.onComplete=new r.EventEmitter,d.onAddressClick=new r.EventEmitter,d.onAddLocMarker=new r.EventEmitter,d.onFit=new r.EventEmitter,d.minimumClusterSize=2,d.shortenTitleWidth=1024,d.triggerUpdate=!1,d.mapStarted=!1,d.showLocation=!1,d.locationSearching=!1,d.dialog=n,d.fireAuth=o,d.requireLogin(),a.addSvgIcon("fit-map",c.bypassSecurityTrustResourceUrl("/assets/images/fitmap.svg")),a.addSvgIcon("add-address",c.bypassSecurityTrustResourceUrl("/assets/images/add_address.svg")),d}return f(e,t),e.prototype.postLoginSetup=function(){var t=this;console.log(this.winRef.nativeWindow.innerHeight),this.height=this.winRef.nativeWindow.innerHeight-this.heightPadding+"px",this.title="Loading...",this.subs.push(this.route.params.subscribe(function(e){t.mapId=e.id,t.loadMaps()}))},e.prototype.ngOnDestroy=function(){this.clearMaps(),this.unsubscribeAll()},e.prototype.toggleShowInfo=function(){this.showInfo=!this.showInfo,console.log("Emitting: "+this.showInfo),this.onToggleShowInfo.emit(this.showInfo)},e.prototype.toggleShowLocation=function(){this.showLocation=!this.showLocation,this.showLocation?this.showCurrentLoc():navigator.geolocation&&(navigator.geolocation.clearWatch(this.locationWatch),this.onAddLocMarker.emit(null))},e.prototype.fitMap=function(){this.onFit.emit({})},e.prototype.loadMaps=function(){var t=this;if(!c.isEmpty(this.points))return void console.log("Maps already loaded");var e=i.a.app.mapBase;if(this.showLoadingDialog(),"all"!=this.mapId)return void this.loadSingleMap(e);this.mapService.loadAllMapsWithMarkers(e);var n=s.Observable.interval(this.checkInterval).subscribe(function(e){t.mapService.mapMarkers.length!=t.curPointsCtr?(t.curPointsCtr=t.mapService.mapMarkers.length,t.sameCtr=0):(t.maxWaitCtr++,t.sameCtr++,(t.maxWaitCtr>t.maxWaitTries||t.sameCtr>t.sameMax)&&(console.log("Got all addresses, rendering..."),console.log("Total no. maps: "+t.mapService.maps.length),console.log("Total no. of addresses: "+t.mapService.mapMarkers.length),t.points=t.mapService.mapMarkers,n.unsubscribe(),t.hideLoadingDialog(),t.mapService.trackUpdates=!0,t.onComplete.emit({}),t.triggerUpdate&&t.mapService.triggerUpdate(),t.mapService.maps.length>1?"all"==t.mapId&&(t.title="All Maps"):(t.title=t.mapService.maps[0].terId+" - "+t.mapService.maps[0].name,t.winRef.nativeWindow.innerWidth<=t.shortenTitleWidth&&(t.title="Map "+t.mapService.maps[0].terId)),t.subs.push(t.onAddressClick.subscribe(function(e){console.log(e),t.currentAddr=e.addrMarker,t.showAddrDlg()}))))})},e.prototype.loadSingleMap=function(t){var e=this;this.minimumClusterSize=200,this.subs.push(this.mapService.loadMapMarkersObs(t,this.mapId).subscribe(function(t){console.log("Map: "),console.log(t),e.mapStarted=t.assgnObj.$exists()&&!c.isEmpty(t.assgnObj.started),e.currentMap=t,e.mapService.createMarkersWithStatus(t),e.points=e.mapService.mapMarkers,e.mapService.trackUpdates=!0,e.onComplete.emit({}),e.triggerUpdate&&e.mapService.triggerUpdate(),e.title=e.mapService.maps[0].terId+" - "+e.mapService.maps[0].name,e.winRef.nativeWindow.innerWidth<=e.shortenTitleWidth&&(e.title="Map "+e.mapService.maps[0].terId);var n=e.fireAuth.currentUser&&e.fireAuth.currentUser.userInfoObj?e.fireAuth.currentUser.userInfoObj.name:"";e.addUrl="https://docs.google.com/forms/d/e/1FAIpQLScYHfYNwnSIWAL9RAH3rEPC74WfkFT0FgcvaJKx1nAIROXS6A/viewform?usp=pp_url&entry.1810388592=Yes&entry.1189370340&entry.45257833&entry.681741514&entry.1482719893&entry.1018422546&entry.2060338072&entry.1052547294&entry.365006055&entry.1323592748="+e.mapService.maps[0].terId+"&entry.1534052334="+n,e.hideLoadingDialog(),e.triggerUpdate=!0,e.subs.push(e.onAddressClick.subscribe(function(t){console.log(t),e.currentAddr=t.addrMarker,e.hasMultiAdds()?(e.currentAddrTitle="Multiple addresses, select one below.",e.currentGmapUrl=null,e.selectedAddObj=null):(e.currentAddrTitle=e.getAddressTitle(e.currentAddr.addObj),e.currentGmapUrl=e.getGmapUrl(e.currentAddr.addObj),e.selectedAddObj=e.currentAddr.addObj,(c.isUndefined(e.selectedAddObj.status)||c.isEmpty(e.selectedAddObj.status))&&(e.selectedAddObj.status=0),e.buildFeedbackUrl()),e.showAddrDlg()}))}))},e.prototype.startMap=function(t){},e.prototype.isNotAtHome=function(){return this.currentAddr&&3==this.currentAddr.map.getStatus(this.currentAddr.addId)},e.prototype.hasDetail=function(){return this.currentAddr&&this.currentAddr.map.getStatusDetail(this.currentAddr.addId)},e.prototype.getLastVisited=function(){var t=this.currentAddr.map.getStatusDetail(this.currentAddr.addId);return t?(console.log("Detail is: "),console.log(t),t.nh_when):null},e.prototype.getAddressTitle=function(t){var e=t.unit;return c.isUndefined(e)||!e||"-9"==""+e?e="":e+="/",""+e+t.hnum+" "+t.st+", "+t.burb},e.prototype.getGmapUrl=function(t){return"https://www.google.com/maps/dir/?api=1&destination="+t.hnum+" "+t.st+", "+t.burb+"&travelmode=driving"},e.prototype.getStatuses=function(){var t=this;this.addrStatuses||(this.fireAuth.currentUser.isAdmin()||this.fireAuth.currentUser.isUpdater()?this.addrStatuses=this.mapService.addrStatuses:(this.addrStatuses=[],c.forEach(this.mapService.addrStatuses,function(e){5!=e.val&&7!=e.val&&t.addrStatuses.push(e)})))},e.prototype.showAddrDlg=function(){this.getStatuses(),console.log("Opening dialog..."),this.addrDlg&&this.closeAddrDlg(),this.addrDlg=this.dialog.open(v,{data:{consumer:this},disableClose:!0})},e.prototype.closeAddrDlg=function(){console.log("Closing dialog..."),this.dialog.closeAll(),this.addrDlg=null},e.prototype.cancelAddrDlg=function(){this.selectedAddObj=null,this.closeAddrDlg()},e.prototype.showCurrentLoc=function(){var t=this;navigator.geolocation&&(this.locationSearching=!0,this.locationWatch=navigator.geolocation.watchPosition(function(e){console.log("Curernt position:"),console.log(e.coords),t.locationSearching&&(t.locationSearching=!1),t.onAddLocMarker.emit({position:{lat:e.coords.latitude,lng:e.coords.longitude},iconUrl:t.currentLocation.iconUrl})},function(t){console.error(t)}))},e.prototype.clearMaps=function(){this.mapService.clearAllMarkers(),this.currentLocation.pushed=!1},e.prototype.showMarker=function(){this.clearMaps()},e.prototype.logout=function(){this.clearMaps(),t.prototype.logout.call(this),this.triggerUpdate=!0},e.prototype.isAdmin=function(){return this.fireAuth.currentUser&&this.fireAuth.currentUser.isAdmin()},e.prototype.isUpdater=function(){return this.fireAuth.currentUser&&(this.fireAuth.currentUser.isAdmin()||this.fireAuth.currentUser.isUpdater())},e.prototype.onStatusChange=function(t){},e.prototype.saveStatus=function(){var t=this,e=this.currentAddr.mapObj.$key,n=this.selectedAddObj.$key,r=this.selectedAddObj.status;this.selectedAddObj;this.closeAddrDlg(),this.showLoadingDialog(),console.log("Status: "+r),this.mapService.updateAddrStat(e,n,r,this.fireAuth.currentUser,function(){t.selectedAddObj=null})},e.prototype.hasMultiAdds=function(){return c.isArray(this.currentAddr.addObj)&&!this.selectedAddObj},e.prototype.selectAdd=function(t){this.currentAddrTitle=this.getAddressTitle(t),this.currentGmapUrl=this.getGmapUrl(t),this.selectedAddObj=t,this.buildFeedbackUrl()},e.prototype.buildFeedbackUrl=function(){var t=this.fireAuth.currentUser&&this.fireAuth.currentUser.userInfoObj?this.fireAuth.currentUser.userInfoObj.name:"";this.currentFeedbackUrl="https://docs.google.com/forms/d/e/1FAIpQLScYHfYNwnSIWAL9RAH3rEPC74WfkFT0FgcvaJKx1nAIROXS6A/viewform?usp=pp_url&entry.1810388592=No&entry.1189370340="+this.currentAddrTitle+"&entry.45257833&entry.681741514="+this.mapService.maps[0].terId+"&entry.1482719893="+t+"&entry.1018422546&entry.2060338072&entry.1052547294&entry.365006055&entry.1323592748&entry.1534052334"},e.prototype.viewList=function(){this.getStatuses(),this.addrListDlg=this.dialog.open(j,{data:{consumer:this},disableClose:!0})},e.prototype.closeAddrListDlg=function(){this.addrListDlg.close()},e.prototype.getAddressTitleWithStatus=function(t){var e=this.getAddressTitle(t);return t.status&&(e=this.getStatusLabel(t.status)+" - "+e),e},e.prototype.getStatusLabel=function(t){var e="Not Done";return c.isUndefined(t.status)||c.forEach(this.addrStatuses,function(n){t.status==n.val&&(e=n.label)}),e},e}(u.a);y=m([n.i(r.Component)({selector:"map-component",template:n("3CHR"),styles:[n("KJMk")]}),g("design:paramtypes",["function"==typeof(_=void 0!==o.a&&o.a)&&_||Object,"function"==typeof(w=void 0!==a.a&&a.a)&&w||Object,"function"==typeof(O=void 0!==l.a&&l.a)&&O||Object,"function"==typeof(M=void 0!==d.b&&d.b)&&M||Object,"function"==typeof(k=void 0!==p.a&&p.a)&&k||Object,"function"==typeof(A=void 0!==a.b&&a.b)&&A||Object,"function"==typeof(x=void 0!==h.c&&h.c)&&x||Object])],y);var v=function(){function t(t,e,n,r){this.dialogRef=t,this.data=e,n.addSvgIcon("google-map",r.bypassSecurityTrustResourceUrl("/assets/images/google-maps.svg")),n.addSvgIcon("edit-address",r.bypassSecurityTrustResourceUrl("/assets/images/edit_address.svg"))}return t}();v=m([n.i(r.Component)({selector:"addr-component",template:n("Z/XM")}),b(1,n.i(r.Inject)(a.c)),g("design:paramtypes",["function"==typeof(S=void 0!==a.d&&a.d)&&S||Object,Object,"function"==typeof(I=void 0!==a.b&&a.b)&&I||Object,"function"==typeof(L=void 0!==h.c&&h.c)&&L||Object])],v);var j=function(){function t(t,e,n,r){this.dialogRef=t,this.data=e}return t}();j=m([n.i(r.Component)({selector:"addrlist-component",template:n("cukb")}),b(1,n.i(r.Inject)(a.c)),g("design:paramtypes",["function"==typeof(C=void 0!==a.d&&a.d)&&C||Object,Object,"function"==typeof(U=void 0!==a.b&&a.b)&&U||Object,"function"==typeof(P=void 0!==h.c&&h.c)&&P||Object])],j);var _,w,O,M,k,A,x,S,I,L,C,U,P},wQAS:function(t,e,n){"use strict";var r=n("/oeL");n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},s=function(){function t(){}return t}();s=o([n.i(r.Component)({selector:"app-root",template:n("efyd"),styles:[n("hxJY")]})],s)},xwLn:function(t,e,n){"use strict";var r=n("/oeL"),o=n("a0oU"),s=n("Dqrr"),i=(n.n(s),n("xrDH")),a=(n.n(i),n("Xir+"));n.n(a);n.d(e,"a",function(){return p});var c=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,i=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t){this.gmapsApi=t,this.markers=[],this.maxTypeIdx=3,this.maxColorIdx=3,this.markerIcons=[],this.style={url:"/assets/images/place-markers/cluster.png",height:40,width:40,textColor:"#FFF",textSize:11,backgroundPosition:"center center"},this.options={imagePath:"/assets/images/place-markers/cluster",gridSize:20,minimumClusterSize:2,styles:[this.style,this.style,this.style]},this.minimumClusterSize=2}return t.prototype.ngOnInit=function(){var t=this;this.onUpdate.subscribe(function(e){t.clearMarkers(),t.loadPoints()}),this.onSetShowClusterInfo.subscribe(function(e){t.markerCluster.setShowInfo(e)}),this.onFit&&this.onFit.subscribe(function(e){t.fitBounds()}),this.onClear&&this.onClear.subscribe(function(e){t.clearMarkers()}),this.onAddLocMarker&&this.onAddLocMarker.subscribe(function(e){t.gmapsApi.getNativeMap().then(function(n){if(t.resetBounds(),t.locationMarker)if(e){var r=new google.maps.LatLng(e.position.lat,e.position.lng);t.locationMarker.setPosition(r),t.bounds.extend(t.locationMarker.getPosition())}else t.locationMarker.setMap(null),t.locationMarker=null;else t.locationMarker=new google.maps.Marker({position:e.position,map:n,icon:e.iconUrl,optimized:!1}),t.bounds.extend(t.locationMarker.getPosition())})})},t.prototype.resetBounds=function(){var t=this;this.bounds=new google.maps.LatLngBounds,i.forEach(this.markers,function(e){t.bounds.extend(e.getPosition())})},t.prototype.ngOnChanges=function(t){this.clearMarkers(),this.loadPoints()},t.prototype.loadPoints=function(){var t=this;if(!this.points||0==this.points.length)return void console.log("No points to load...");this.bounds=new google.maps.LatLngBounds,this.gmapsApi.getNativeMap().then(function(e){if(i.isEmpty(t.markerIcons)){t.scaledMarkerSize=new google.maps.Size(35,35);for(var n=0;n<=t.maxTypeIdx;n++)for(var r=0;r<=t.maxColorIdx;r++){var o="/assets/images/place-markers/pin-"+n+"-"+r+".svg";t.markerIcons.push({scaledSize:t.scaledMarkerSize,url:o})}}s.Observable.interval(500).skipWhile(function(e){return null==t.points||t.points.length<=0}).take(1).subscribe(function(){if(t.points.length>0){console.log("Painting markers...");for(var n=t.onAddressClick,r=0,o=t.points;r<o.length;r++){var s=o[r];!function(r){var o=new google.maps.Marker({position:new google.maps.LatLng(r.addObj.clat,r.addObj.clong),icon:t.markerIcons[r.markerIdx%t.markerIcons.length]});if(r.marker&&(o=r.marker),r.modalMode)o.addListener("click",function(){n.emit({gmap:e,gmarker:o,addrMarker:r})});else{var s='<div id="info-window">'+r.infoWindowStr+"</div>";o.infoWindowStr=r.infoWindowStr;var i=new google.maps.InfoWindow({content:s});o.addListener("click",function(){i.open(e,o)})}t.markers.push(o),t.bounds.extend(o.getPosition())}(s)}}else t.markers=[];t.options.minimumClusterSize=t.minimumClusterSize,t.markerCluster=new MarkerClusterer(e,t.markers,t.options),e.setCenter(t.bounds.getCenter()),e.fitBounds(t.bounds)})})},t.prototype.clearMarkers=function(){this.markerCluster&&(this.markers=[],this.markerCluster.clearMarkers())},t.prototype.fitBounds=function(){var t=this;this.gmapsApi.getNativeMap().then(function(e){e.setCenter(t.bounds.getCenter()),e.fitBounds(t.bounds)})},t}();c([n.i(r.Input)(),d("design:type",Array)],p.prototype,"points",void 0),c([n.i(r.Input)(),d("design:type","function"==typeof(u=void 0!==r.EventEmitter&&r.EventEmitter)&&u||Object)],p.prototype,"onUpdate",void 0),c([n.i(r.Input)(),d("design:type","function"==typeof(l=void 0!==r.EventEmitter&&r.EventEmitter)&&l||Object)],p.prototype,"onFit",void 0),c([n.i(r.Input)(),d("design:type","function"==typeof(h=void 0!==r.EventEmitter&&r.EventEmitter)&&h||Object)],p.prototype,"onSetShowClusterInfo",void 0),c([n.i(r.Input)(),d("design:type","function"==typeof(f=void 0!==r.EventEmitter&&r.EventEmitter)&&f||Object)],p.prototype,"onClear",void 0),c([n.i(r.Input)(),d("design:type","function"==typeof(m=void 0!==r.EventEmitter&&r.EventEmitter)&&m||Object)],p.prototype,"onAddressClick",void 0),c([n.i(r.Input)(),d("design:type","function"==typeof(g=void 0!==r.EventEmitter&&r.EventEmitter)&&g||Object)],p.prototype,"onAddLocMarker",void 0),c([n.i(r.Input)(),d("design:type",Array)],p.prototype,"markerIcons",void 0),c([n.i(r.Input)(),d("design:type",Object)],p.prototype,"style",void 0),c([n.i(r.Input)(),d("design:type",Object)],p.prototype,"options",void 0),c([n.i(r.Input)(),d("design:type",Number)],p.prototype,"minimumClusterSize",void 0),p=c([n.i(r.Directive)({selector:"marker-cluster"}),d("design:paramtypes",["function"==typeof(b=void 0!==o.b&&o.b)&&b||Object])],p);var u,l,h,f,m,g,b},zgAq:function(t,e){t.exports='<div style="text-align:center">\n  <h2>\n    Macgregor Maps 2.3\n  </h2>\n</div>\n<div>\n  \x3c!-- <div class="flex-container"\n     fxLayout="row"\n     fxLayout.xs="row"\n     fxLayoutAlign="space-around none"\n     fxLayoutAlign.xs="start"> --\x3e\n     <md-toolbar [ngClass]="\'bgc-blue-grey-900 whiteText marginTopBottom-2\'">\n        <userinfo></userinfo>\n        <span class="fill-remaining-space"></span>\n        <span><a style="margin-right: 10px;" md-mini-fab [routerLink]="[\'/map/all\']" *ngIf="canViewAllMaps()"><md-icon >map</md-icon></a></span>\n        <span><a href="{{ addUrl }}" target="_blank" md-mini-fab style="margin-right: 10px;"><md-icon svgIcon="add-address"></md-icon></a></span>\n        <span><a md-mini-fab target="_blank" href="https://docs.google.com/document/d/1sNfzBlGop98HkbRW46PdGk0K2Hg8TLbHLkmysjLExKw/edit?usp=drive_web" style="margin-right: 10px;"><md-icon>help</md-icon></a></span>\n        <span><button md-mini-fab (click)="logout()"><md-icon>exit_to_app</md-icon></button></span>\n     </md-toolbar>\n   \x3c!-- </div> --\x3e\n  <mapslist-component #myMapsList></mapslist-component>\n</div>\n'}},[0]);