webpackJsonp([1],{"+tBu":function(t,e,o){"use strict";var r=o("/oeL"),i=o("Z04r");o.d(e,"a",function(){return p});var n=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(n<3?i(s):n>3?i(e,o,s):i(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(o,r){e(o,r,t)}},p=function(){function t(t,e){this.dialogRef=t,this.data=e,this.onLogin=new r.c}return t.prototype.login=function(){console.log("Logging in...");var t={email:this.email,password:this.password};this.onLogin.emit(t),this.data.consumer.login(t)},t}();n([o.i(r.d)(),s("design:type",Object)],p.prototype,"onLogin",void 0),n([o.i(r.e)(),s("design:type",Object)],p.prototype,"errorMsg",void 0),p=n([o.i(r.f)({selector:"login-component",template:o("8Vg4"),styles:[o("dCN4")]}),a(1,o.i(r.g)(i.g)),s("design:paramtypes",["function"==typeof(c=void 0!==i.h&&i.h)&&c||Object,Object])],p);var c},0:function(t,e,o){t.exports=o("cDNt")},"3CHR":function(t,e){t.exports='<md-slide-toggle (change)="toggleShowInfo($event)">Show Cluster Info</md-slide-toggle>\n<agm-map [latitude]="centerLat" [longitude]="centerLng" [zoom]="zoom" [ngStyle]="{\'height\': height}">\n  <marker-cluster [onUpdate]="mapService.onUpdate" [onSetShowClusterInfo]="onToggleShowInfo" [points]="points" ></marker-cluster>\n</agm-map>\n'},"8Vg4":function(t,e){t.exports='<div md-dialog-content>\n  <form name=\'loginFrm\' (submit)=\'login($event)\'>\n    <div class="flex-container"\n       fxLayout="column"\n       fxLayout.xs="column"\n       fxLayoutAlign="center center"\n       fxLayoutAlign.xs="start">\n       <div>\n        <div>\n          <md-input-container>\n            <label>Email</label>\n            <input mdInput type=\'email\' name="email" [(ngModel)]="email" >\n          </md-input-container>\n        </div>\n        <div>\n          <md-input-container>\n            <label>Password</label>\n            <input mdInput type=\'password\' name="password" [(ngModel)]="password" >\n          </md-input-container>\n        </div>\n        <md-dialog-actions>\n          <button md-button md-raised-button type=\'submit\' [disabled]="isPending || isMaint" >Login</button>\n        </md-dialog-actions>\n        <div>\n          {{data.consumer.errorMsg}}\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n'},GsmQ:function(t,e,o){"use strict";var r=o("/oeL"),i=o("Dqrr"),n=(o.n(i),o("xrDH")),s=(o.n(n),o("B2Lq"));o.d(e,"a",function(){return h});var a=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(n<3?i(s):n>3?i(e,o,s):i(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(){}return t}(),h=function(){function t(t){var e=this;this.db=t,this.onUpdate=new r.c,this.markerIdx=0,this.trackUpdates=!1,this.updatePipe=new i.Subject,this.maps=[],this.updatePipe.debounceTime(5e3).subscribe(function(t){e.onUpdate.emit(t)})}return t.prototype.loadMaps=function(t){var e=this;this.mapMarkers=[],this.db.list("/fsg/list").subscribe(function(o){o.forEach(function(o){e.db.list("/fsg/"+o.$value).subscribe(function(r){r.forEach(function(r){e.db.object("/maps/"+r.$value).subscribe(function(i){if(i.addresses){e.trackUpdates?e.updatePipe.next({}):e.maps.push(i);var s=e.markerIdx++,a=0;n.forEach(i.addresses,function(o){e.db.object("/addresses/"+o).subscribe(function(p){if(n.isEmpty(p.burb))console.log("Address not found: "+o+" in map: "+r.$value);else{a++;var h=null;e.trackUpdates?h=n.find(e.mapMarkers,function(t){return t.addId==o}):(h=new c,h.addId=o),p.clat=n.toNumber(p.clat),p.clong=n.toNumber(p.clong),h.addObj=p,h.mapObj=i,h.url=t+"/maps/detail/"+r.$value,h.infoWindowStr="\n                                                <div>Address: "+(-9!=p.unit?"Unit "+p.unit+",":"")+" "+p.hnum+" "+p.st+", "+p.burb+"</div>\n                                                <div>Map: <a href='"+h.url+"' target='_blank'>"+i.terId+" - "+i.name+"</a></div>\n                                                <div>FSG: "+i.fsg+"</div>\n                                              ",h.markerIdx=s,e.trackUpdates||e.mapMarkers.push(h)}})})}else console.log("Map not found: "+r.$value+" in fsg: "+o.$value)})})})})})},t.prototype.clearAllMarkers=function(){this.mapMarkers.length=0,this.mapMarkers=[]},t}();a([o.i(r.d)(),p("design:type",Object)],h.prototype,"onUpdate",void 0),h=a([o.i(r.n)(),p("design:paramtypes",["function"==typeof(l=void 0!==s.a&&s.a)&&l||Object])],h);var l},KJMk:function(t,e,o){e=t.exports=o("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},MnZv:function(t,e,o){e=t.exports=o("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},MoUt:function(t,e,o){"use strict";var r=o("fc+i"),i=o("/oeL"),n=o("13je"),s=o("B2Lq"),a=o("8k1a"),p=o("p5Ee"),c=o("tM03");o.d(e,"a",function(){return l});var h=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(n<3?i(s):n>3?i(e,o,s):i(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s},l=function(){function t(){}return t}();l=h([o.i(i.b)({imports:[r.a,n.a.initializeApp(p.a.firebase),s.b,a.b],declarations:[],bootstrap:[],providers:[c.a]})],l)},SAdc:function(t,e,o){"use strict";var r=o("/oeL"),i=o("tM03"),n=o("wINU"),s=o("Z04r"),a=o("+tBu");o.d(e,"a",function(){return h});var p=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(n<3?i(s):n>3?i(e,o,s):i(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=function(){function t(t,e){var o=this;this.fireAuth=t,this.dialog=e,this.user=this.fireAuth.getUser(),this.errorMsg=this.user?"":"Please login.",this.fireAuth.onAuthChange(function(t){console.log("Auth state change:"),console.log(t),o.user=t,t?(o.loginDiag&&o.loginDiag.close(),o.mapComp.loadMaps()):o.loginDiag=o.dialog.open(a.a,{data:{consumer:o},disableClose:!0})})}return t.prototype.login=function(t){var e=this;this.errorMsg="",console.log("Home component logging in: "),console.log(t),this.fireAuth.login(t.email,t.password).then(function(t){e.user=t}).catch(function(t){console.log(t);var o=t.message;e.errorMsg=o})},t.prototype.logout=function(){this.mapComp.clearMaps(),this.fireAuth.logout()},t}();p([o.i(r.z)("mapComponent"),c("design:type","function"==typeof(l=void 0!==n.a&&n.a)&&l||Object)],h.prototype,"mapComp",void 0),h=p([o.i(r.f)({selector:"home-component",template:o("zgAq"),styles:[o("MnZv")]}),c("design:paramtypes",["function"==typeof(u=void 0!==i.a&&i.a)&&u||Object,"function"==typeof(d=void 0!==s.i&&s.i)&&d||Object])],h);var l,u,d},"Xir+":function(t,e){/**
 * @license
 * Copyright 2010 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function o(t,e,r){this.extend(o,google.maps.OverlayView),this.map_=t,this.showInfo=!1,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var i=r||{};this.gridSize_=i.gridSize||60,this.minClusterSize_=i.minimumClusterSize||2,this.maxZoom_=i.maxZoom||null,this.styles_=i.styles||[],this.imagePath_=i.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=i.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,void 0!=i.zoomOnClick&&(this.zoomOnClick_=i.zoomOnClick),this.averageCenter_=!1,void 0!=i.averageCenter&&(this.averageCenter_=i.averageCenter),this.setupStyles_(),this.setMap(t),this.prevZoom_=this.map_.getZoom();var n=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var t=n.map_.getZoom();n.prevZoom_!=t&&(n.prevZoom_=t,n.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){n.redraw()}),e&&e.length&&this.addMarkers(e,!1)}function r(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinClusterSize(),this.averageCenter_=t.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new i(this,t.getStyles(),t.getGridSize()),this.infoWindowStr=null}function i(t,e,o,r){t.getMarkerClusterer().extend(i,google.maps.OverlayView),this.styles_=e,this.padding_=o||0,this.cluster_=t,this.center_=null,this.map_=t.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.infowindow=null,this.showInfo=r,this.setMap(this.map_)}o.prototype.MARKER_CLUSTER_IMAGE_PATH_="../images/m",o.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",o.prototype.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},o.prototype.onAdd=function(){this.setReady_(!0)},o.prototype.draw=function(){},o.prototype.setupStyles_=function(){if(!this.styles_.length)for(var t,e=0;t=this.sizes[e];e++)this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})},o.prototype.fitMapToMarkers=function(){for(var t,e=this.getMarkers(),o=new google.maps.LatLngBounds,r=0;t=e[r];r++)o.extend(t.getPosition());this.map_.fitBounds(o)},o.prototype.setStyles=function(t){this.styles_=t},o.prototype.getStyles=function(){return this.styles_},o.prototype.isZoomOnClick=function(){return this.zoomOnClick_},o.prototype.isAverageCenter=function(){return this.averageCenter_},o.prototype.getMarkers=function(){return this.markers_},o.prototype.getTotalMarkers=function(){return this.markers_.length},o.prototype.setMaxZoom=function(t){this.maxZoom_=t},o.prototype.getMaxZoom=function(){return this.maxZoom_},o.prototype.calculator_=function(t,e){for(var o=0,r=t.length,i=r;0!==i;)i=parseInt(i/10,10),o++;return o=Math.min(o,e),{text:r,index:o}},o.prototype.setCalculator=function(t){this.calculator_=t},o.prototype.getCalculator=function(){return this.calculator_},o.prototype.addMarkers=function(t,e){for(var o,r=0;o=t[r];r++)this.pushMarkerTo_(o);e||this.redraw()},o.prototype.pushMarkerTo_=function(t){if(t.isAdded=!1,t.draggable){var e=this;google.maps.event.addListener(t,"dragend",function(){t.isAdded=!1,e.repaint()})}this.markers_.push(t)},o.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw()},o.prototype.removeMarker_=function(t){var e=-1;if(this.markers_.indexOf)e=this.markers_.indexOf(t);else for(var o,r=0;o=this.markers_[r];r++)if(o==t){e=r;break}return-1!=e&&(t.setMap(null),this.markers_.splice(e,1),!0)},o.prototype.removeMarker=function(t,e){var o=this.removeMarker_(t);return!(e||!o)&&(this.resetViewport(),this.redraw(),!0)},o.prototype.removeMarkers=function(t,e){for(var o,r=!1,i=0;o=t[i];i++){var n=this.removeMarker_(o);r=r||n}if(!e&&r)return this.resetViewport(),this.redraw(),!0},o.prototype.setReady_=function(t){this.ready_||(this.ready_=t,this.createClusters_())},o.prototype.getTotalClusters=function(){return this.clusters_.length},o.prototype.getMap=function(){return this.map_},o.prototype.setMap=function(t){this.map_=t},o.prototype.getGridSize=function(){return this.gridSize_},o.prototype.setGridSize=function(t){this.gridSize_=t},o.prototype.getMinClusterSize=function(){return this.minClusterSize_},o.prototype.setMinClusterSize=function(t){this.minClusterSize_=t},o.prototype.getExtendedBounds=function(t){var e=this.getProjection(),o=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),r=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),i=e.fromLatLngToDivPixel(o);i.x+=this.gridSize_,i.y-=this.gridSize_;var n=e.fromLatLngToDivPixel(r);n.x-=this.gridSize_,n.y+=this.gridSize_;var s=e.fromDivPixelToLatLng(i),a=e.fromDivPixelToLatLng(n);return t.extend(s),t.extend(a),t},o.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},o.prototype.clearMarkers=function(){this.hideAllClusterInfo(),this.resetViewport(!0),this.markers_=[]},o.prototype.resetViewport=function(t){this.hideAllClusterInfo();for(var e,o=0;e=this.clusters_[o];o++)e.remove();for(var r,o=0;r=this.markers_[o];o++)r.isAdded=!1,t&&r.setMap(null);this.clusters_=[]},o.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var e,o=0;e=t[o];o++)e.remove()},0)},o.prototype.redraw=function(){this.createClusters_()},o.prototype.distanceBetweenPoints_=function(t,e){if(!t||!e)return 0;var o=(e.lat()-t.lat())*Math.PI/180,r=(e.lng()-t.lng())*Math.PI/180,i=Math.sin(o/2)*Math.sin(o/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371},o.prototype.addToClosestCluster_=function(t){for(var e,o=4e4,i=null,n=(t.getPosition(),0);e=this.clusters_[n];n++){var s=e.getCenter();if(s){var a=this.distanceBetweenPoints_(s,t.getPosition());a<o&&(o=a,i=e)}}if(i&&i.isMarkerInClusterBounds(t))i.addMarker(t);else{var e=new r(this);e.setShowInfo(this.showInfo),e.addMarker(t),this.clusters_.push(e)}},o.prototype.createClusters_=function(){if(this.ready_)for(var t,e=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),o=this.getExtendedBounds(e),r=0;t=this.markers_[r];r++)!t.isAdded&&this.isMarkerInBounds_(t,o)&&this.addToClosestCluster_(t)},o.prototype.hideAllClusterInfo=function(){for(var t,e=0;t=this.clusters_[e];e++)t.closeAllInfo()},o.prototype.setShowInfo=function(t){this.showInfo=t;for(var e,o=0;e=this.clusters_[o];o++)e.setShowInfo(t),t||e.closeAllInfo()},r.prototype.closeAllInfo=function(){this.clusterIcon_.closeAllInfo()},r.prototype.setShowInfo=function(t){this.clusterIcon_.showInfo=t},r.prototype.isMarkerAlreadyAdded=function(t){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(t);for(var e,o=0;e=this.markers_[o];o++)if(e==t)return!0;return!1},r.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t))return!1;if(this.center_){if(this.averageCenter_){var e=this.markers_.length+1,o=(this.center_.lat()*(e-1)+t.getPosition().lat())/e,r=(this.center_.lng()*(e-1)+t.getPosition().lng())/e;this.center_=new google.maps.LatLng(o,r),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();t.isAdded=!0,this.markers_.push(t);var i=this.markers_.length;if(i<this.minClusterSize_&&t.getMap()!=this.map_&&t.setMap(this.map_),i==this.minClusterSize_)for(var n=0;n<i;n++)this.markers_[n].setMap(null);return i>=this.minClusterSize_&&t.setMap(null),this.updateIcon(),this.infoWindowStr=(this.infoWindowStr?this.infoWindowStr+"<hr>":"")+t.infoWindowStr,!0},r.prototype.getMarkerClusterer=function(){return this.markerClusterer_},r.prototype.getBounds=function(){for(var t,e=new google.maps.LatLngBounds(this.center_,this.center_),o=this.getMarkers(),r=0;t=o[r];r++)e.extend(t.getPosition());return e},r.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},r.prototype.getSize=function(){return this.markers_.length},r.prototype.getMarkers=function(){return this.markers_},r.prototype.getCenter=function(){return this.center_},r.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},r.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},r.prototype.getMap=function(){return this.map_},r.prototype.updateIcon=function(){var t=this.map_.getZoom(),e=this.markerClusterer_.getMaxZoom();if(e&&t>e)for(var o,r=0;o=this.markers_[r];r++)o.setMap(this.map_);else{if(this.markers_.length<this.minClusterSize_)return void this.clusterIcon_.hide();var i=this.markerClusterer_.getStyles().length,n=this.markerClusterer_.getCalculator()(this.markers_,i);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(n),this.clusterIcon_.show()}},i.prototype.triggerClusterClick=function(t){var e=this.cluster_.getMarkerClusterer();google.maps.event.trigger(e,"clusterclick",this.cluster_,t),e.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},i.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var e=this,o=!1;google.maps.event.addDomListener(this.div_,"click",function(t){o||e.triggerClusterClick(t)}),google.maps.event.addDomListener(this.div_,"mousedown",function(){o=!1}),google.maps.event.addDomListener(this.div_,"mousemove",function(){o=!0}),this.infowindow=new google.maps.InfoWindow({content:"<div id='info-window'>"+this.cluster_.infoWindowStr+"</div>"});var r=this.map_,i=this.center_,n=this.infowindow;this.showInfo;google.maps.event.addDomListener(this.div_,"mouseover",function(){e.showInfo&&(n.setPosition(i),n.open(r))})},i.prototype.closeAllInfo=function(){this.infowindow&&this.infowindow.close(this.map_)},i.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return"object"==typeof this.iconAnchor_&&2===this.iconAnchor_.length?(e.x-=this.iconAnchor_[0],e.y-=this.iconAnchor_[1]):(e.x-=parseInt(this.width_/2,10),e.y-=parseInt(this.height_/2,10)),e},i.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},i.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},i.prototype.show=function(){if(this.div_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.style.display=""}this.visible_=!0},i.prototype.remove=function(){this.setMap(null)},i.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},i.prototype.setSums=function(t){this.sums_=t,this.text_=t.text,this.index_=t.index,this.div_&&(this.div_.innerHTML=t.text),this.useStyle()},i.prototype.useStyle=function(){var t=Math.max(0,this.sums_.index-1);t=Math.min(this.styles_.length-1,t);var e=this.styles_[t];this.url_=e.url,this.height_=e.height,this.width_=e.width,this.textColor_=e.textColor,this.anchor_=e.anchor,this.textSize_=e.textSize,this.backgroundPosition_=e.backgroundPosition,this.iconAnchor_=e.iconAnchor},i.prototype.setCenter=function(t){this.center_=t},i.prototype.createCss=function(t){var e=[];e.push("background-image:url("+this.url_+");");var o=this.backgroundPosition_?this.backgroundPosition_:"0 0";e.push("background-position:"+o+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?e.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):"number"==typeof this.anchor_[0]&&this.anchor_[0]<0&&-this.anchor_[0]<this.height_?e.push("height:"+this.height_+"px; line-height:"+(this.height_+this.anchor_[0])+"px;"):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?e.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):e.push("width:"+this.width_+"px; text-align:center;")):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var r=this.textColor_?this.textColor_:"black",i=this.textSize_?this.textSize_:11;return e.push("cursor:pointer; top:"+t.y+"px; left:"+t.x+"px; color:"+r+"; position:absolute; font-size:"+i+"px; font-family:Arial,sans-serif; font-weight:bold"),e.join("")},window.MarkerClusterer=o,o.prototype.addMarker=o.prototype.addMarker,o.prototype.addMarkers=o.prototype.addMarkers,o.prototype.clearMarkers=o.prototype.clearMarkers,o.prototype.fitMapToMarkers=o.prototype.fitMapToMarkers,o.prototype.getCalculator=o.prototype.getCalculator,o.prototype.getGridSize=o.prototype.getGridSize,o.prototype.getExtendedBounds=o.prototype.getExtendedBounds,o.prototype.getMap=o.prototype.getMap,o.prototype.getMarkers=o.prototype.getMarkers,o.prototype.getMaxZoom=o.prototype.getMaxZoom,o.prototype.getStyles=o.prototype.getStyles,o.prototype.getTotalClusters=o.prototype.getTotalClusters,o.prototype.getTotalMarkers=o.prototype.getTotalMarkers,o.prototype.redraw=o.prototype.redraw,o.prototype.removeMarker=o.prototype.removeMarker,o.prototype.removeMarkers=o.prototype.removeMarkers,o.prototype.resetViewport=o.prototype.resetViewport,o.prototype.repaint=o.prototype.repaint,o.prototype.setCalculator=o.prototype.setCalculator,o.prototype.setGridSize=o.prototype.setGridSize,o.prototype.setMaxZoom=o.prototype.setMaxZoom,o.prototype.onAdd=o.prototype.onAdd,o.prototype.draw=o.prototype.draw,o.prototype.hideAllClusterInfo=o.prototype.hideAllClusterInfo,o.prototype.setShowInfo=o.prototype.setShowInfo,r.prototype.getCenter=r.prototype.getCenter,r.prototype.getSize=r.prototype.getSize,r.prototype.getMarkers=r.prototype.getMarkers,r.prototype.closeAllInfo=r.prototype.closeAllInfo,r.prototype.setShowInfo=r.prototype.setShowInfo,i.prototype.onAdd=i.prototype.onAdd,i.prototype.draw=i.prototype.draw,i.prototype.onRemove=i.prototype.onRemove,i.prototype.closeAllInfo=i.prototype.closeAllInfo},aHcY:function(t,e,o){"use strict";var r=o("/oeL"),i=o("a0oU"),n=o("wINU"),s=o("qbdv"),a=o("bm2B"),p=o("GsmQ"),c=o("B2Lq"),h=o("xwLn"),l=o("Z04r");o.d(e,"a",function(){return d});var u=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(n<3?i(s):n>3?i(e,o,s):i(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s},d=function(){function t(){}return t}();d=u([o.i(r.b)({imports:[s.a,a.a,i.a.forRoot({apiKey:"AIzaSyB6EVRDfSAHTAkrx-VmXyKU7Y3qLSuD0Ag"}),c.b,l.f,l.j],declarations:[n.a,h.a,n.b],exports:[n.a,h.a],providers:[p.a],entryComponents:[n.b]})],d)},"aR8+":function(t,e,o){"use strict";var r=o("fc+i"),i=o("/oeL"),n=o("fL27"),s=o("rgUS"),a=(o.n(s),o("wQAS")),p=o("ktAp");o.d(e,"a",function(){return h});var c=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(n<3?i(s):n>3?i(e,o,s):i(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s},h=function(){function t(){}return t}();h=c([o.i(i.b)({declarations:[a.a],imports:[r.a,n.a,p.a],providers:[],bootstrap:[a.a]})],h)},cDNt:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("/oeL"),i=o("Qa4U"),n=o("aR8+");o("p5Ee").a.production&&o.i(r.a)(),o.i(i.a)().bootstrapModule(n.a)},dCN4:function(t,e,o){e=t.exports=o("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},efyd:function(t,e){t.exports='\x3c!--The whole content below can be removed with the new code.--\x3e\n<div style="text-align:center">\n  <h1>\n    Macgregor Maps - Version 2 Beta\n  </h1>\n</div>\n<div mat-app-background>\n  <home-component></home-component>\n  \x3c!-- <input type="text" name="test" [(ngModel)]="test" />\n  <div>{{test}}</div> --\x3e\n</div>\n'},hxJY:function(t,e,o){e=t.exports=o("rP7Y")(!1),e.push([t.i,"*{font-family:Roboto,sans-serif}",""]),t.exports=t.exports.toString()},ktAp:function(t,e,o){"use strict";var r=o("qbdv"),i=o("/oeL"),n=o("bm2B"),s=o("Z04r"),a=o("SAdc"),p=o("+tBu"),c=o("MoUt"),h=o("aHcY"),l=o("b9Zm");o.d(e,"a",function(){return d});var u=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(n<3?i(s):n>3?i(e,o,s):i(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s},d=function(){function t(){}return t}();d=u([o.i(i.b)({imports:[r.a,n.a,s.a,s.b,s.c,s.d,s.e,l.a,s.f,c.a,h.a],declarations:[a.a,p.a,p.a],exports:[r.a,n.a,h.a,a.a,p.a],providers:[],entryComponents:[p.a]})],d)},n7du:function(t,e){function o(t){throw new Error("Cannot find module '"+t+"'.")}o.keys=function(){return[]},o.resolve=o,t.exports=o,o.id="n7du"},p5Ee:function(t,e,o){"use strict";o.d(e,"a",function(){return r});var r={production:!0,app:{mapBase:"https://macgregor.jwapp.xyz/#"},firebase:{apiKey:"AIzaSyCjArW7DreGKLfBes3RXS_-z9B1ICQX5KE",authDomain:"congmap-prod.firebaseapp.com",databaseURL:"https://congmap-prod.firebaseio.com",projectId:"congmap-prod",storageBucket:"congmap-prod.appspot.com",messagingSenderId:"232314776603"}}},tM03:function(t,e,o){"use strict";var r=o("/oeL"),i=o("8k1a");o.d(e,"a",function(){return a});var n=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(n<3?i(s):n>3?i(e,o,s):i(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=function(){function t(t){this.af=t}return t.prototype.getUser=function(){return this.af.authState},t.prototype.isLoggedIn=function(){return null!=this.getUser()},t.prototype.onAuthChange=function(t){this.af.auth.onAuthStateChanged(t)},t.prototype.login=function(t,e){return this.af.auth.signInWithEmailAndPassword(t,e)},t.prototype.logout=function(){return this.af.auth.signOut()},t}();a=n([o.i(r.n)(),s("design:paramtypes",["function"==typeof(p=void 0!==i.a&&i.a)&&p||Object])],a);var p},wINU:function(t,e,o){"use strict";var r=o("/oeL"),i=o("GsmQ"),n=o("Dqrr"),s=(o.n(n),o("p5Ee")),a=o("Z04r");o.d(e,"a",function(){return h}),o.d(e,"b",function(){return l});var p=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(n<3?i(s):n>3?i(e,o,s):i(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=function(){function t(t,e){this.mapService=t,this.dialog=e,this.title="app",this.currentLocation={addObj:{clat:null,clang:null},iconUrl:"/assets/images/ic_my_location_red_24px.svg",pushed:!1},this.points=[],this.centerLat=-27.5518075,this.centerLng=153.0807544,this.zoom=13,this.height="700px",this.maxWaitTries=20,this.maxWaitCtr=0,this.sameCtr=0,this.sameMax=10,this.checkInterval=1e3,this.showInfo=!1,this.onToggleShowInfo=new r.c}return t.prototype.toggleShowInfo=function(){this.showInfo=!this.showInfo,console.log("Emitting: "+this.showInfo),this.onToggleShowInfo.emit(this.showInfo)},t.prototype.loadMaps=function(){var t=this,e=s.a.app.mapBase;this.loadingDialog=this.dialog.open(l,{disableClose:!0}),this.mapService.loadMaps(e);var o=n.Observable.interval(this.checkInterval).subscribe(function(e){t.mapService.mapMarkers.length!=t.curPointsCtr?(t.curPointsCtr=t.mapService.mapMarkers.length,t.sameCtr=0):(t.maxWaitCtr++,t.sameCtr++,(t.maxWaitCtr>t.maxWaitTries||t.sameCtr>t.sameMax)&&(console.log("Got all addresses, rendering..."),console.log("Total no. maps: "+t.mapService.maps.length),console.log("Total no. of addresses: "+t.mapService.mapMarkers.length),t.points=t.mapService.mapMarkers,o.unsubscribe(),t.loadingDialog.close(),t.mapService.trackUpdates=!0))})},t.prototype.showCurrentLoc=function(){var t=this;navigator.geolocation&&navigator.geolocation.watchPosition(function(e){t.currentLocation.addObj.clat=e.coords.latitude,t.currentLocation.addObj.clang=e.coords.longitude,t.currentLocation.pushed||(t.currentLocation.pushed=!0,t.points.push(t.currentLocation))},function(t){console.error(t)})},t.prototype.clearMaps=function(){this.mapService.clearAllMarkers(),this.points=this.mapService.mapMarkers},t.prototype.showMarker=function(){this.clearMaps()},t}();h=p([o.i(r.f)({selector:"map-component",template:o("3CHR"),styles:[o("KJMk")]}),c("design:paramtypes",["function"==typeof(u=void 0!==i.a&&i.a)&&u||Object,"function"==typeof(d=void 0!==a.i&&a.i)&&d||Object])],h);var l=function(){function t(t){this.dialogRef=t}return t}();l=p([o.i(r.f)({selector:"loading-dialog",template:'\n            <div md-dialog-content>\n              <div class="flex-container"\n               fxLayout="column"\n               fxLayout.xs="column"\n               fxLayoutAlign="center center"\n               fxLayoutAlign.xs="start">\n                  <img src="/assets/images/pie-loader.svg">\n               </div>\n            </div>\n            '}),c("design:paramtypes",["function"==typeof(f=void 0!==a.h&&a.h)&&f||Object])],l);var u,d,f},wQAS:function(t,e,o){"use strict";var r=o("/oeL");o.d(e,"a",function(){return n});var i=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(n<3?i(s):n>3?i(e,o,s):i(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s},n=function(){function t(){}return t}();n=i([o.i(r.f)({selector:"app-root",template:o("efyd"),styles:[o("hxJY")]})],n)},xwLn:function(t,e,o){"use strict";var r=o("/oeL"),i=o("a0oU"),n=o("Dqrr"),s=(o.n(n),o("xrDH")),a=(o.n(s),o("Xir+"));o.n(a);o.d(e,"a",function(){return h});var p=this&&this.__decorate||function(t,e,o,r){var i,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(n<3?i(s):n>3?i(e,o,s):i(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=function(){function t(t){this.gmapsApi=t,this.markers=[],this.maxTypeIdx=3,this.maxColorIdx=3,this.markerIcons=[],this.style={url:"/assets/images/place-markers/cluster.png",height:40,width:40,textColor:"#FFF",textSize:11,backgroundPosition:"center center"},this.options={imagePath:"/assets/images/place-markers/cluster",gridSize:20,minimumClusterSize:2,styles:[this.style,this.style,this.style]}}return t.prototype.ngOnInit=function(){var t=this;this.onUpdate.subscribe(function(e){t.clearMarkers(),t.loadPoints()}),this.onSetShowClusterInfo.subscribe(function(e){t.markerCluster.setShowInfo(e)})},t.prototype.ngOnChanges=function(t){this.clearMarkers(),this.points&&this.points.length>0&&this.loadPoints()},t.prototype.loadPoints=function(){var t=this;this.gmapsApi.getNativeMap().then(function(e){if(s.isEmpty(t.markerIcons)){t.scaledMarkerSize=new google.maps.Size(35,35);for(var o=0;o<=t.maxTypeIdx;o++)for(var r=0;r<=t.maxColorIdx;r++){var i="/assets/images/place-markers/pin-"+o+"-"+r+".svg";t.markerIcons.push({scaledSize:t.scaledMarkerSize,url:i})}}n.Observable.interval(500).skipWhile(function(e){return null==t.points||t.points.length<=0}).take(1).subscribe(function(){if(t.points.length>0)for(var o=0,r=t.points;o<r.length;o++){var i=r[o];!function(o){var r=new google.maps.Marker({position:new google.maps.LatLng(o.addObj.clat,o.addObj.clong),icon:t.markerIcons[o.markerIdx%t.markerIcons.length]}),i='<div id="info-window">'+o.infoWindowStr+"</div>";r.infoWindowStr=o.infoWindowStr;var n=new google.maps.InfoWindow({content:i});r.addListener("click",function(){n.open(e,r)}),t.markers.push(r)}(i)}else t.markers=[];t.markerCluster=new MarkerClusterer(e,t.markers,t.options)})})},t.prototype.clearMarkers=function(){this.markerCluster&&(console.log("Clearing markers..."),this.markers=[],this.markerCluster.clearMarkers())},t}();p([o.i(r.e)(),c("design:type",Array)],h.prototype,"points",void 0),p([o.i(r.e)(),c("design:type","function"==typeof(l=void 0!==r.c&&r.c)&&l||Object)],h.prototype,"onUpdate",void 0),p([o.i(r.e)(),c("design:type","function"==typeof(u=void 0!==r.c&&r.c)&&u||Object)],h.prototype,"onSetShowClusterInfo",void 0),h=p([o.i(r.i)({selector:"marker-cluster"}),c("design:paramtypes",["function"==typeof(d=void 0!==i.b&&i.b)&&d||Object])],h);var l,u,d},zgAq:function(t,e){t.exports='<div>\n  <div class="flex-container"\n     fxLayout="row"\n     fxLayout.xs="row"\n     fxLayoutAlign="space-around none"\n     fxLayoutAlign.xs="start">\n     <div *ngIf="user">\n       Welcome {{user.email}} - <a href="#" (click)="logout()">Logout</a>\n     </div>\n     <div *ngIf="!user">\n       Please login\n     </div>\n   </div>\n  <map-component #mapComponent></map-component>\n</div>\n'}},[0]);