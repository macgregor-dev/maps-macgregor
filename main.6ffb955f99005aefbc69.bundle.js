webpackJsonp([1],{"+tBu":function(t,e,n){"use strict";var r=n("/oeL"),o=n("6lRS");n.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},c=function(){function t(t,e){this.dialogRef=t,this.data=e,this.onLogin=new r.EventEmitter}return t.prototype.login=function(t){console.log("Logging in...");var e={email:this.email,password:this.password};this.onLogin.emit(e),this.data.consumer.login(e)},t}();s([n.i(r.Output)(),a("design:type",Object)],c.prototype,"onLogin",void 0),s([n.i(r.Input)(),a("design:type",Object)],c.prototype,"errorMsg",void 0),c=s([n.i(r.Component)({selector:"login-component",template:n("8Vg4"),styles:[n("dCN4")]}),i(1,n.i(r.Inject)(o.c)),a("design:paramtypes",["function"==typeof(u=void 0!==o.d&&o.d)&&u||Object,Object])],c);var u},0:function(t,e,n){t.exports=n("cDNt")},"0+Pn":function(t,e,n){"use strict";var r=n("/oeL"),o=n("bKpL"),s=(n.n(o),n("2LMR")),a=n("HAwn"),i=n("xrDH"),c=(n.n(i),n("PMtK")),u=n.n(c);n.d(e,"a",function(){return m});var p=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(){}return t.prototype.isAdmin=function(){return this.roles&&1==this.roles.admin},t.prototype.isUpdater=function(){return this.roles&&1==this.roles.updater},t.prototype.isFsgAssistant=function(t){return void 0===t&&(t=null),this.roles&&i.isEmpty(t)||i.isNull(t)?1==this.roles.fsgAssist:1==this.roles.fsgAssist&&1==this.roles.fsg[t]},t.prototype.isPublisher=function(){return this.roles&&1==this.roles.publisher},Object.defineProperty(t.prototype,"hasUserInfo",{get:function(){return this.roles&&this.userInfoObj},enumerable:!0,configurable:!0}),t}(),m=function(){function t(t,e){this.af=t,this.db=e,this.roleList=["admin","updater","fsgoverseer","publisher"],this.onCurrentUserInfo=new r.EventEmitter}return t.prototype.getUser=function(){return this.af.auth.currentUser},t.prototype.getUserObs=function(){return this.af.authState},t.prototype.isLoggedIn=function(){return null!=this.getUser()},t.prototype.onAuthChange=function(t){this.af.auth.onAuthStateChanged(t)},t.prototype.login=function(t,e){return this.af.auth.signInWithEmailAndPassword(t,e)},t.prototype.logout=function(){return this.af.auth.signOut()},t.prototype.getUserRole=function(t){return this.db.object("/roles/"+t.userObj.uid).flatMap(function(e){return t.roles=e,o.Observable.of(t)})},t.prototype.getUserInfo=function(t){return this.db.object("/users/"+t.userObj.uid).flatMap(function(e){return t.userInfoObj=e,o.Observable.of(t)})},t.prototype.getAllUserInfo=function(){var t=this;this.currentUser=new l,this.currentUser.userObj=this.getUser(),this.getUserRole(this.currentUser).flatMap(function(e){return t.getUserInfo(t.currentUser)}).subscribe(function(e){t.onCurrentUserInfo.emit(t.currentUser)})},t.prototype.getAllUsersList=function(){var t=this;return this.usersList?o.Observable.of(this.usersList):this.db.list("/users/list").flatMap(function(e){return t.usersList?t.usersList.length=0:t.usersList=[],o.Observable.from(e)}).flatMap(function(e){return t.db.object("/users/"+e.$value).flatMap(function(e){return i.remove(t.usersList,function(t){return t.$key==e.$key}),t.usersList.push(e),o.Observable.of(e)})}).debounceTime(300).flatMap(function(e){return o.Observable.of(t.usersList)})},t.prototype.sendPasswordReset=function(t,e){void 0===e&&(e=null),this.af.auth.sendPasswordResetEmail(t).then(function(){e&&e()})},t.prototype.createUser=function(t,e,n){this.db.object("/users/requests/pending/createUser/"+Date.now()).update({name:t,email:e,role:n})},t.prototype.saveLoc=function(t,e){this.db.object("/log/"+t+"/loc").update({lat:e.position.lat,lng:e.position.lng,date:u()().utcOffset("+10:00").toISOString(!0)})},t.prototype.saveOnlineStat=function(t){this.db.object("/log/"+t.userObj.uid+"/lastSeen").update({name:t.userInfoObj.name,date:u()().utcOffset("+10:00").toISOString(!0)})},t}();p([n.i(r.Output)(),d("design:type",Object)],m.prototype,"onCurrentUserInfo",void 0),m=p([n.i(r.Injectable)(),d("design:paramtypes",["function"==typeof(f=void 0!==s.a&&s.a)&&f||Object,"function"==typeof(h=void 0!==a.a&&a.a)&&h||Object])],m);var f,h},"0lQa":function(t,e){t.exports='<div mat-dialog-content>\n  <form name=\'selectUserForm\'>\n    <mat-card>\n      <mat-card-header>\n        <mat-card-title>\n          <h4>{{data.consumer.userSelectTitle}}</h4>\n        </mat-card-title>\n        <mat-card-subtitle>{{ data.consumer.userSelectDesc }}</mat-card-subtitle>\n      </mat-card-header>\n      <mat-card-content>\n        <tag-input [(ngModel)]="data.consumer.selectedUsers" name="selectUserDlg"\n           [editable]="true" [identifyBy]="\'id\'" [displayBy]="\'name\'"\n            [onlyFromAutocomplete]="true" [placeholder]="data.consumer.placeHolderTxt" [secondaryPlaceholder]="data.consumer.placeHolderTxt">\n           <tag-input-dropdown [appendToBody]="false" [autocompleteItems]=\'data.consumer.userList\' [identifyBy]="\'$key\'" [displayBy]="\'name\'"></tag-input-dropdown>\n        </tag-input>\n      </mat-card-content>\n    </mat-card>\n  </form>\n  <mat-dialog-actions>\n    <button mat-mini-fab (click)="data.consumer.sendResetPassword()"><mat-icon>save</mat-icon></button>\n    <button mat-mini-fab (click)="data.consumer.cancel()"><mat-icon>cancel</mat-icon></button>\n  </mat-dialog-actions>\n  <div>\n    {{data.consumer.errorMsg}}\n  </div>\n</div>\n'},"0o1w":function(t,e,n){"use strict";var r=n("/oeL"),o=n("GsmQ"),s=n("6lRS"),a=n("HGbW"),i=n("0+Pn"),c=n("Dcui"),u=n("PMtK"),p=n.n(u),d=n("xrDH");n.n(d);n.d(e,"a",function(){return h});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},f=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=function(t){function e(e,n,r,o){var s=t.call(this)||this;return s.mapService=r,s.winRef=o,s.loaded=!1,s.hasMaps=!1,s.dialog=e,s.fireAuth=n,o.redirHttps(),s}return l(e,t),e.prototype.load=function(){var t=this;this.showLoadingDialog(),this.mapService.getMetadata().subscribe(function(e){t.metadata=e,t.fireAuth.currentUser.isAdmin()||t.fireAuth.currentUser.isUpdater()?(console.log("Loading current maps..."),t.getAllMapsList()):t.fireAuth.currentUser.isFsgAssistant()?t.getFsgMaps():t.getAllUserMaps(),t.loadPreferences(),t.subs.push(t.fireAuth.getAllUsersList().subscribe(function(t){console.log("User list pre-loaded..")}))})},e.prototype.getOverallCompletion=function(){return this.metadata.mode.campaign?this.metadata.report.campaign.currentCompletion:this.metadata.report.regular.currentCompletion},e.prototype.getMapCount=function(){return this.metadata.mode.campaign?this.metadata.report.campaign.mapCount:this.metadata.report.regular.mapCount},e.prototype.getCompletionReport=function(){return this.metadata.mode.campaign?this.metadata.report.campaign:this.metadata.report.regular},e.prototype.getFsgMaps=function(){d.forOwn(this.fireAuth.currentUser.roles.fsg,function(t,e){})},e.prototype.getAllUserMaps=function(){var t=this;console.log("Getting all user maps..."),this.subs.push(this.mapService.getUserMaps(this.fireAuth.currentUser).subscribe(function(e){console.log("Got all user maps..."),d.forEach(e,function(n,r){if(d.remove(n.maps,function(e){return!e.isUser(t.fireAuth.currentUser)}),0==n.maps.length&&e.length>0&&e.splice(r,1),t.fsgMaps){var o=d.find(t.fsgMaps,function(t){return n.fsgName==t.fsgName});o&&(console.log("Match found:::"),console.log(o),console.log(n),o.metadata=n.metadata,o.maps=n.maps,o.completedMapsCtr=n.completedMapsCtr,o.completionRate=n.completionRate)}}),t.hasMaps=e&&e.length>0,t.fsgMaps||(t.fsgMaps=e),t.hideLoadingDialog()}))},e.prototype.getFsgName=function(t){return"Your Maps"!=t.fsgName?t.fsgName+" "+(this.mapService.fsgHasCompletion(t.fsgName)?"- "+t.getCompletionPercent()+"%":""):t.fsgName},e.prototype.getAllMapsList=function(){var t=this;console.log("Getting all maps..."),this.hasMaps=!0,(this.fireAuth.currentUser.isAdmin()||this.fireAuth.currentUser.isUpdater())&&this.subs.push(this.mapService.getAllFsgMapsList(!0).flatMap(function(e){return d.each(e,function(t){t.computeCompleted()}),t.fsgMaps=e,console.log("All maps:"),console.log(e),t.mapService.getUserMaps(t.fireAuth.currentUser)}).subscribe(function(e){if(t.fsgMaps.length>0&&e.length>0){d.find(t.fsgMaps,function(t){return t.fsgName==e[0].fsgName})||(t.fsgMaps=e.concat(t.fsgMaps))}t.hideLoadingDialog()}))},e.prototype.getMapUsers=function(t){var e="";return d.forEach(t.getUsersList(),function(t){e=""+(d.isEmpty(e)?e:e+", ")+t.name}),e},e.prototype.toggleExpand=function(t,e){t.expanded=e},e.prototype.canOpenMap=function(t){return this.fireAuth.currentUser&&(t.isUser(this.fireAuth.currentUser)||this.fireAuth.currentUser.isAdmin()||this.fireAuth.currentUser.isUpdater())},e.prototype.getCompletionPercentage=function(t){return this.mapService.getCompletionPercentage(t)},e.prototype.getRemaining=function(t){return this.mapService.getRemainingAddresses(t)},e.prototype.isUpdater=function(){return this.fireAuth.currentUser&&(this.fireAuth.currentUser.isAdmin()||this.fireAuth.currentUser.isUpdater())},e.prototype.getBg=function(t,e){var n=p()(),r=p()(t),o=p()().add(3,"days"),s=p()().add(6,"days");return n.isSameOrAfter(r)||n.isBetween(o,r,null,"[]")?"pink":n.isBetween(s,r,null,"[]")?"yellow":"lightgray"},e.prototype.getBgMap=function(t){var e=t.mapObj.doneCtr;return this.isNormalMode()||(e=t.mapObj.campaignCtr),e>0?"lightgray":"white"},e.prototype.isNormalMode=function(){return this.mapService.isNormalMode()},e.prototype.loadPreferences=function(){var t=this;this.fireAuth.getUserInfo(this.fireAuth.currentUser).subscribe(function(e){if(e.userInfoObj.geo){var n=new r.EventEmitter,o=null;n.subscribe(function(e){var n=p()();null!=o&&n.isBefore(o.add(1,"minute"))||(o=n,t.fireAuth.saveLoc(t.fireAuth.currentUser.userObj.uid,e))}),t.mapService.enableGeolocation(n)}t.fireAuth.saveOnlineStat(t.fireAuth.currentUser)})},e}(a.a);h=m([n.i(r.Component)({selector:"mapslist-component",template:n("ivJn"),styles:[n("Z2wb")]}),f("design:paramtypes",["function"==typeof(g=void 0!==s.b&&s.b)&&g||Object,"function"==typeof(b=void 0!==i.a&&i.a)&&b||Object,"function"==typeof(y=void 0!==o.a&&o.a)&&y||Object,"function"==typeof(v=void 0!==c.a&&c.a)&&v||Object])],h);var g,b,y,v},"3CHR":function(t,e){t.exports='<mat-toolbar [ngClass]="\'bgc-blue-grey-900 whiteText marginTopBottom-2\'">\n  <span><h3>{{title}}</h3></span>\n  <span class="fill-remaining-space"></span>\n\n  \x3c!-- <span><button mat-mini-fab (click)="startMap()" *ngIf="currentMap" style="margin-right: 10px;"><mat-icon>play_arrow</mat-icon></button></span> --\x3e\n  <span>\n    <button mat-mini-fab (click)="toggleShowLocation()" style="margin-right: 5px;" >\n      <mat-icon *ngIf="!showLocation">location_disabled</mat-icon>\n      <mat-icon *ngIf="showLocation && !locationSearching">my_location</mat-icon>\n      <mat-icon *ngIf="showLocation && locationSearching">location_searching</mat-icon>\n    </button>\n  </span>\n  <span><button mat-mini-fab (click)="fitMap()" ><mat-icon svgIcon="fit-map"></mat-icon></button></span>\n  <button mat-icon-button [matMenuTriggerFor]="menu" >\n    <mat-icon>more_vert</mat-icon>\n  </button>\n  <mat-menu #menu="matMenu" >\n    <button mat-menu-item (click)="viewList()">\n      <mat-icon>view_list</mat-icon>\n      <span>List View</span>\n    </button>\n    <a href="{{ addUrl }}" target="_blank" mat-menu-item>\n      <mat-icon svgIcon="add-address"></mat-icon>\n      <span>New Address</span>\n    </a>\n    <a mat-menu-item [routerLink]="[\'/home\']" >\n      <mat-icon>home</mat-icon>\n      <span>Home</span></a>\n  </mat-menu>\n</mat-toolbar>\n\x3c!-- <mat-toolbar [ngClass]="\'bgc-yellow-100 marginTopBottom-2\'" *ngIf="isAdmin()">\n  <span><mat-button-toggle style="margin-right: 10px;" (change)="toggleShowInfo($event)"><mat-icon>info</mat-icon></mat-button-toggle></span>\n  <span class="fill-remaining-space"></span>\n</mat-toolbar> --\x3e\n<agm-map [latitude]="centerLat" [longitude]="centerLng" [zoom]="zoom" [ngStyle]="{\'height\': height}">\n  <marker-cluster [onAddLocMarker]="onAddLocMarker" [onFit]="onFit" [minimumClusterSize]="minimumClusterSize" [onAddressClick]="onAddressClick" [onUpdate]="mapService.onUpdate" [onSetShowClusterInfo]="onToggleShowInfo" [points]="points" ></marker-cluster>\n</agm-map>\n'},"4wwY":function(t,e){t.exports='<div style="text-align:center">\n  <h2>\n    {{ appTitle }}\n  </h2>\n</div>\n<div>\n   <mat-toolbar [ngClass]="\'bgc-blue-grey-900 whiteText marginTopBottom-2\'">\n      <userinfo></userinfo>\n      <span class="fill-remaining-space"></span>\n      <span><a style="margin-right: 5px;" mat-mini-fab [routerLink]="[\'/home\']" ><mat-icon >home</mat-icon></a></span>\n      <user-admin></user-admin>\n   </mat-toolbar>\n</div>\n<mat-tab-group >\n  <mat-tab label="Search">\n    <map-search></map-search>\n  </mat-tab>\n  <mat-tab label="Add Data">\n    <mat-radio-group class="radio-group" [(ngModel)]="newDataType" >\n      <mat-radio-button value="fsg" class="radio-button">FSG</mat-radio-button>\n      <mat-radio-button value="map" class="radio-button">Map</mat-radio-button>\n      \x3c!-- <mat-radio-button value="[(ngModel)]="newDataType" address" class="radio-button">Address</mat-radio-button> --\x3e\n    </mat-radio-group>\n    \x3c!-- --\x3e\n    <div *ngIf="newDataType == \'fsg\'" style="padding: 10px;">\n      <mat-form-field >\n        <input matInput placeholder="New FSG name" [(ngModel)]="fsgName">\n      </mat-form-field>\n    </div>\n\n    <div *ngIf="newDataType == \'map\'" style="padding: 10px;">\n      <mat-form-field >\n        <input matInput placeholder="New Map Name" [(ngModel)]="mapName">\n      </mat-form-field>\n      <mat-form-field>\n        <mat-select placeholder="FSG" [(value)]="fsgName">\n            <mat-option *ngFor="let fsg of fsgs" [value]="fsg">\n              {{fsg}}\n            </mat-option>\n        </mat-select>\n      </mat-form-field>\n    </div>\n    <div  style="padding: 10px;">\n      <button mat-raised-button color="primary" *ngIf="newDataType != null" (click)="saveNewData()">Save</button>\n      <div *ngIf="msg">{{ msg }}</div>\n    </div>\n  </mat-tab>\n</mat-tab-group>\n'},"76ka":function(t,e,n){"use strict";var r=n("/oeL"),o=n("0+Pn"),s=n("HGbW"),a=n("xrDH"),i=(n.n(a),n("6lRS")),c=n("p5Ee");n.d(e,"a",function(){return m}),n.d(e,"b",function(){return f}),n.d(e,"c",function(){return h}),n.d(e,"d",function(){return g});var u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},m=function(t){function e(e,n){var r=t.call(this)||this;return r.fireAuth=e,r.dialog=n,r.subs=[],r}return u(e,t),e.prototype.ngOnInit=function(){var t=this;this.user=this.fireAuth.currentUser,this.subs.push(this.fireAuth.onCurrentUserInfo.subscribe(function(e){t.user=t.fireAuth.currentUser})),this.userList||this.subs.push(this.fireAuth.getAllUsersList().subscribe(function(e){t.userList=e}))},e.prototype.isUpdater=function(){return this.user&&(this.user.isAdmin()||this.user.isUpdater())},e.prototype.resetPassword=function(){this.userSelectTitle="User Password Reset",this.userSelectDesc="Type the names of users",this.placeHolderTxt="Publisher name",this.showDlg()},e.prototype.addUser=function(){this.userSelectTitle="Create New User",this.userSelectDesc="Provide new user/publisher details",this.newUser={name:"",email:"",role:"publisher"},this.showUserDlg()},e.prototype.showDlg=function(){this.currentDlg||(this.currentDlg=this.dialog.open(f,{data:{consumer:this},disableClose:!0}))},e.prototype.showUserDlg=function(){this.currentDlg||(this.currentDlg=this.dialog.open(h,{data:{consumer:this},disableClose:!0}))},e.prototype.showVersionDlg=function(){this.currentDlg||(this.currentDlg=this.dialog.open(g,{data:{consumer:this},disableClose:!0}))},e.prototype.getVersions=function(){var t=[];return a.each(c.a.version.list,function(e){t.push({versionNum:e,text:c.a.version.details[e]})}),t},e.prototype.closeDlg=function(){this.dialog.closeAll(),this.currentDlg=null,this.selectedUsers=null},e.prototype.sendResetPassword=function(){var t=this;this.selectedUsers&&this.selectedUsers.length;a.forEach(this.selectedUsers,function(e){e.email?(console.log("Resetting: "),console.log(e),t.fireAuth.sendPasswordReset(e.email)):(console.log("No email:"),console.log(e))}),this.closeDlg()},e.prototype.createUser=function(){this.fireAuth.createUser(this.newUser.name,this.newUser.email,this.newUser.role),this.closeDlg()},e.prototype.cancel=function(){this.closeDlg()},e}(s.a);m=p([n.i(r.Component)({selector:"user-admin",template:n("l1II")}),d("design:paramtypes",["function"==typeof(b=void 0!==o.a&&o.a)&&b||Object,"function"==typeof(y=void 0!==i.b&&i.b)&&y||Object])],m);var f=function(){function t(t,e){this.dialogRef=t,this.data=e}return t}();f=p([n.i(r.Component)({selector:"selectuser-dlg",template:n("0lQa")}),l(1,n.i(r.Inject)(i.c)),d("design:paramtypes",["function"==typeof(v=void 0!==i.d&&i.d)&&v||Object,Object])],f);var h=function(){function t(t,e){this.dialogRef=t,this.data=e}return t}();h=p([n.i(r.Component)({selector:"selectuser-dlg",template:n("Sx8v")}),l(1,n.i(r.Inject)(i.c)),d("design:paramtypes",["function"==typeof(j=void 0!==i.d&&i.d)&&j||Object,Object])],h);var g=function(){function t(t,e){this.dialogRef=t,this.data=e}return t}();g=p([n.i(r.Component)({selector:"version-dlg",template:n("X0pD")}),l(1,n.i(r.Inject)(i.c)),d("design:paramtypes",["function"==typeof(O=void 0!==i.d&&i.d)&&O||Object,Object])],g);var b,y,v,j,O},"8Vg4":function(t,e){t.exports='<div mat-dialog-content>\n  <form name=\'loginFrm\' (submit)=\'login($event)\'>\n    <div class="flex-container"\n       fxLayout="column"\n       fxLayout.xs="column"\n       fxLayoutAlign="center center"\n       fxLayoutAlign.xs="start">\n       <div>\n        <div>\n          <mat-form-field>\n            <label>Email</label>\n            <input matInput type=\'email\' name="email" [(ngModel)]="email" >\n          </mat-form-field>\n        </div>\n        <div>\n          <mat-form-field>\n            <label>Password</label>\n            <input matInput type=\'password\' name="password" [(ngModel)]="password" >\n          </mat-form-field>\n        </div>\n        <mat-dialog-actions>\n          <button mat-button mat-raised-button type=\'submit\' [disabled]="isPending || isMaint" >Login</button>\n        </mat-dialog-actions>\n        <div>\n          {{data.consumer.errorMsg}}\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n'},APxZ:function(t,e){t.exports='<div mat-dialog-content>\n  <form name=\'shareForm\'>\n    <mat-card *ngIf="data.consumer.ownerMode">\n      <mat-card-header>\n        <mat-card-title>\n          <h4>{{data.consumer.ownerCardTitle}}</h4>\n        </mat-card-title>\n        <mat-card-subtitle>{{ data.consumer.ownerCardDesc }}</mat-card-subtitle>\n      </mat-card-header>\n      <mat-card-content>\n        <mat-checkbox [(ngModel)]="data.consumer.isPersonal" name="isPersonal" (click)="data.consumer.togglePersonal()">Personal Territory</mat-checkbox>\n        <tag-input [(ngModel)]="data.consumer.userList" name="ownerDlg"\n           [editable]="true" [identifyBy]="\'id\'" [displayBy]="\'name\'"\n           [maxItems]="1" [onlyFromAutocomplete]="true" [placeholder]="data.consumer.placeHolderTxt" [secondaryPlaceholder]="data.consumer.placeHolderTxt">\n           <tag-input-dropdown [appendToBody]="false" [autocompleteItems]=\'data.consumer.mapUsers\' [identifyBy]="\'$key\'" [displayBy]="\'name\'"></tag-input-dropdown>\n        </tag-input>\n        <mat-form-field>\n          <textarea matInput placeholder="Additional notes" matTextareaAutosize matAutosizeMinRows="1"\n           matAutosizeMaxRows="10" [(ngModel)]="data.consumer.notes" name="notes"></textarea>\n        </mat-form-field>\n        \x3c!-- <mat-form-field>\n           <input type="text" matInput name="selUser" [(ngModel)]="data.consumer.selUser"  [matAutocomplete]="autoPub">\n        </mat-form-field>\n        <mat-autocomplete #autoPub="matAutocomplete" [displayWith]="displayFn">\n           <mat-option *ngFor="let mapUser of data.consumer.mapUsers" [value]="mapUser">\n             {{ mapUser.userInfoObj.name }}\n           </mat-option>\n        </mat-autocomplete> --\x3e\n        \x3c!-- <button mat-mini-fab (click)="data.consumer.done()"><mat-icon>person_add</mat-icon></button> --\x3e\n      </mat-card-content>\n    </mat-card>\n    <mat-card *ngIf="!data.consumer.ownerMode">\n      <mat-card-header>\n        <mat-card-title>\n          <h4>{{data.consumer.shareCardTitle}}</h4>\n        </mat-card-title>\n        <mat-card-subtitle>{{ data.consumer.shareCardDesc }}</mat-card-subtitle>\n      </mat-card-header>\n      <mat-card-content>\n        <tag-input [(ngModel)]="data.consumer.userList" name="ownerDlg"\n           [editable]="true" [identifyBy]="\'id\'" [displayBy]="\'name\'" (onAdd)="data.consumer.onItemAdded($event)" (onRemove)="data.consumer.onItemRemove($event)"\n           [onlyFromAutocomplete]="true" [placeholder]="data.consumer.placeHolderTxt" [secondaryPlaceholder]="data.consumer.placeHolderTxt">\n           <tag-input-dropdown [appendToBody]="false" [autocompleteItems]=\'data.consumer.mapUsers\' [identifyBy]="\'$key\'" [displayBy]="\'name\'"></tag-input-dropdown>\n        </tag-input>\n      </mat-card-content>\n    </mat-card>\n  </form>\n  <mat-dialog-actions>\n    <button mat-mini-fab (click)="data.consumer.done()"><mat-icon>save</mat-icon></button>\n    <button mat-mini-fab (click)="data.consumer.cancel()"><mat-icon>cancel</mat-icon></button>\n  </mat-dialog-actions>\n  <div>\n    {{data.consumer.errorMsg}}\n  </div>\n</div>\n'},CKBp:function(t,e,n){"use strict";var r=n("/oeL"),o=n("GsmQ"),s=n("6lRS"),a=n("HGbW"),i=n("0+Pn"),c=n("Dcui"),u=n("PMtK"),p=n.n(u),d=n("xrDH");n.n(d);n.d(e,"a",function(){return g}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return y});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},f=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},g=function(t){function e(e,n,r,o){var s=t.call(this)||this;return s.mapService=r,s.winRef=o,s.campaignMode=!1,s.mapUsers=[],s.newUsersList=[],s.removeUsersList=[],s.curOwner=null,s.placeHolderTxt="Type and select name",s.ownerCardTitle="Map Owner",s.ownershipPersonalDuration="3 months",s.ownershipDuration="2 weeks",s.ownerCardDesc="An owner can use/share the map within "+s.ownershipDuration+" from the time of assignment. After this time, the map will be removed from the owner's assignment list. Please reassign ownership if needed. A map can only have one owner. Removing an owner, will remove all users.",s.defaultOwnerCardDesc=s.ownerCardDesc,s.ownershipPersonalDesc="Please consult the Service Overseer when assigning personal territories. An owner can use/share the map within "+s.ownershipPersonalDuration+" from the time of assignment. After this time, the map will be removed from the owner's assignment list. Please reassign ownership if needed. A map can only have one owner. Removing an owner, will remove all users.",s.shareCardTitle="Map Users",s.shareCardDesc="A user will have access to the map within the day of the assignment. After this time, the map will be removed from the user's list. Please reshare again if needed.",s.ownerMode=!1,s.dialog=e,s.fireAuth=n,s}return l(e,t),e.prototype.showShareDlg=function(t){var e=this;void 0===t&&(t=!0),this.ownerMode=t,this.subs.push(this.fireAuth.getAllUsersList().subscribe(function(t){e.mapUsers=t,e.isPersonal=e.map.assgnObj.isPersonal,e.notes=e.map.assgnObj.notes,e.ownerMode&&e.map.hasOwner()?(e.curOwner=e.map.getOwner(),e.userList=[e.curOwner]):e.userList=e.map.getUsersList(),e.shareDlg||(e.shareDlg=e.dialog.open(b,{data:{consumer:e},disableClose:!0}))}))},e.prototype.done=function(){this.showLoadingDialog(),this.ownerMode?d.isEmpty(this.userList)?(this.mapService.removeOwner(this.map,this.curOwner,this.notes),this.mapService.removeUsers(this.map,this.map.getUsersList())):(this.isPersonal?this.userList[0].expiry=p()().hour(18).minute(0).second(0).add(3,"months").toDate():this.userList[0].expiry=p()().hour(18).minute(0).second(0).add(16,"days").toDate(),this.mapService.updateOwner(this.map,this.userList[0],this.curOwner,this.isPersonal,this.notes)):d.isEmpty(this.userList)?(console.log("Remove userslist"),console.log(this.removeUsersList),this.mapService.removeUsers(this.map,this.removeUsersList)):(d.forEach(this.newUsersList,function(t){t.expiry=p()().hour(20).minute(0).second(0).add(1,"day").toDate()}),this.mapService.removeUsers(this.map,this.removeUsersList),this.mapService.updateUsers(this.map,this.userList)),this.closeShareDialog(),this.hideLoadingDialog()},e.prototype.cancel=function(){this.closeShareDialog()},e.prototype.closeShareDialog=function(){this.shareDlg.close(),this.shareDlg=null},e.prototype.canAssignOwner=function(){if("Queue"==this.map.mapObj.fsg)return!1;var t=this.map.mapObj.doneCtr;return this.campaignMode&&(t=this.map.mapObj.campaignCtr),!(t>0&&!this.fireAuth.currentUser.isAdmin()&&!this.map.hasOwner())&&(this.fireAuth.currentUser.isAdmin()||this.fireAuth.currentUser.isUpdater())},e.prototype.canShare=function(){return this.map.hasOwner()},e.prototype.canReturn=function(){return this.map.hasOwner()&&this.map.isOwner(this.fireAuth.currentUser)},e.prototype.confirmReturnDlg=function(){this.confirmDlg=this.dialog.open(y,{data:{consumer:this},disableClose:!0})},e.prototype.closeConfirmDlg=function(){this.confirmDlg.close(),this.confirmDlg=null},e.prototype.returnMap=function(){this.fireAuth.currentUser.isAdmin()?(this.mapService.removeUsers(this.map,this.map.getUsersList()),this.mapService.updateUsers(this.map,[]),this.mapService.removeOwner(this.map,this.map.getOwner())):this.map.isOwner(this.fireAuth.currentUser)&&(this.mapService.removeUsers(this.map,this.map.getUsersList()),this.mapService.updateUsers(this.map,[]),this.mapService.removeOwner(this.map,this.map.getOwner())),this.closeConfirmDlg()},e.prototype.onItemAdded=function(t){this.newUsersList.push(t),d.remove(this.removeUsersList,function(e){return e.id==t.id})},e.prototype.onItemRemove=function(t){console.log(t),d.remove(this.newUsersList,function(e){return e.id==t.id}),this.removeUsersList.push(t)},e.prototype.togglePersonal=function(){this.isPersonal?this.ownerCardDesc=this.ownershipPersonalDesc:this.ownerCardDesc=this.defaultOwnerCardDesc},e}(a.a);m([n.i(r.Input)(),f("design:type","function"==typeof(v=void 0!==o.b&&o.b)&&v||Object)],g.prototype,"map",void 0),m([n.i(r.Input)(),f("design:type",Boolean)],g.prototype,"campaignMode",void 0),g=m([n.i(r.Component)({selector:"mapshare",template:n("RvYO")}),f("design:paramtypes",["function"==typeof(j=void 0!==s.b&&s.b)&&j||Object,"function"==typeof(O=void 0!==i.a&&i.a)&&O||Object,"function"==typeof(w=void 0!==o.a&&o.a)&&w||Object,"function"==typeof(_=void 0!==c.a&&c.a)&&_||Object])],g);var b=function(){function t(t,e){this.dialogRef=t,this.data=e}return t.prototype.displayFn=function(t){return t?t.userInfoObj.name:""},t}();b=m([n.i(r.Component)({selector:"share-dlg",template:n("APxZ")}),h(1,n.i(r.Inject)(s.c)),f("design:paramtypes",["function"==typeof(M=void 0!==s.d&&s.d)&&M||Object,Object])],b);var y=function(){function t(t,e){this.dialogRef=t,this.data=e}return t}();y=m([n.i(r.Component)({selector:"share-dlg",template:n("rN+S")}),h(1,n.i(r.Inject)(s.c)),f("design:paramtypes",["function"==typeof(A=void 0!==s.d&&s.d)&&A||Object,Object])],y);var v,j,O,w,_,M,A},Dcui:function(t,e,n){"use strict";var r=n("/oeL");n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},s=function(){function t(){}return Object.defineProperty(t.prototype,"nativeWindow",{get:function(){return window},enumerable:!0,configurable:!0}),t.prototype.redirHttps=function(){var t=this.nativeWindow;if("localhost"!=t.location.hostname&&-1==t.location.hostname.indexOf("10.0.0")&&"https:"!=t.location.protocol){var e="https://"+t.location.hostname+(t.location.port?":"+t.location.port:"")+t.location.pathname+t.location.hash;console.log(e),t.location=e}else console.log("No https redir")},t.prototype.location=function(t){this.nativeWindow.location=t},t}();s=o([n.i(r.Injectable)()],s)},Ep1E:function(t,e){t.exports='<div mat-dialog-content>\n  <mat-card>\n    <mat-card-title *ngIf="data.title">\n      <h4>{{data.title}}</h4>\n    </mat-card-title>\n    <mat-card-subtitle *ngIf="data.subtitle"><div>{{ data.subtitle }}</div></mat-card-subtitle>\n    <mat-card-actions>\n      <div>\n        <br/>\n        <button mat-raised-button color="accent" (click)="data.consumer.confirmNotification()">{{ data.confirmText }}</button>\n      </div>\n    </mat-card-actions>\n  </mat-card>\n</div>\n'},GsmQ:function(t,e,n){"use strict";var r=n("/oeL"),o=n("Dqrr"),s=(n.n(o),n("xrDH")),a=(n.n(s),n("HAwn")),i=n("PMtK"),c=n.n(i);n.d(e,"b",function(){return d}),n.d(e,"a",function(){return f});var u=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e,n){this.id=t,this.mapObj=e,this.assgnObj=n,this.addressCount=s.isEmpty(e.addresses)?0:s.size(e.addresses)}return Object.defineProperty(t.prototype,"isAssigned",{get:function(){return this.assgnObj.$exists()},enumerable:!0,configurable:!0}),t.prototype.hasOwner=function(){return this.assgnObj&&this.assgnObj.$exists()&&!s.isEmpty(this.assgnObj.owner)},Object.defineProperty(t.prototype,"ownerInfo",{get:function(){return this.assgnObj.owner},enumerable:!0,configurable:!0}),t.prototype.getOwner=function(){return this.assgnObj.owner},t.prototype.setOwner=function(t){!s.isFunction(this.assgnObj.$exists)&&this.assgnObj.$exists()||(this.assgnObj={}),this.assgnObj.owner||(this.assgnObj.owner={}),this.assgnObj.owner.id=t.$key,this.assgnObj.owner.name=t.name},t.prototype.getUsersList=function(){var t=[];return s.forOwn(this.assgnObj.users,function(e,n){t.push({name:e.name,id:n,expiry:e.expiry})}),t},t.prototype.hasUsers=function(){return!s.isEmpty(this.getUsersList())},t.prototype.isOwner=function(t){return t.userInfoObj.$key==this.assgnObj.owner.id},t.prototype.isUser=function(t){var e=null!=s.find(this.getUsersList(),function(e){return e.id==t.userInfoObj.$key});return this.hasOwner()&&this.isOwner(t)||this.hasUsers()&&e},t.prototype.getStatus=function(t){return s.get(this.assgnObj,"address."+t)},t.prototype.setStatus=function(t,e){s.isUndefined(this.assgnObj.address)&&(this.assgnObj.address={}),this.assgnObj.address[t]=e},t.prototype.getStatusDetail=function(t){return s.get(this.assgnObj,"det."+t)},t.prototype.setStatusDetail=function(t,e){s.isUndefined(this.assgnObj.det)&&(this.assgnObj.det={}),this.assgnObj.det[t]=e},t.prototype.getAddrStatuses=function(t,e){var n=this,r=[];return t.isAdmin()||t.isUpdater()?r=this.mapObj.search?s.filter(e.addrStatuses,function(t){return 10!=t.val&&4!=t.val&&(3==t.val&&(t.label="Not at Home"),t)}):s.filter(e.addrStatuses,function(t){return 10!=t.val&&t}):e.isNormalMode()?s.forEach(e.addrStatuses,function(t){if(5!=t.val&&7!=t.val){if(n.mapObj.search&&(10==t.val||4==t.val))return!0;if(3==t.val&&n.mapObj.search)t.label="Not at Home";else if(10==t.val)return!0;r.push(t)}}):s.forEach(e.addrStatuses,function(t){4!=t.val&&5!=t.val&&7!=t.val&&10!=t.val&&r.push(t)}),r},t}(),l=function(){function t(t,e,n){void 0===n&&(n=null),this.fsgName=t,this.maps=e,this.completedMapsCtr=0,this.completionRate=0,this.metadata=n}return t.prototype.getCompletionPercent=function(){return this.completionRate},t.prototype.computeCompleted=function(){var t=this;s.each(this.maps,function(e){t.metadata.mode.campaign?e.mapObj.campaignCtr>0&&t.completedMapsCtr++:e.mapObj.doneCtr>0&&t.completedMapsCtr++}),this.completionRate=0==this.completedMapsCtr?0:Math.floor(this.completedMapsCtr/this.maps.length*100)},t}(),m=function(){function t(){}return t}(),f=function(){function t(t){var e=this;this.db=t,this.onUpdate=new r.EventEmitter,this.mapMarkers=[],this.markerIdx=0,this.trackUpdates=!1,this.updatePipe=new o.Subject,this.subs=[],this.fsgs=[],this.addrStatuses=[{val:0,label:"Not Done"},{val:1,label:"Done - Mandarin"},{val:9,label:"Done - Cantonese"},{val:2,label:"Not Chinese"},{val:3,label:"Not at Home - 1"},{val:4,label:"Not at Home - 2"},{val:10,label:"Not at Home - 3"},{val:5,label:"Do Not Call"},{val:7,label:"Phone Witnessing"},{val:8,label:"Reported Issue"}],this.currentActiveMapRoot="/assignedMaps/active/",this.maps=[],this.updatePipe.debounceTime(5e3).subscribe(function(t){e.onUpdate.emit(t)})}return t.prototype.getMetadata=function(){var t=this;return this.metadata?o.Observable.of(this.metadata):this.db.object("/metadata").flatMap(function(e){return t.metadata=e,t.metadata.mode.campaign&&(t.currentActiveMapRoot="/assignedMaps/campaign/"),o.Observable.of(t.metadata)})},t.prototype.triggerUpdate=function(){this.onUpdate.emit({})},t.prototype.loadMapMarkersObs=function(t,e){var n=this,r={};return this.db.object("/maps/"+e).flatMap(function(t){if(t.addresses){if(!n.trackUpdates)return n.maps.push(t),r.mapObj=t,o.Observable.of(t);n.updatePipe.next({})}return o.Observable.of(null)}).filter(function(t){return null!=t}).flatMap(function(t){return n.db.object(""+n.currentActiveMapRoot+e).flatMap(function(e){return console.log("Got assigned maps object..."),r.assgnObj=e,o.Observable.of(t)})}).flatMap(function(t){return n.db.list("/maps/"+e+"/addresses").flatMap(function(t){return o.Observable.from(t)})}).filter(function(t){return null!=t}).flatMap(function(t){return n.db.object("/addresses/"+t.$value)}).filter(function(t){return null!=t}).flatMap(function(t){return r.addresses||(r.addresses=[]),s.remove(r.addresses,function(e){return e.$key==t.$key}),t.addId=t.$key,r.addresses.push(t),o.Observable.of(t)}).flatMap(function(t){return o.Observable.of(r)}).debounce(function(){return o.Observable.interval(1e3)}).flatMap(function(t){var n=new d(e,r.mapObj,r.assgnObj);return s.forEach(r.addresses,function(t){s.forOwn(r.assgnObj.address,function(e,n){n==t.$key&&(t.status=s.toNumber(e))}),(s.isUndefined(t.status)||s.isNull(t.status))&&(t.status=0)}),n.addresses=r.addresses,o.Observable.of(n)})},t.prototype.createStatusMarkerIconConfig=function(t,e){return{scaledSize:t,url:"/assets/images/place-markers/status-"+e+".svg"}},t.prototype.createMarkersWithStatus=function(t){var e=this,n=new google.maps.Size(35,35),r={},o=this.createStatusMarkerIconConfig(n,403);s.forEach(this.addrStatuses,function(t){s.isEmpty(t)&&(t=0),r[t.val]=e.createStatusMarkerIconConfig(n,t.val)}),s.forEach(t.addresses,function(n){var a=null,i=n.$key;e.trackUpdates?a=s.find(e.mapMarkers,function(t){return s.find(t.addId,function(t){return t==i})}):(a=new m,a.addId=[i],a.map=t),n.clat=s.toNumber(n.clat),n.clong=s.toNumber(n.clong);var c=s.find(e.mapMarkers,function(t){return s.isArray(t.addObj)?s.find(t.addObj,function(t){return t.clat==n.clat&&t.clong==n.clong&&t.$key!=i}):t.addObj.clat==n.clat&&t.addObj.clong==n.clong&&t.addObj.$key!=i});if(c){if(!e.trackUpdates){if(s.isArray(c.addObj))c.addObj.push(n);else{var u=[c.addObj];u.push(n),c.addObj=u}a=c,a.addId.push(i)}}else a.addObj=n;a.mapObj=t.mapObj,a.modalMode=!0;var p=o;if(c){if(n.status){p=r[n.status];var d=s.map(c.addObj,function(t){return t.status});s.forEach(d,function(t){switch(t){case 0:case 3:p=r[t]}})}else s.isEmpty(t.assgnObj.started)||(p=r[0]);c.marker=new google.maps.Marker({position:new google.maps.LatLng(n.clat,n.clong),icon:p,label:""+c.addObj.length})}else n.status?p=r[n.status]:s.isEmpty(t.assgnObj.started)||(p=r[0]),a.marker=new google.maps.Marker({position:new google.maps.LatLng(n.clat,n.clong),icon:p}),e.trackUpdates||e.mapMarkers.push(a)})},t.prototype.loadMapMarkers=function(t,e,n){var r=this;void 0===n&&(n=!1),this.subs.push(this.db.object("/maps/"+e).subscribe(function(o){if(o.addresses){r.trackUpdates?r.updatePipe.next({}):r.maps.push(o);var a=r.markerIdx++,i=0;s.forEach(o.addresses,function(c){console.log("/addresses/"+c),r.subs.push(r.db.object("/addresses/"+c).subscribe(function(u){if(s.isEmpty(u.burb))console.log("Address not found: "+c+" in map: "+e);else{i++;var p=null;r.trackUpdates?p=s.find(r.mapMarkers,function(t){return t.addId==c}):(p=new m,p.addId=c),u.clat=s.toNumber(u.clat),u.clong=s.toNumber(u.clong),p.addObj=u,p.mapObj=o,n?p.modalMode=n:(p.url=t+"/maps/detail/"+e,p.infoWindowStr="\n                                          <div>Address: "+(-9!=u.unit?"Unit "+u.unit+",":"")+" "+u.hnum+" "+u.st+", "+u.burb+"</div>\n                                          <div>Map: <a href='"+p.url+"' target='_blank'>"+o.terId+" - "+o.name+"</a></div>\n                                          <div>FSG: "+o.fsg+"</div>\n                                        ",p.markerIdx=a),r.trackUpdates||r.mapMarkers.push(p)}}))})}else console.log("Map not found: "+e)}))},t.prototype.loadAllMapsWithMarkers=function(t){var e=this;this.subs.push(this.db.list("/fsg/list").subscribe(function(n){n.forEach(function(n){e.subs.push(e.db.list("/fsg/"+n.$value).subscribe(function(n){n.forEach(function(n){e.loadMapMarkers(t,n.$value)})}))})}))},t.prototype.clearAllMarkers=function(){s.forEach(this.subs,function(t){t.unsubscribe()}),this.subs.length=0,this.maps.length=0,this.mapMarkers.length=0,this.trackUpdates=!1,this.triggerUpdate()},t.prototype.getAllFsgMaps=function(t){var e=this;return this.fsgs.length=0,this.db.object("/fsg/list").flatMap(function(t){var e=[];return s.forOwn(t,function(t,n){e.push({$key:n,$value:t})}),o.Observable.from(e)}).flatMap(function(n){var r=n.$value;return e.db.object("/fsg/"+r).flatMap(function(e){var n=[];return s.forOwn(e,function(t,e){n.push({$key:e,$value:t})}),n.forEach(function(e){t[e.$value]={fsgName:r,mapKey:e.$key}}),o.Observable.from(n)})})},t.prototype.getAllFsgMapsList=function(t){var e=this;void 0===t&&(t=!1);var n={};return this.getAllFsgMaps(n).flatMap(function(t){return e.db.object("/maps/"+t.$value)}).flatMap(function(t){return n[t.$key].mapObj=t,e.db.object(""+e.currentActiveMapRoot+t.$key).flatMap(function(e){return n[t.$key].assgnObj=e,o.Observable.of(t)})}).flatMap(function(t){return o.Observable.of(n)}).debounce(function(){return o.Observable.interval(1e3)}).flatMap(function(r){return s.forOwn(n,function(t,n){var r=s.find(e.fsgs,function(e){return e.fsgName==t.fsgName});r||(r=new l(t.fsgName,[],e.metadata),e.fsgs.push(r));var o=s.find(r.maps,function(t){return t.id==n});o?(o.mapObj=t.mapObj,o.assgnObj=t.assgnObj):r.maps.push(new d(n,t.mapObj,t.assgnObj))}),t&&s.each(e.fsgs,function(t){var e=s.sortBy(t.maps,[function(t){return t.assgnObj&&t.assgnObj.started?c()(t.assgnObj.started).unix():null},function(t){return t.mapObj&&t.mapObj.lastCompleted?c()(t.mapObj.lastCompleted).unix():0}]);t.maps=e}),o.Observable.of(e.fsgs)})},t.prototype.getUserMaps=function(t){var e=this,n={};return this.db.object(this.getUserMapPath(t.userInfoObj.$key)).flatMap(function(t){if(console.log("Got user maps list..."),e.fsgs=[],t.$exists()){var n=[];return s.forOwn(t,function(t,e){n.push(e)}),o.Observable.from(n)}return o.Observable.of(null)}).flatMap(function(t){return console.log("Got map id...."),e.fsgs.length=0,t?e.db.object("/maps/"+t):o.Observable.of(null)}).flatMap(function(t){return console.log("Got map obj...."),e.fsgs.length=0,t?(s.isEmpty(n[t.$key])&&(n[t.$key]={fsgName:"Your Maps"}),n[t.$key].mapObj=t,e.db.object(""+e.currentActiveMapRoot+t.$key).flatMap(function(e){return n[t.$key].assgnObj=e,o.Observable.of(t)})):o.Observable.of(null)}).flatMap(function(t){return o.Observable.of(n)}).debounce(function(){return o.Observable.interval(1e3)}).flatMap(function(t){var e=[];return s.forOwn(n,function(t,n){var r=s.find(e,function(e){return e.fsgName==t.fsgName});r||(r=new l(t.fsgName,[]),e.push(r)),r.maps.push(new d(n,t.mapObj,t.assgnObj))}),o.Observable.of(e)})},t.prototype.updateLastSaved=function(t,e){},t.prototype.updateOwner=function(t,e,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=null);var a={};t.assgnObj.address&&(a[""+this.currentActiveMapRoot+t.id+"/address"]=t.assgnObj.address),t.assgnObj.users&&(a[""+this.currentActiveMapRoot+t.id+"/users"]=t.assgnObj.users),s.isEmpty(t.assgnObj.started)&&(a[""+this.currentActiveMapRoot+t.id+"/started"]=c()().toDate()),n&&e.id!=n.id&&(a[""+this.currentActiveMapRoot+t.id+"/prevOwner"]=n),s.isNull(o)||(a[""+this.currentActiveMapRoot+t.id+"/notes"]=o),a[""+this.currentActiveMapRoot+t.id+"/owner"]={id:e.id,name:e.name,expiry:e.expiry},a[""+this.currentActiveMapRoot+t.id+"/expiry"]=e.expiry,a[""+this.currentActiveMapRoot+t.id+"/isPersonal"]=r,a[this.getUserMapPath(e.id,t.id)+"/expiry"]=e.expiry,this.db.database.ref().update(a)},t.prototype.updateUsers=function(t,e){var n=this,r={},o={};s.forEach(e,function(e){o[e.id]={name:e.name,expiry:e.expiry},r[n.getUserMapPath(e.id,t.id)+"/expiry"]=e.expiry}),r[""+this.currentActiveMapRoot+t.id+"/users"]=o,console.log(r),this.db.database.ref().update(r)},t.prototype.removeOwner=function(t,e,n){void 0===n&&(n=null);var r={};s.isNull(n)||(r[""+this.currentActiveMapRoot+t.id+"/notes"]=n),r[""+this.currentActiveMapRoot+t.id+"/owner"]=null,r[""+this.currentActiveMapRoot+t.id+"/expiry"]=null,r[""+this.getUserMapPath(e.id,t.id)]=null,r[""+this.currentActiveMapRoot+t.id+"/prevOwner"]=e,this.db.database.ref().update(r)},t.prototype.removeUsers=function(t,e){var n=this,r={};s.forEach(e,function(e){r[""+n.getUserMapPath(e.id,t.id)]=null,r[""+n.currentActiveMapRoot+t.id+"/users/"+e.id]=null}),this.db.database.ref().update(r)},t.prototype.updateAddrStat=function(t,e,n,r,o){void 0===o&&(o=null);var s={},a={};s[""+this.currentActiveMapRoot+t+"/address/"+e]=n,3!=n&&4!=n||(a.nh_when=c()().toDate(),a.nh_by=r.userInfoObj.name,s[""+this.currentActiveMapRoot+t+"/det/"+e+"/nh_when"]=a.nh_when,s[""+this.currentActiveMapRoot+t+"/det/"+e+"/nh_by"]=a.nh_by),s[""+this.currentActiveMapRoot+t+"/lastSaved"]={id:r.userObj.uid,name:r.userInfoObj.name,when:c()().toDate()},this.db.database.ref().update(s).then(function(){o&&o(e,n,a)})},t.prototype.updateAddrStats=function(t,e,n){var r=this;void 0===n&&(n=null);var o={},a=t.mapObj;s.each(t.addresses,function(t){var n={},s=a.$key,i=t.addId,u=t.status;o[""+r.currentActiveMapRoot+s+"/address/"+i]=u,3!=u&&4!=u||(n.nh_when=c()().toDate(),n.nh_by=e.userInfoObj.name,o[""+r.currentActiveMapRoot+s+"/det/"+i+"/nh_when"]=n.nh_when,o[""+r.currentActiveMapRoot+s+"/det/"+i+"/nh_by"]=n.nh_by),o[""+r.currentActiveMapRoot+s+"/lastSaved"]={id:e.userObj.uid,name:e.userInfoObj.name,when:c()().toDate()}}),this.db.database.ref().update(o).then(function(){n&&n(a)})},t.prototype.getCompletionPercentage=function(t){return t.mapObj.addresses&&t.assgnObj&&!s.isUndefined(t.assgnObj.address)?Math.round(this.getVisitedAddresses(t)/t.addressCount*100):0},t.prototype.getVisitedAddresses=function(t){var e=0;return t.mapObj.addresses&&t.assgnObj&&!s.isUndefined(t.assgnObj.address)?(s.forOwn(t.mapObj.addresses,function(n,r){if(!s.isUndefined(t.assgnObj.address[n])){switch(s.toNumber(t.assgnObj.address[n])){case 1:case 2:case 5:case 7:case 8:case 9:case 10:e++;break;case 4:t.mapObj.search||e++}}}),e):0},t.prototype.getRemainingAddresses=function(t){return t.addressCount-this.getVisitedAddresses(t)},t.prototype.getUserMapPath=function(t,e){return void 0===e&&(e=null),this.metadata.mode.campaign?"/users/"+t+"/campaign"+(s.isNull(e)?"":"/"+e):"/users/"+t+"/maps"+(s.isNull(e)?"":"/"+e)},t.prototype.getMapsUserUri=function(){return this.metadata.mode.campaign?"campaignUsers":"users"},t.prototype.isNormalMode=function(){return!this.metadata.mode.campaign},t.prototype.enableGeolocation=function(t){navigator.geolocation&&(this.locationWatch=navigator.geolocation.watchPosition(function(e){t.emit({position:{lat:e.coords.latitude,lng:e.coords.longitude}})},function(t){console.error(t)}))},t.prototype.disableGeolocation=function(t){navigator.geolocation&&(navigator.geolocation.clearWatch(this.locationWatch),t.emit(null))},t.prototype.findByTerm=function(t,e,n,r){},t.prototype.fsgHasCompletion=function(t){return"Search"!=t&&"Queue"!=t},t.prototype.addNewFsg=function(t,e){var n={};n["/fsg/list/"+t]=t,n["/fsg/"+t]=0,this.db.database.ref().update(n).then(function(){e&&e()})},t.prototype.addNewMap=function(t,e,n,r){var o={},a=this.metadata.ids.terId;o["/maps/"+a]={name:e,lname:s.toLower(e),fsg:t,terId:a},o["/fsg/"+t+"/"+a]=a,o["/metadata/ids/terId"]=a+1,this.db.database.ref().update(o).then(function(){r&&r()})},t}();u([n.i(r.Output)(),p("design:type",Object)],f.prototype,"onUpdate",void 0),f=u([n.i(r.Injectable)(),p("design:paramtypes",["function"==typeof(h=void 0!==a.a&&a.a)&&h||Object])],f);var h},HGbW:function(t,e,n){"use strict";var r=n("hoZb"),o=n("xrDH"),s=(n.n(o),n("+tBu"));n.d(e,"a",function(){return a});var a=function(){function t(){this.subs=[]}return t.prototype.showLoadingDialog=function(){this.loadingDialog=this.dialog.open(r.a,{disableClose:!0})},t.prototype.hideLoadingDialog=function(){this.loadingDialog&&(this.loadingDialog.close(),this.loadingDialog=null)},t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){this.unsubscribeAll()},t.prototype.unsubscribeAll=function(){o.forEach(this.subs,function(t){t.unsubscribe()})},t.prototype.requireLogin=function(){var t=this;this.subs.push(this.fireAuth.getUserObs().subscribe(function(e){e?(t.loginDiag&&t.loginDiag.close(),t.fireAuth.currentUser?t.postLoginSetup():(t.fireAuth.getAllUserInfo(),t.subs.push(t.fireAuth.onCurrentUserInfo.subscribe(function(e){t.postLoginSetup()})))):t.loginDiag=t.dialog.open(s.a,{data:{consumer:t},disableClose:!0})}))},t.prototype.postLoginSetup=function(){console.log("BaseComponent post login, doing nothing.")},t.prototype.login=function(t){var e=this;this.errorMsg="",console.log("BaseComponent logging in: "),console.log(t),this.showLoadingDialog(),this.fireAuth.login(t.email,t.password).then(function(t){e.hideLoadingDialog()}).catch(function(t){e.hideLoadingDialog(),console.log(t);var n=t.message;e.errorMsg=n})},t.prototype.logout=function(){this.fireAuth.logout()},t}()},HbVw:function(t,e,n){"use strict";var r=n("fc+i"),o=n("/oeL"),s=n("bm2B"),a=n("13je"),i=n("HAwn"),c=n("2LMR"),u=n("p5Ee"),p=n("0+Pn"),d=n("mPw8"),l=n("6lRS"),m=n("76ka"),f=n("cn2Z");n.n(f);n.d(e,"a",function(){return g});var h=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},g=function(){function t(){}return t}();g=h([n.i(o.NgModule)({imports:[r.a,s.FormsModule,a.b.initializeApp(u.a.firebase),i.b,c.b,f.TagInputModule,l.u,l.h,l.f,l.n,l.i],exports:[d.a,m.a,m.b,m.c,m.d],declarations:[d.a,m.a,m.b,m.c,m.d],bootstrap:[],providers:[p.a],entryComponents:[m.b,m.c,m.d]})],g)},Iqat:function(t,e,n){"use strict";var r=n("/oeL"),o=n("BkNc"),s=n("SAdc"),a=n("wINU"),i=n("eb9A");n.d(e,"a",function(){return p});var c=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},u=[{path:"",pathMatch:"full",redirectTo:"home"},{path:"home",component:s.a},{path:"map/:id",component:a.a},{path:"mapadmin",component:i.a}],p=function(){function t(){}return t}();p=c([n.i(r.NgModule)({imports:[o.a.forRoot(u)],exports:[o.a]})],p);s.a,a.a,i.a},KJMk:function(t,e,n){e=t.exports=n("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},MnZv:function(t,e,n){e=t.exports=n("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},QAd7:function(t,e,n){"use strict";var r=n("/oeL"),o=n("HGbW");n.d(e,"a",function(){return i});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e}(o.a);i=a([n.i(r.Component)({selector:"map-search",template:n("mwJv")})],i)},RvYO:function(t,e){t.exports='<button mat-mini-fab (click)="showShareDlg(true)" *ngIf="canAssignOwner()"><mat-icon>assignment_ind</mat-icon></button>\n<button mat-mini-fab (click)="showShareDlg(false)" *ngIf="canShare()"><mat-icon>share</mat-icon></button>\n<button mat-mini-fab (click)="confirmReturnDlg()" *ngIf="canReturn()"><mat-icon>assignment_return</mat-icon></button>\n'},SAdc:function(t,e,n){"use strict";var r=n("/oeL"),o=n("0+Pn"),s=n("6lRS"),a=n("0o1w"),i=n("HGbW"),c=n("fc+i"),u=n("p5Ee");n.d(e,"a",function(){return f}),n.d(e,"b",function(){return h});var p=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},m=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},f=function(t){function e(e,n,r,o){var s=t.call(this)||this;return s.appTitle=u.a.app.title+" "+u.a.version.current,s.dialog=n,s.fireAuth=e,s.errorMsg=s.fireAuth.currentUser?"":"Please login.",s.requireLogin(),r.addSvgIcon("add-address",o.bypassSecurityTrustResourceUrl("/assets/images/add_address.svg")),s}return p(e,t),e.prototype.postLoginSetup=function(){console.log("Home Component Post Login");var t=this.fireAuth.currentUser&&this.fireAuth.currentUser.userInfoObj?this.fireAuth.currentUser.userInfoObj.name:"";this.addUrl="https://docs.google.com/forms/d/e/1FAIpQLScYHfYNwnSIWAL9RAH3rEPC74WfkFT0FgcvaJKx1nAIROXS6A/viewform?usp=pp_url&entry.1810388592=Yes&entry.1189370340=&entry.45257833&entry.681741514=&entry.1482719893=&entry.1683213160=%E6%98%AF&entry.293956968=&entry.602343366&entry.2071713990=&entry.138422963=&entry.1018422546&entry.2060338072&entry.1052547294&entry.365006055&entry.1323592748=&entry.1534052334="+t+"&entry.1011916189&entry.1303192619&entry.825337910&entry.1931492709&entry.2023645450=&entry.913416032="+t,this.mapListComp.load()},e.prototype.canViewAllMaps=function(){return this.fireAuth.currentUser&&(this.fireAuth.currentUser.isAdmin()||this.fireAuth.currentUser.isUpdater())},e}(i.a);d([n.i(r.ViewChild)("myMapsList"),l("design:type","function"==typeof(g=void 0!==a.a&&a.a)&&g||Object)],f.prototype,"mapListComp",void 0),f=d([n.i(r.Component)({selector:"home-component",template:n("zgAq"),styles:[n("MnZv")]}),l("design:paramtypes",["function"==typeof(b=void 0!==o.a&&o.a)&&b||Object,"function"==typeof(y=void 0!==s.b&&s.b)&&y||Object,"function"==typeof(v=void 0!==s.e&&s.e)&&v||Object,"function"==typeof(j=void 0!==c.d&&c.d)&&j||Object])],f);var h=function(){function t(t,e){this.dialogRef=t,this.data=e}return t}();h=d([n.i(r.Component)({selector:"notify-dlg",template:n("Ep1E")}),m(1,n.i(r.Inject)(s.c)),l("design:paramtypes",["function"==typeof(O=void 0!==s.d&&s.d)&&O||Object,Object])],h);var g,b,y,v,j,O},SicF:function(t,e){t.exports='<span *ngIf="user && user.userObj"><h3>{{user?.userInfoObj?.name}}</h3></span>\n'},Sx8v:function(t,e){t.exports='<div mat-dialog-content>\n  <form name=\'createUserForm\'>\n    <mat-card>\n      <mat-card-header>\n        <mat-card-title>\n          <h4>{{data.consumer.userSelectTitle}}</h4>\n        </mat-card-title>\n        <mat-card-subtitle>{{ data.consumer.userSelectDesc }}</mat-card-subtitle>\n      </mat-card-header>\n      <mat-card-content>\n        <mat-form-field>\n          <label>Name</label>\n          <input matInput type=\'text\' name="text" [(ngModel)]="data.consumer.newUser.name" >\n        </mat-form-field>\n        <mat-form-field>\n          <label>Email</label>\n          <input matInput type=\'email\' name="email" [(ngModel)]="data.consumer.newUser.email" >\n        </mat-form-field>\n      </mat-card-content>\n    </mat-card>\n  </form>\n  <mat-dialog-actions>\n    <button mat-mini-fab (click)="data.consumer.createUser()"><mat-icon>save</mat-icon></button>\n    <button mat-mini-fab (click)="data.consumer.cancel()"><mat-icon>cancel</mat-icon></button>\n  </mat-dialog-actions>\n  <div>\n    {{data.consumer.errorMsg}}\n  </div>\n</div>\n'},X0pD:function(t,e){t.exports='<mat-dialog-content>\n    <mat-card>\n      <mat-card-header>\n        <mat-card-title>\n          <h3>Version Release Notes</h3>\n        </mat-card-title>\n      </mat-card-header>\n      <mat-card-content style="height:400px; overflow-y: auto">\n        <mat-list>\n          <mat-list-item *ngFor="let version of data.consumer.getVersions()">\n            <h4 matLine> {{ version.versionNum }}</h4>\n            <p matLine> {{ version.text }} </p>\n          </mat-list-item>\n        </mat-list>\n      </mat-card-content>\n    </mat-card>\n</mat-dialog-content>\n<mat-dialog-actions>\n  <button mat-mini-fab (click)="data.consumer.cancel()"><mat-icon>cancel</mat-icon></button>\n  <div>\n    {{data.consumer.errorMsg}}\n  </div>\n</mat-dialog-actions>\n'},"Xir+":function(t,e){/**
 * @license
 * Copyright 2010 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function n(t,e,r){this.extend(n,google.maps.OverlayView),this.map_=t,this.showInfo=!1,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var o=r||{};this.gridSize_=o.gridSize||60,this.minClusterSize_=o.minimumClusterSize||2,this.maxZoom_=o.maxZoom||null,this.styles_=o.styles||[],this.imagePath_=o.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=o.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,void 0!=o.zoomOnClick&&(this.zoomOnClick_=o.zoomOnClick),this.averageCenter_=!1,void 0!=o.averageCenter&&(this.averageCenter_=o.averageCenter),this.setupStyles_(),this.setMap(t),this.prevZoom_=this.map_.getZoom();var s=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var t=s.map_.getZoom();s.prevZoom_!=t&&(s.prevZoom_=t,s.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){s.redraw()}),e&&e.length&&this.addMarkers(e,!1)}function r(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinClusterSize(),this.averageCenter_=t.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new o(this,t.getStyles(),t.getGridSize()),this.infoWindowStr=null}function o(t,e,n,r){t.getMarkerClusterer().extend(o,google.maps.OverlayView),this.styles_=e,this.padding_=n||0,this.cluster_=t,this.center_=null,this.map_=t.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.infowindow=null,this.showInfo=r,this.setMap(this.map_)}n.prototype.MARKER_CLUSTER_IMAGE_PATH_="../images/m",n.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",n.prototype.extend=function(t,e){return function(t){for(var e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},n.prototype.onAdd=function(){this.setReady_(!0)},n.prototype.draw=function(){},n.prototype.setupStyles_=function(){if(!this.styles_.length)for(var t,e=0;t=this.sizes[e];e++)this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})},n.prototype.fitMapToMarkers=function(){for(var t,e=this.getMarkers(),n=new google.maps.LatLngBounds,r=0;t=e[r];r++)n.extend(t.getPosition());this.map_.fitBounds(n)},n.prototype.setStyles=function(t){this.styles_=t},n.prototype.getStyles=function(){return this.styles_},n.prototype.isZoomOnClick=function(){return this.zoomOnClick_},n.prototype.isAverageCenter=function(){return this.averageCenter_},n.prototype.getMarkers=function(){return this.markers_},n.prototype.getTotalMarkers=function(){return this.markers_.length},n.prototype.setMaxZoom=function(t){this.maxZoom_=t},n.prototype.getMaxZoom=function(){return this.maxZoom_},n.prototype.calculator_=function(t,e){for(var n=0,r=t.length,o=r;0!==o;)o=parseInt(o/10,10),n++;return n=Math.min(n,e),{text:r,index:n}},n.prototype.setCalculator=function(t){this.calculator_=t},n.prototype.getCalculator=function(){return this.calculator_},n.prototype.addMarkers=function(t,e){for(var n,r=0;n=t[r];r++)this.pushMarkerTo_(n);e||this.redraw()},n.prototype.pushMarkerTo_=function(t){if(t.isAdded=!1,t.draggable){var e=this;google.maps.event.addListener(t,"dragend",function(){t.isAdded=!1,e.repaint()})}this.markers_.push(t)},n.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw()},n.prototype.removeMarker_=function(t){var e=-1;if(this.markers_.indexOf)e=this.markers_.indexOf(t);else for(var n,r=0;n=this.markers_[r];r++)if(n==t){e=r;break}return-1!=e&&(t.setMap(null),this.markers_.splice(e,1),!0)},n.prototype.removeMarker=function(t,e){var n=this.removeMarker_(t);return!(e||!n)&&(this.resetViewport(),this.redraw(),!0)},n.prototype.removeMarkers=function(t,e){for(var n,r=!1,o=0;n=t[o];o++){var s=this.removeMarker_(n);r=r||s}if(!e&&r)return this.resetViewport(),this.redraw(),!0},n.prototype.setReady_=function(t){this.ready_||(this.ready_=t,this.createClusters_())},n.prototype.getTotalClusters=function(){return this.clusters_.length},n.prototype.getMap=function(){return this.map_},n.prototype.setMap=function(t){this.map_=t},n.prototype.getGridSize=function(){return this.gridSize_},n.prototype.setGridSize=function(t){this.gridSize_=t},n.prototype.getMinClusterSize=function(){return this.minClusterSize_},n.prototype.setMinClusterSize=function(t){this.minClusterSize_=t},n.prototype.getExtendedBounds=function(t){var e=this.getProjection(),n=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),r=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),o=e.fromLatLngToDivPixel(n);o.x+=this.gridSize_,o.y-=this.gridSize_;var s=e.fromLatLngToDivPixel(r);s.x-=this.gridSize_,s.y+=this.gridSize_;var a=e.fromDivPixelToLatLng(o),i=e.fromDivPixelToLatLng(s);return t.extend(a),t.extend(i),t},n.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},n.prototype.clearMarkers=function(){this.hideAllClusterInfo(),this.resetViewport(!0),this.markers_=[]},n.prototype.resetViewport=function(t){this.hideAllClusterInfo();for(var e,n=0;e=this.clusters_[n];n++)e.remove();for(var r,n=0;r=this.markers_[n];n++)r.isAdded=!1,t&&r.setMap(null);this.clusters_=[]},n.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var e,n=0;e=t[n];n++)e.remove()},0)},n.prototype.redraw=function(){this.createClusters_()},n.prototype.distanceBetweenPoints_=function(t,e){if(!t||!e)return 0;var n=(e.lat()-t.lat())*Math.PI/180,r=(e.lng()-t.lng())*Math.PI/180,o=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*6371},n.prototype.addToClosestCluster_=function(t){for(var e,n=4e4,o=null,s=(t.getPosition(),0);e=this.clusters_[s];s++){var a=e.getCenter();if(a){var i=this.distanceBetweenPoints_(a,t.getPosition());i<n&&(n=i,o=e)}}if(o&&o.isMarkerInClusterBounds(t))o.addMarker(t);else{var e=new r(this);e.setShowInfo(this.showInfo),e.addMarker(t),this.clusters_.push(e)}},n.prototype.createClusters_=function(){if(this.ready_)for(var t,e=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),n=this.getExtendedBounds(e),r=0;t=this.markers_[r];r++)!t.isAdded&&this.isMarkerInBounds_(t,n)&&this.addToClosestCluster_(t)},n.prototype.hideAllClusterInfo=function(){for(var t,e=0;t=this.clusters_[e];e++)t.closeAllInfo()},n.prototype.setShowInfo=function(t){this.showInfo=t;for(var e,n=0;e=this.clusters_[n];n++)e.setShowInfo(t),t||e.closeAllInfo()},r.prototype.closeAllInfo=function(){this.clusterIcon_.closeAllInfo()},r.prototype.setShowInfo=function(t){this.clusterIcon_.showInfo=t},r.prototype.isMarkerAlreadyAdded=function(t){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(t);for(var e,n=0;e=this.markers_[n];n++)if(e==t)return!0;return!1},r.prototype.addMarker=function(t){if(this.isMarkerAlreadyAdded(t))return!1;if(this.center_){if(this.averageCenter_){var e=this.markers_.length+1,n=(this.center_.lat()*(e-1)+t.getPosition().lat())/e,r=(this.center_.lng()*(e-1)+t.getPosition().lng())/e;this.center_=new google.maps.LatLng(n,r),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();t.isAdded=!0,this.markers_.push(t);var o=this.markers_.length;if(o<this.minClusterSize_&&t.getMap()!=this.map_&&t.setMap(this.map_),o==this.minClusterSize_)for(var s=0;s<o;s++)this.markers_[s].setMap(null);return o>=this.minClusterSize_&&t.setMap(null),this.updateIcon(),this.infoWindowStr=(this.infoWindowStr?this.infoWindowStr+"<hr>":"")+t.infoWindowStr,!0},r.prototype.getMarkerClusterer=function(){return this.markerClusterer_},r.prototype.getBounds=function(){for(var t,e=new google.maps.LatLngBounds(this.center_,this.center_),n=this.getMarkers(),r=0;t=n[r];r++)e.extend(t.getPosition());return e},r.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},r.prototype.getSize=function(){return this.markers_.length},r.prototype.getMarkers=function(){return this.markers_},r.prototype.getCenter=function(){return this.center_},r.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},r.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},r.prototype.getMap=function(){return this.map_},r.prototype.updateIcon=function(){var t=this.map_.getZoom(),e=this.markerClusterer_.getMaxZoom();if(e&&t>e)for(var n,r=0;n=this.markers_[r];r++)n.setMap(this.map_);else{if(this.markers_.length<this.minClusterSize_)return void this.clusterIcon_.hide();var o=this.markerClusterer_.getStyles().length,s=this.markerClusterer_.getCalculator()(this.markers_,o);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(s),this.clusterIcon_.show()}},o.prototype.triggerClusterClick=function(t){var e=this.cluster_.getMarkerClusterer();google.maps.event.trigger(e,"clusterclick",this.cluster_,t),e.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},o.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var e=this,n=!1;google.maps.event.addDomListener(this.div_,"click",function(t){n||e.triggerClusterClick(t)}),google.maps.event.addDomListener(this.div_,"mousedown",function(){n=!1}),google.maps.event.addDomListener(this.div_,"mousemove",function(){n=!0}),this.infowindow=new google.maps.InfoWindow({content:"<div id='info-window'>"+this.cluster_.infoWindowStr+"</div>"});var r=this.map_,o=this.center_,s=this.infowindow;this.showInfo;google.maps.event.addDomListener(this.div_,"mouseover",function(){e.showInfo&&(s.setPosition(o),s.open(r))})},o.prototype.closeAllInfo=function(){this.infowindow&&this.infowindow.close(this.map_)},o.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return"object"==typeof this.iconAnchor_&&2===this.iconAnchor_.length?(e.x-=this.iconAnchor_[0],e.y-=this.iconAnchor_[1]):(e.x-=parseInt(this.width_/2,10),e.y-=parseInt(this.height_/2,10)),e},o.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},o.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},o.prototype.show=function(){if(this.div_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(t),this.div_.style.display=""}this.visible_=!0},o.prototype.remove=function(){this.setMap(null)},o.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},o.prototype.setSums=function(t){this.sums_=t,this.text_=t.text,this.index_=t.index,this.div_&&(this.div_.innerHTML=t.text),this.useStyle()},o.prototype.useStyle=function(){var t=Math.max(0,this.sums_.index-1);t=Math.min(this.styles_.length-1,t);var e=this.styles_[t];this.url_=e.url,this.height_=e.height,this.width_=e.width,this.textColor_=e.textColor,this.anchor_=e.anchor,this.textSize_=e.textSize,this.backgroundPosition_=e.backgroundPosition,this.iconAnchor_=e.iconAnchor},o.prototype.setCenter=function(t){this.center_=t},o.prototype.createCss=function(t){var e=[];e.push("background-image:url("+this.url_+");");var n=this.backgroundPosition_?this.backgroundPosition_:"0 0";e.push("background-position:"+n+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?e.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):"number"==typeof this.anchor_[0]&&this.anchor_[0]<0&&-this.anchor_[0]<this.height_?e.push("height:"+this.height_+"px; line-height:"+(this.height_+this.anchor_[0])+"px;"):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?e.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):e.push("width:"+this.width_+"px; text-align:center;")):e.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var r=this.textColor_?this.textColor_:"black",o=this.textSize_?this.textSize_:11;return e.push("cursor:pointer; top:"+t.y+"px; left:"+t.x+"px; color:"+r+"; position:absolute; font-size:"+o+"px; font-family:Arial,sans-serif; font-weight:bold"),e.join("")},window.MarkerClusterer=n,n.prototype.addMarker=n.prototype.addMarker,n.prototype.addMarkers=n.prototype.addMarkers,n.prototype.clearMarkers=n.prototype.clearMarkers,n.prototype.fitMapToMarkers=n.prototype.fitMapToMarkers,n.prototype.getCalculator=n.prototype.getCalculator,n.prototype.getGridSize=n.prototype.getGridSize,n.prototype.getExtendedBounds=n.prototype.getExtendedBounds,n.prototype.getMap=n.prototype.getMap,n.prototype.getMarkers=n.prototype.getMarkers,n.prototype.getMaxZoom=n.prototype.getMaxZoom,n.prototype.getStyles=n.prototype.getStyles,n.prototype.getTotalClusters=n.prototype.getTotalClusters,n.prototype.getTotalMarkers=n.prototype.getTotalMarkers,n.prototype.redraw=n.prototype.redraw,n.prototype.removeMarker=n.prototype.removeMarker,n.prototype.removeMarkers=n.prototype.removeMarkers,n.prototype.resetViewport=n.prototype.resetViewport,n.prototype.repaint=n.prototype.repaint,n.prototype.setCalculator=n.prototype.setCalculator,n.prototype.setGridSize=n.prototype.setGridSize,n.prototype.setMaxZoom=n.prototype.setMaxZoom,n.prototype.onAdd=n.prototype.onAdd,n.prototype.draw=n.prototype.draw,n.prototype.hideAllClusterInfo=n.prototype.hideAllClusterInfo,n.prototype.setShowInfo=n.prototype.setShowInfo,r.prototype.getCenter=r.prototype.getCenter,r.prototype.getSize=r.prototype.getSize,r.prototype.getMarkers=r.prototype.getMarkers,r.prototype.closeAllInfo=r.prototype.closeAllInfo,r.prototype.setShowInfo=r.prototype.setShowInfo,o.prototype.onAdd=o.prototype.onAdd,o.prototype.draw=o.prototype.draw,o.prototype.onRemove=o.prototype.onRemove,o.prototype.closeAllInfo=o.prototype.closeAllInfo},"Z/XM":function(t,e){t.exports='<form name=\'addrForm\'>\n  <div mat-dialog-content>\n    <div flex="" layout="row" layout-align="center center" style="margin-top:5px;">\n      <button *ngIf="data.consumer.currentGmapUrl && data.consumer.mapStarted" mat-fab (click)="data.consumer.saveStatus()" style="margin-right:5px;"><mat-icon>save</mat-icon></button>\n      <a *ngIf="data.consumer.currentGmapUrl" target="_blank" href="{{ data.consumer.currentGmapUrl }}" mat-fab style="margin-right:5px;"><mat-icon svgIcon="google-map"></mat-icon></a>\n      <a *ngIf="!data.consumer.hasMultiAdds()" href="{{ data.consumer.currentFeedbackUrl }}" target="_blank" mat-fab style="margin-right:5px;"><mat-icon svgIcon="edit-address"></mat-icon></a>\n      <button mat-fab (click)="data.consumer.cancelAddrDlg()"><mat-icon>cancel</mat-icon></button>\n    </div>\n    <mat-card *ngIf="data.consumer.mapStarted">\n      <mat-card-content>\n        <div><h3>{{ data.consumer.currentAddrTitle }} </h3></div>\n        <div *ngIf="data.consumer.isNotAtHome() && data.consumer.hasDetail()"><h4>Last Visited: {{ data.consumer.getLastVisited() | date:\'EEE, hh:mm a, dd MMM y\' }} </h4></div>\n        <div *ngIf="data.consumer.isUpdater() && data.consumer.currentAddr.addObj.tel"><h5>PH: {{ data.consumer.currentAddr.addObj.tel }}</h5></div>\n        <mat-radio-group *ngIf="!data.consumer.hasMultiAdds() && data.consumer.selectedAddObj" class="addrstat-radio-group" name="stat" [(ngModel)]="data.consumer.selectedAddObj.status">\n          <mat-radio-button class="addrstat-radio-button" *ngFor="let stat of data.consumer.addrStatuses" [value]="stat.val">\n            {{ stat.label }}\n          </mat-radio-button>\n        </mat-radio-group>\n        <mat-list *ngIf="data.consumer.hasMultiAdds()">\n          <mat-list-item *ngFor="let addObj of data.consumer.currentAddr.addObj">\n            <button mat-raised-button color="accent" (click)="data.consumer.selectAdd(addObj)"> {{ data.consumer.getAddressTitle(addObj) }} </button>\n          </mat-list-item>\n        </mat-list>\n      </mat-card-content>\n    </mat-card>\n    <mat-card *ngIf="!data.consumer.mapStarted">\n      <mat-card-content>\n        <span><h3>{{ data.consumer.currentAddrTitle }} </h3></span>\n        <div>\n            If you are expecting to work on this map, please ask any map updaters to assign this map to an owner.\n        </div>\n      </mat-card-content>\n    </mat-card>\n  </div>\n</form>\n'},Z2wb:function(t,e,n){e=t.exports=n("rP7Y")(!1),e.push([t.i,".mapCard{margin-top:10px;margin-bottom:10px}",""]),t.exports=t.exports.toString()},aHcY:function(t,e,n){"use strict";var r=n("/oeL"),o=n("a0oU"),s=n("wINU"),a=n("0o1w"),i=n("qbdv"),c=n("bm2B"),u=n("GsmQ"),p=n("HAwn"),d=n("hoZb"),l=n("xwLn"),m=n("6lRS"),f=n("Htvr"),h=n("BkNc"),g=n("HbVw"),b=n("Dcui"),y=n("CKBp"),v=n("cn2Z"),j=(n.n(v),n("fL27")),O=n("CPp0"),w=n("eb9A"),_=n("QAd7");n.d(e,"a",function(){return A});var M=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},A=function(){function t(){}return t}();A=M([n.i(r.NgModule)({imports:[i.CommonModule,c.FormsModule,j.a,v.TagInputModule,o.a.forRoot({apiKey:"AIzaSyB6EVRDfSAHTAkrx-VmXyKU7Y3qLSuD0Ag"}),p.b,m.l,m.m,m.j,m.n,m.o,m.f,m.k,m.p,m.h,m.q,m.r,m.i,m.s,m.t,m.u,O.b,h.a,f.a,f.b,g.a,m.v,m.g],declarations:[s.a,a.a,l.a,d.a,y.a,y.b,s.b,s.c,y.c,w.a,_.a],exports:[s.a,a.a,y.a,y.b,s.b,s.c,y.c,l.a,w.a,_.a],providers:[u.a,b.a],entryComponents:[d.a,y.b,s.b,s.c,y.c,w.a,_.a]})],A)},"aR8+":function(t,e,n){"use strict";var r=n("fc+i"),o=n("/oeL"),s=n("fL27"),a=n("Iqat"),i=n("rgUS"),c=(n.n(i),n("wQAS")),u=n("ktAp"),p=n("6lRS");n.d(e,"a",function(){return l});var d=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},l=function(){function t(){}return t}();l=d([n.i(o.NgModule)({declarations:[c.a],imports:[r.a,s.a,u.a,a.a],providers:[{provide:p.a,useValue:!0}],bootstrap:[c.a]})],l)},cDNt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("/oeL"),o=n("Qa4U"),s=n("aR8+");n("p5Ee").a.production&&n.i(r.enableProdMode)(),n.i(o.a)().bootstrapModule(s.a)},cukb:function(t,e){t.exports='<div mat-dialog-content>\n\n      <span><h3>{{ data.consumer.title }} </h3></span>\n      <table width="100%">\n        <tr>\n            <td><strong>Address</strong></td>\n            <td width="110px;"><strong>Status</strong></td>\n        </tr>\n        <tr *ngFor="let addObj of data.consumer.currentAddrList">\n          <td >\n            <a target="_blank" href="{{ data.consumer.getGmapUrl(addObj) }}" >\n              {{ data.consumer.getAddressTitle(addObj) }}\n            </a>\n          </td>\n          <td >\n            <mat-select [(ngModel)]="addObj.status" [style.font-weight]="\'bold\'" [style.background-color]="data.consumer.getStatusBgColor(addObj)">\n              <ng-container *ngFor="let stat of data.consumer.addrStatuses">\n                <mat-option [value]="stat.val" >{{stat.label}}</mat-option>\n              </ng-container>\n            </mat-select>\n          </td>\n        </tr>\n      </table>\n      <br/>\n      <button mat-fab *ngIf="data.consumer.mapStarted" (click)="data.consumer.saveStatuses()" ><mat-icon>save</mat-icon></button>\n      <button mat-fab (click)="data.consumer.closeAddrListDlg()"><mat-icon>cancel</mat-icon></button>\n</div>\n'},dCN4:function(t,e,n){e=t.exports=n("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},eb9A:function(t,e,n){"use strict";var r=n("/oeL"),o=n("GsmQ"),s=n("Dqrr"),a=(n.n(s),n("p5Ee")),i=n("6lRS"),c=n("xrDH"),u=(n.n(c),n("Dcui")),p=n("HGbW"),d=n("0+Pn");n.d(e,"a",function(){return h});var l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},f=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=function(t){function e(e,n,r,o){var s=t.call(this)||this;return s.mapService=r,s.winRef=o,s.appTitle=a.a.app.title,s.newDataType=null,s.mapBin={},s.mapIds=[],s.dialog=e,s.fireAuth=n,s}return l(e,t),e.prototype.ngOnInit=function(){var t=this;this.mapService.getAllFsgMaps(this.mapBin).flatMap(function(t){return s.Observable.of(null)}).debounce(function(){return s.Observable.interval(1e3)}).subscribe(function(){c.forOwn(t.mapBin,function(e,n){t.mapIds.push(e)}),t.fsgs=c.uniq(c.map(t.mapIds,function(t){return t.fsgName}))}),this.mapService.getMetadata().subscribe(function(t){})},e.prototype.saveNewData=function(){var t=this,e=this;if("fsg"==this.newDataType){if(c.find(this.fsgs,function(e){return e==t.fsgName}))return void(this.msg="Name already exists.");this.mapService.addNewFsg(this.fsgName,function(){e.msg="FSG Successfully Added!"})}"map"==this.newDataType&&this.mapService.addNewMap(this.fsgName,this.mapName,!1,function(){e.msg="Map Successfully Added!"})},e}(p.a);h=m([n.i(r.Component)({selector:"map-admin-component",template:n("4wwY")}),f("design:paramtypes",["function"==typeof(g=void 0!==i.b&&i.b)&&g||Object,"function"==typeof(b=void 0!==d.a&&d.a)&&b||Object,"function"==typeof(y=void 0!==o.a&&o.a)&&y||Object,"function"==typeof(v=void 0!==u.a&&u.a)&&v||Object])],h);var g,b,y,v},efyd:function(t,e){t.exports="\x3c!--The whole content below can be removed with the new code.--\x3e\n<div mat-app-background>\n  <router-outlet></router-outlet>\n</div>\n"},hoZb:function(t,e,n){"use strict";var r=n("6lRS"),o=n("/oeL");n.d(e,"a",function(){return i});var s=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=function(){function t(t){this.dialogRef=t}return t}();i=s([n.i(o.Component)({selector:"loading-dialog",template:'\n            <div mat-dialog-content>\n              <div class="flex-container"\n               fxLayout="column"\n               fxLayout.xs="column"\n               fxLayoutAlign="center center"\n               fxLayoutAlign.xs="start">\n                  <img src="/assets/images/pie-loader.svg">\n               </div>\n            </div>\n            '}),a("design:paramtypes",["function"==typeof(c=void 0!==r.d&&r.d)&&c||Object])],i);var c},hxJY:function(t,e,n){e=t.exports=n("rP7Y")(!1),e.push([t.i,"*{font-family:Roboto,sans-serif}.mat-dialog-container{max-height:70vh!important}",""]),t.exports=t.exports.toString()},ivJn:function(t,e){t.exports='\n<td-message *ngIf="!hasMaps" label="Info" sublabel="You have no maps, please contact the maps team if you are expecting maps." color="accent" icon="info"></td-message>\n<td-expansion-panel *ngFor="let fsg of fsgMaps" (expanded)="toggleExpand(fsg, true)" (collapsed)="toggleExpand(fsg, false)">\n  <ng-template td-expansion-panel-header>\n    <mat-toolbar [ngClass]="\'bgc-blue-grey-600 whiteText marginTopBottom-2\'">\n      <span><h2>{{ getFsgName(fsg) }}</h2> </span>\n      <span class="fill-remaining-space"></span>\n      <span><mat-icon *ngIf="!fsg.expanded">keyboard_arrow_down</mat-icon><mat-icon *ngIf="fsg.expanded">keyboard_arrow_up</mat-icon></span>\n    </mat-toolbar>\n  </ng-template>\n  <mat-card class=\'mapCard\' *ngFor="let map of fsg.maps" [style.background-color]="getBgMap(map)">\n    <mat-card-header>\n      <mat-card-title>\n        <h3>\n          <a *ngIf="canOpenMap(map); else elseBlock" [routerLink]="[\'/map\', map.id]">\n            {{map.mapObj.terId}} - {{map.mapObj.name}} {{ isNormalMode() ? \'\' : \'::: Campaign\'}}\n          </a>\n          <ng-template #elseBlock >\n            {{map.mapObj.terId}} - {{map.mapObj.name}} {{ isNormalMode() ? \'\' : \'::: Campaign\'}}\n          </ng-template>\n        </h3>\n      </mat-card-title>\n    </mat-card-header>\n    <mat-card-content>\n      <mat-progress-bar class="marginBottom-10" *ngIf="map.assgnObj && map.assgnObj.started" [value]="getCompletionPercentage(map)" [color]="primary"></mat-progress-bar>\n      <div>\n        <mat-chip-list selectable="false">\n          <mat-chip *ngIf="map.assgnObj && map.assgnObj.started">Remaining: {{ getRemaining(map) }}</mat-chip>\n          <mat-chip>Addresses: {{map.addressCount}}</mat-chip>\n          <mat-chip *ngIf="map.assgnObj && map.assgnObj.lastSaved">Last used on: {{ map.assgnObj.lastSaved.when  | date:\'dd MMM y\' }} </mat-chip>\n          <mat-chip *ngIf="map.assgnObj && map.assgnObj.lastSaved">Last used by: {{ map.assgnObj.lastSaved.name }}</mat-chip>\n          <mat-chip *ngIf="map.hasOwner()">Owner: {{ map.getOwner().name}} </mat-chip>\n          <mat-chip *ngIf="map.hasUsers()">Users: {{ getMapUsers(map) }}</mat-chip>\n          <mat-chip *ngIf="map.assgnObj && map.assgnObj.started">Started: {{ map.assgnObj.started | date:\'dd MMM y\'}}</mat-chip>\n          <mat-chip *ngIf="map.assgnObj && map.assgnObj.expiry" [style.background-color]="getBg(map.assgnObj.expiry)" >Expiry: {{ map.assgnObj.expiry | date:\'dd MMM y\'}}</mat-chip>\n          <mat-chip *ngIf="map.mapObj.lastCompleted && isUpdater() && isNormalMode()">Last completed: {{ map.mapObj.lastCompleted | date:\'dd MMM y\'}}</mat-chip>\n          <mat-chip *ngIf="map.assgnObj.prevOwner && isUpdater()" >Last Owner: {{ map.assgnObj.prevOwner.name }}</mat-chip>\n          <mat-chip *ngIf="map.assgnObj.isPersonal">Personal Territory</mat-chip>\n          <mat-chip *ngIf="map.assgnObj.notes">{{ map.assgnObj.notes }}</mat-chip>\n        </mat-chip-list>\n      </div>\n    </mat-card-content>\n    <mat-card-actions>\n      <a *ngIf="canOpenMap(map)" mat-mini-fab [routerLink]="[\'/map\', map.id]"><mat-icon>map</mat-icon></a>\n      <mapshare *ngIf="canOpenMap(map)" [map]="map" [campaignMode]="!isNormalMode()"></mapshare>\n    </mat-card-actions>\n  </mat-card>\n</td-expansion-panel>\n<mat-card *ngIf="metadata">\n  <mat-card-header>\n    <mat-card-title>\n      <h3>\n        Progress Report\n      </h3>\n    </mat-card-title>\n  </mat-card-header>\n  <mat-card-content>\n    <h4 *ngIf="metadata.mode.campaign">Days left for this campaign: {{ getCompletionReport().daysLeft }} days</h4>\n    <h4>Current overall map completion: {{ getOverallCompletion() }}% ( {{ getCompletionReport().completedMaps }} of {{ getMapCount() }} maps )</h4>\n    <h4>Current number addresses visited: {{ getCompletionReport().completionAddr }}% ( {{ getCompletionReport().visitedAddresses }} of {{ getCompletionReport().totalAddresses }} addresses )</h4>\n  </mat-card-content>\n</mat-card>\n'},ktAp:function(t,e,n){"use strict";var r=n("qbdv"),o=n("/oeL"),s=n("bm2B"),a=n("6lRS"),i=n("SAdc"),c=n("+tBu"),u=n("HbVw"),p=n("aHcY"),d=n("r0ix"),l=n("BkNc");n.d(e,"a",function(){return f});var m=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},f=function(){function t(){}return t}();f=m([n.i(o.NgModule)({imports:[r.CommonModule,s.FormsModule,a.f,a.g,a.h,a.i,a.j,a.k,d.a,a.l,u.a,p.a,l.a],declarations:[i.a,c.a,i.b],exports:[r.CommonModule,s.FormsModule,p.a,i.a,c.a,u.a],providers:[],entryComponents:[c.a,i.b]})],f)},l1II:function(t,e){t.exports='<span *ngIf="isUpdater()">\n  <button mat-icon-button [matMenuTriggerFor]="menu" >\n    <mat-icon>more_vert</mat-icon>\n  </button>\n<mat-menu #menu="matMenu" >\n  <button mat-menu-item (click)="resetPassword()">\n    <mat-icon>person_outline</mat-icon>\n    <span>Reset Password</span>\n  </button>\n  <button mat-menu-item (click)="addUser()">\n    <mat-icon>person_add</mat-icon>\n    <span>Add User</span>\n  </button>\n  <button mat-menu-item (click)="showVersionDlg()">\n    <mat-icon>info_outline</mat-icon>\n    <span>Release Notes</span>\n  </button>\n  <button mat-menu-item (click)="logout()">\n    <mat-icon>exit_to_app</mat-icon>\n    <span>Logout</span>\n  </button>\n</mat-menu>\n</span>\n<span *ngIf="!isUpdater()" style="margin-left: 5px;">\n  <button mat-icon-button [matMenuTriggerFor]="menu" >\n    <mat-icon>more_vert</mat-icon>\n  </button>\n  <mat-menu #menu="matMenu" >\n    <button mat-menu-item (click)="showVersionDlg()">\n      <mat-icon>info_outline</mat-icon>\n      <span>Release Notes</span>\n    </button>\n    <button mat-menu-item (click)="logout()">\n      <mat-icon>exit_to_app</mat-icon>\n      <span>Logout</span>\n    </button>\n  </mat-menu>\n</span>\n'},mPw8:function(t,e,n){"use strict";var r=n("/oeL"),o=n("0+Pn"),s=n("HGbW");n.d(e,"a",function(){return u});var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(t){function e(e){var n=t.call(this)||this;return n.fireAuth=e,n.subs=[],n}return a(e,t),e.prototype.ngOnInit=function(){var t=this;this.user=this.fireAuth.currentUser,this.subs.push(this.fireAuth.onCurrentUserInfo.subscribe(function(e){t.user=t.fireAuth.currentUser,console.log("User info:"),console.log(t.user)}))},e}(s.a);u=i([n.i(r.Component)({selector:"userinfo",template:n("SicF")}),c("design:paramtypes",["function"==typeof(p=void 0!==o.a&&o.a)&&p||Object])],u);var p},mwJv:function(t,e){t.exports='<mat-radio-group class="radio-group">\n  <mat-radio-button value="address" class="radio-button">Address</mat-radio-button>\n  <mat-radio-button value="map" class="radio-button">Map</mat-radio-button>\n</mat-radio-group>\n'},n7du:function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="n7du"},p5Ee:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={production:!0,app:{title:"Macgregor Ministry Maps",mapBase:"https://macgregor.jwapp.xyz/#"},firebase:{apiKey:"AIzaSyCjArW7DreGKLfBes3RXS_-z9B1ICQX5KE",authDomain:"congmap-prod.firebaseapp.com",databaseURL:"https://congmap-prod.firebaseio.com",projectId:"congmap-prod",storageBucket:"congmap-prod.appspot.com",messagingSenderId:"232314776603"},version:{current:"2.87",list:["2.87","2.86","2.85","2.84","2.83","2.82","2.8.1","2.8","2.7.1","2.7"],details:{2.87:"Fixed status issue",2.86:"Improved in-app map links, search maps are no longer limited to being visited twice, and are now processed semi-automatically. Added address queues.",2.85:'Supports language surveys when marking addresses as "Done".',2.84:"Allowed setting of ownership on started maps. Added tag for personal territories. Added notes field for map updaters.",2.83:"Added personal territory flag when assigning ownership. Added link to Google Maps from address list. ",2.82:"Address list dialog now allows editing of addresses. Improved progress report.","2.8.1":"Improved progress report information.",2.8:"Added territory coverage information to the home page. Added release notes to the menu, logout button now part of the menu.","2.7.1":"Fixed map sharing feature.",2.7:"Campaign mode added. For map updaters, completed maps are now grayed out and cannot be easily started."}}}},rHti:function(t,e,n){function r(t){return n(o(t))}function o(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var s={"./af":"+OfC","./af.js":"+OfC","./ar":"IOJo","./ar-dz":"2rVV","./ar-dz.js":"2rVV","./ar-kw":"XhfB","./ar-kw.js":"XhfB","./ar-ly":"xL0N","./ar-ly.js":"xL0N","./ar-ma":"Km7B","./ar-ma.js":"Km7B","./ar-sa":"pjaK","./ar-sa.js":"pjaK","./ar-tn":"kiqk","./ar-tn.js":"kiqk","./ar.js":"IOJo","./az":"ZG5g","./az.js":"ZG5g","./be":"bOOT","./be.js":"bOOT","./bg":"+4Ma","./bg.js":"+4Ma","./bm":"5DAm","./bm.js":"5DAm","./bn":"k9jZ","./bn.js":"k9jZ","./bo":"bDV2","./bo.js":"bDV2","./br":"yANP","./br.js":"yANP","./bs":"HbKM","./bs.js":"HbKM","./ca":"Hy8E","./ca.js":"Hy8E","./cs":"Yne1","./cs.js":"Yne1","./cv":"0IPV","./cv.js":"0IPV","./cy":"iXAN","./cy.js":"iXAN","./da":"JzsT","./da.js":"JzsT","./de":"bA62","./de-at":"vBMD","./de-at.js":"vBMD","./de-ch":"eBaC","./de-ch.js":"eBaC","./de.js":"bA62","./dv":"ka8z","./dv.js":"ka8z","./el":"p2gm","./el.js":"p2gm","./en-au":"5x4g","./en-au.js":"5x4g","./en-ca":"GcKt","./en-ca.js":"GcKt","./en-gb":"XWHh","./en-gb.js":"XWHh","./en-ie":"WUyd","./en-ie.js":"WUyd","./en-il":"pJZv","./en-il.js":"pJZv","./en-nz":"WSyE","./en-nz.js":"WSyE","./eo":"7YTr","./eo.js":"7YTr","./es":"bZ1w","./es-do":"BxDi","./es-do.js":"BxDi","./es-us":"4caD","./es-us.js":"4caD","./es.js":"bZ1w","./et":"ob/G","./et.js":"ob/G","./eu":"bYU1","./eu.js":"bYU1","./fa":"pLxM","./fa.js":"pLxM","./fi":"nWxF","./fi.js":"nWxF","./fo":"ZiQj","./fo.js":"ZiQj","./fr":"sVpL","./fr-ca":"kPL3","./fr-ca.js":"kPL3","./fr-ch":"RNA7","./fr-ch.js":"RNA7","./fr.js":"sVpL","./fy":"PB2Q","./fy.js":"PB2Q","./gd":"e2YH","./gd.js":"e2YH","./gl":"A0mo","./gl.js":"A0mo","./gom-latn":"NmY5","./gom-latn.js":"NmY5","./gu":"3Wa/","./gu.js":"3Wa/","./he":"0XU1","./he.js":"0XU1","./hi":"Vwvj","./hi.js":"Vwvj","./hr":"pcBC","./hr.js":"pcBC","./hu":"D5Ns","./hu.js":"D5Ns","./hy-am":"tkzS","./hy-am.js":"tkzS","./id":"MC2+","./id.js":"MC2+","./is":"iBvB","./is.js":"iBvB","./it":"o7/M","./it.js":"o7/M","./ja":"CxcX","./ja.js":"CxcX","./jv":"KrDx","./jv.js":"KrDx","./ka":"v1/e","./ka.js":"v1/e","./kk":"3C/K","./kk.js":"3C/K","./km":"eXR7","./km.js":"eXR7","./kn":"c++O","./kn.js":"c++O","./ko":"hndj","./ko.js":"hndj","./ky":"1AGL","./ky.js":"1AGL","./lb":"iYlu","./lb.js":"iYlu","./lo":"hxGK","./lo.js":"hxGK","./lt":"murZ","./lt.js":"murZ","./lv":"UcDz","./lv.js":"UcDz","./me":"cLAB","./me.js":"cLAB","./mi":"HF3F","./mi.js":"HF3F","./mk":"78aY","./mk.js":"78aY","./ml":"gBwJ","./ml.js":"gBwJ","./mn":"bNfB","./mn.js":"bNfB","./mr":"+DOK","./mr.js":"+DOK","./ms":"3n2v","./ms-my":"I7lm","./ms-my.js":"I7lm","./ms.js":"3n2v","./mt":"3LCO","./mt.js":"3LCO","./my":"F9vK","./my.js":"F9vK","./nb":"JOSY","./nb.js":"JOSY","./ne":"xL/3","./ne.js":"xL/3","./nl":"t7fg","./nl-be":"2Kpe","./nl-be.js":"2Kpe","./nl.js":"t7fg","./nn":"uS6b","./nn.js":"uS6b","./pa-in":"4ptT","./pa-in.js":"4ptT","./pl":"XsyX","./pl.js":"XsyX","./pt":"lXCk","./pt-br":"5xvq","./pt-br.js":"5xvq","./pt.js":"lXCk","./ro":"eQHX","./ro.js":"eQHX","./ru":"w3S3","./ru.js":"w3S3","./sd":"SyUM","./sd.js":"SyUM","./se":"Kijy","./se.js":"Kijy","./si":"49SZ","./si.js":"49SZ","./sk":"IhTt","./sk.js":"IhTt","./sl":"fmHV","./sl.js":"fmHV","./sq":"oC5X","./sq.js":"oC5X","./sr":"eK7V","./sr-cyrl":"gxAT","./sr-cyrl.js":"gxAT","./sr.js":"eK7V","./ss":"A8qF","./ss.js":"A8qF","./sv":"5U3I","./sv.js":"5U3I","./sw":"OID1","./sw.js":"OID1","./ta":"cm8n","./ta.js":"cm8n","./te":"c0DL","./te.js":"c0DL","./tet":"NIrx","./tet.js":"NIrx","./tg":"l7ge","./tg.js":"l7ge","./th":"TFol","./th.js":"TFol","./tl-ph":"8Mf3","./tl-ph.js":"8Mf3","./tlh":"q23S","./tlh.js":"q23S","./tr":"224B","./tr.js":"224B","./tzl":"BgS5","./tzl.js":"BgS5","./tzm":"gpr6","./tzm-latn":"Al6r","./tzm-latn.js":"Al6r","./tzm.js":"gpr6","./ug-cn":"XDTV","./ug-cn.js":"XDTV","./uk":"6OdZ","./uk.js":"6OdZ","./ur":"TuDG","./ur.js":"TuDG","./uz":"3Zp5","./uz-latn":"nuOY","./uz-latn.js":"nuOY","./uz.js":"3Zp5","./vi":"xxt/","./vi.js":"xxt/","./x-pseudo":"H27D","./x-pseudo.js":"H27D","./yo":"RG4E","./yo.js":"RG4E","./zh-cn":"m+PY","./zh-cn.js":"m+PY","./zh-hk":"/tEC","./zh-hk.js":"/tEC","./zh-tw":"fq3i","./zh-tw.js":"fq3i"};r.keys=function(){return Object.keys(s)},r.resolve=o,t.exports=r,r.id="rHti"},"rN+S":function(t,e){t.exports='<div mat-dialog-content>\n  <mat-card>\n    <mat-card-title>\n      <h4>Are you sure want to return this map?</h4>\n    </mat-card-title>\n    <mat-card-subtitle>If you are Field Service Group overseer or you are assigned to take a group, consider reusing this map.</mat-card-subtitle>\n    <mat-card-actions>\n      <button mat-raised-button color="accent" (click)="data.consumer.returnMap()">Yes</button>\n      <button mat-raised-button color="accent" (click)="data.consumer.closeConfirmDlg()">No</button>\n    </mat-card-actions>\n  </mat-card>\n</div>\n'},wINU:function(t,e,n){"use strict";var r=n("/oeL"),o=n("GsmQ"),s=n("Dqrr"),a=(n.n(s),n("p5Ee")),i=n("6lRS"),c=n("xrDH"),u=(n.n(c),n("BkNc")),p=n("Dcui"),d=n("HGbW"),l=n("0+Pn"),m=n("fc+i"),f=n("SAdc"),h=n("PMtK"),g=n.n(h);n.d(e,"a",function(){return O}),n.d(e,"b",function(){return w}),n.d(e,"c",function(){return _});var b=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},v=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},j=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},O=function(t){function e(e,n,o,s,a,i,c){var u=t.call(this)||this;return u.mapService=e,u.route=s,u.winRef=a,u.currentLocation={addObj:{clat:null,clang:null},iconUrl:"/assets/images/my_location_1.svg",pushed:!1},u.points=[],u.centerLat=-27.5518075,u.centerLng=153.0807544,u.zoom=13,u.height="700px",u.heightPadding=50,u.maxWaitTries=20,u.maxWaitCtr=0,u.sameCtr=0,u.sameMax=10,u.checkInterval=1e3,u.showInfo=!1,u.onToggleShowInfo=new r.EventEmitter,u.onComplete=new r.EventEmitter,u.onAddressClick=new r.EventEmitter,u.onAddLocMarker=new r.EventEmitter,u.onPosMarker=new r.EventEmitter,u.onFit=new r.EventEmitter,u.minimumClusterSize=2,u.shortenTitleWidth=1024,u.triggerUpdate=!1,u.mapStarted=!1,u.showLocation=!1,u.locationSearching=!1,u.dialog=n,u.fireAuth=o,a.redirHttps(),u.requireLogin(),i.addSvgIcon("fit-map",c.bypassSecurityTrustResourceUrl("/assets/images/fitmap.svg")),i.addSvgIcon("add-address",c.bypassSecurityTrustResourceUrl("/assets/images/add_address.svg")),u}return b(e,t),e.prototype.postLoginSetup=function(){var t=this;console.log(this.winRef.nativeWindow.innerHeight),this.height=this.winRef.nativeWindow.innerHeight-this.heightPadding+"px",this.title="Loading...",this.subs.push(this.route.params.subscribe(function(e){t.mapId=e.id,t.mapService.getMetadata().subscribe(function(e){t.loadMaps(),t.loadPreferences()})}))},e.prototype.loadPreferences=function(){var t=this;this.fireAuth.getUserInfo(this.fireAuth.currentUser).subscribe(function(e){if(e.userInfoObj.geo){var n=new r.EventEmitter,o=null;n.subscribe(function(e){var n=g()();null!=o&&n.isBefore(o.add(1,"minute"))||(o=n,t.fireAuth.saveLoc(t.fireAuth.currentUser.userObj.uid,e))}),t.mapService.enableGeolocation(n)}t.fireAuth.saveOnlineStat(t.fireAuth.currentUser)})},e.prototype.ngOnDestroy=function(){this.clearMaps(),this.unsubscribeAll()},e.prototype.toggleShowInfo=function(){this.showInfo=!this.showInfo,console.log("Emitting: "+this.showInfo),this.onToggleShowInfo.emit(this.showInfo)},e.prototype.toggleShowLocation=function(){this.showLocation=!this.showLocation,this.showLocation?this.showCurrentLoc():this.mapService.disableGeolocation(this.onPosMarker)},e.prototype.fitMap=function(){this.onFit.emit({})},e.prototype.accessDenied=function(){this.title="Access Denied",this.hideLoadingDialog(),this.notifyDlg=this.dialog.open(f.b,{data:{consumer:this,title:"Access denied",subtitle:"You don't have privileges to access this page. If you think you should have access, please contact the administrator.",confirmText:"Go Home"},disableClose:!0})},e.prototype.confirmNotification=function(){this.notifyDlg.close(),this.winRef.location("/home")},e.prototype.loadMaps=function(){var t=this;if(!c.isEmpty(this.points))return void console.log("Maps already loaded");var e=a.a.app.mapBase;if(this.showLoadingDialog(),"all"!=this.mapId)return void this.loadSingleMap(e);if(!this.fireAuth.currentUser.isAdmin()&&!this.fireAuth.currentUser.isUpdater())return void this.accessDenied();this.mapService.loadAllMapsWithMarkers(e);var n=s.Observable.interval(this.checkInterval).subscribe(function(e){t.mapService.mapMarkers.length!=t.curPointsCtr?(t.curPointsCtr=t.mapService.mapMarkers.length,t.sameCtr=0):(t.maxWaitCtr++,t.sameCtr++,(t.maxWaitCtr>t.maxWaitTries||t.sameCtr>t.sameMax)&&(console.log("Got all addresses, rendering..."),console.log("Total no. maps: "+t.mapService.maps.length),console.log("Total no. of addresses: "+t.mapService.mapMarkers.length),t.points=t.mapService.mapMarkers,n.unsubscribe(),t.hideLoadingDialog(),t.mapService.trackUpdates=!0,t.onComplete.emit({}),t.triggerUpdate&&t.mapService.triggerUpdate(),t.mapService.maps.length>1?"all"==t.mapId&&(t.title="All Maps"):(t.title=t.mapService.maps[0].terId+" - "+t.mapService.maps[0].name+" "+(t.mapService.isNormalMode()?"":"::Campaign"),t.winRef.nativeWindow.innerWidth<=t.shortenTitleWidth&&(t.title="Map "+t.mapService.maps[0].terId+(t.mapService.isNormalMode()?"":"::Campaign"))),t.subs.push(t.onAddressClick.subscribe(function(e){console.log(e),t.currentAddr=e.addrMarker,t.showAddrDlg()}))))})},e.prototype.canOpenMap=function(t){return this.fireAuth.currentUser&&(t.isUser(this.fireAuth.currentUser)||this.fireAuth.currentUser.isAdmin()||this.fireAuth.currentUser.isUpdater())},e.prototype.loadSingleMap=function(t){var e=this;this.minimumClusterSize=200,this.subs.push(this.mapService.loadMapMarkersObs(t,this.mapId).subscribe(function(t){if(console.log("Map: "),console.log(t),!e.canOpenMap(t))return void e.accessDenied();e.mapStarted=t.assgnObj.$exists()&&!c.isEmpty(t.assgnObj.started),t.addresses=c.sortBy(t.addresses,[function(t){return c.isUndefined(t.lSt)||c.isNull(t.lSt)?t.st.toLowerCase():t.lSt},function(t){return c.toSafeInteger(t.hnum)},function(t){return t.unit&&-9!=t.unit?c.toSafeInteger(t.unit):0}]),e.currentMap=t,e.currentAddrList&&(e.currentAddrList=c.cloneDeep(e.currentMap.addresses)),e.mapService.createMarkersWithStatus(t),e.points=e.mapService.mapMarkers,e.mapService.trackUpdates=!0,e.onComplete.emit({}),e.triggerUpdate&&e.mapService.triggerUpdate(),e.title=e.mapService.maps[0].terId+" - "+e.mapService.maps[0].name+" "+(e.mapService.isNormalMode()?"":"::Campaign"),e.winRef.nativeWindow.innerWidth<=e.shortenTitleWidth&&(e.title="Map "+e.mapService.maps[0].terId+" "+(e.mapService.isNormalMode()?"":"::Campaign"));var n=e.fireAuth.currentUser&&e.fireAuth.currentUser.userInfoObj?e.fireAuth.currentUser.userInfoObj.name:"",r=e.mapService.maps[0].terId;e.addUrl="https://docs.google.com/forms/d/e/1FAIpQLScYHfYNwnSIWAL9RAH3rEPC74WfkFT0FgcvaJKx1nAIROXS6A/viewform?usp=pp_url&entry.1810388592=Yes&entry.1189370340=&entry.45257833&entry.681741514="+r+"&entry.1482719893="+n+"&entry.1683213160=%E6%98%AF&entry.293956968=&entry.602343366&entry.2071713990="+r+"&entry.138422963="+n+"&entry.1018422546&entry.2060338072&entry.1052547294&entry.365006055&entry.1323592748="+r+"&entry.1534052334="+n+"&entry.1011916189&entry.1303192619&entry.825337910&entry.1931492709&entry.2023645450="+r+"&entry.913416032="+n,e.hideLoadingDialog(),e.triggerUpdate=!0,e.subs.push(e.onAddressClick.subscribe(function(t){console.log(t),e.currentAddr=t.addrMarker,e.hasMultiAdds()?(e.currentAddrTitle="Multiple addresses, select one below.",e.currentGmapUrl=null,e.selectedAddObj=null):(e.currentAddrTitle=e.getAddressTitle(e.currentAddr.addObj),e.currentGmapUrl=e.getGmapUrl(e.currentAddr.addObj),e.selectedAddObj=e.currentAddr.addObj,c.isUndefined(e.selectedAddObj.status)&&(e.selectedAddObj.status=0),e.buildFeedbackUrl()),e.showAddrDlg()}))}))},e.prototype.startMap=function(t){},e.prototype.isNotAtHome=function(){return this.currentAddr&&3==this.currentAddr.map.getStatus(this.currentAddr.addId)},e.prototype.hasDetail=function(){return this.currentAddr&&this.currentAddr.map.getStatusDetail(this.currentAddr.addId)},e.prototype.getLastVisited=function(){var t=this.currentAddr.map.getStatusDetail(this.currentAddr.addId);return t?t.nh_when:null},e.prototype.getAddressTitle=function(t){var e=t.unit;return c.isUndefined(e)||!e||"-9"==""+e?e="":e+="/",""+e+t.hnum+" "+t.st+", "+t.burb},e.prototype.getGmapUrl=function(t){return"https://www.google.com/maps/dir/?api=1&destination="+t.hnum+" "+t.st+", "+t.burb+"&travelmode=driving"},e.prototype.getStatuses=function(){this.addrStatuses||(this.addrStatuses=this.currentMap.getAddrStatuses(this.fireAuth.currentUser,this.mapService))},e.prototype.showAddrDlg=function(){this.getStatuses(),console.log("Opening dialog..."),this.addrDlg&&this.closeAddrDlg(),this.addrDlg=this.dialog.open(w,{data:{consumer:this},disableClose:!0})},e.prototype.closeAddrDlg=function(){console.log("Closing dialog..."),this.dialog.closeAll(),this.addrDlg=null},e.prototype.cancelAddrDlg=function(){this.selectedAddObj=null,this.closeAddrDlg()},e.prototype.showCurrentLoc=function(){var t=this;this.onPosMarker.subscribe(function(e){t.locationSearching&&(t.locationSearching=!1),e?(t.onAddLocMarker.emit({position:e.position,iconUrl:t.currentLocation.iconUrl}),t.fireAuth.saveLoc(t.fireAuth.currentUser.userObj.uid,e)):t.onAddLocMarker.emit(null)}),this.mapService.enableGeolocation(this.onPosMarker)},e.prototype.clearMaps=function(){this.mapService.clearAllMarkers(),this.currentLocation.pushed=!1},e.prototype.showMarker=function(){this.clearMaps()},e.prototype.logout=function(){this.clearMaps(),t.prototype.logout.call(this),this.triggerUpdate=!0},e.prototype.isAdmin=function(){return this.fireAuth.currentUser&&this.fireAuth.currentUser.isAdmin()},e.prototype.isUpdater=function(){return this.fireAuth.currentUser&&(this.fireAuth.currentUser.isAdmin()||this.fireAuth.currentUser.isUpdater())},e.prototype.onStatusChange=function(t){},e.prototype.saveStatus=function(){var t=this,e=this.currentAddr.mapObj.$key,n=this.selectedAddObj.$key,r=this.selectedAddObj.status;this.selectedAddObj;this.closeAddrDlg(),this.showLoadingDialog(),console.log("Status: "+r),this.mapService.updateAddrStat(e,n,r,this.fireAuth.currentUser,function(e,n,r){console.log("Manulaly setting Status: "+n),t.currentAddr.map.setStatus(e,n),t.currentAddr.map.setStatusDetail(e,r),t.selectedAddObj=null})},e.prototype.saveStatuses=function(){var t=this;this.currentMap.addresses=this.currentAddrList,this.closeAddrListDlg(),this.showLoadingDialog(),this.mapService.updateAddrStats(this.currentMap,this.fireAuth.currentUser,function(e){c.each(e.addresses,function(e){var n=e.status,r=e.$key;t.currentMap.setStatus(r,n)}),t.hideLoadingDialog()})},e.prototype.hasMultiAdds=function(){return c.isArray(this.currentAddr.addObj)&&!this.selectedAddObj},e.prototype.selectAdd=function(t){this.currentAddrTitle=this.getAddressTitle(t),this.currentGmapUrl=this.getGmapUrl(t),this.selectedAddObj=t,this.buildFeedbackUrl()},e.prototype.buildFeedbackUrl=function(){var t=this.fireAuth.currentUser&&this.fireAuth.currentUser.userInfoObj?this.fireAuth.currentUser.userInfoObj.name:"",e=this.mapService.maps[0].terId;this.currentFeedbackUrl="https://docs.google.com/forms/d/e/1FAIpQLScYHfYNwnSIWAL9RAH3rEPC74WfkFT0FgcvaJKx1nAIROXS6A/viewform?usp=pp_url&entry.1810388592=No&entry.1189370340="+this.currentAddrTitle+"&entry.45257833&entry.681741514="+e+"&entry.1482719893="+t+"&entry.1683213160=%E4%B8%8D%E6%98%AF&entry.293956968="+this.currentAddrTitle+"&entry.602343366&entry.2071713990="+e+"&entry.138422963="+t+"&entry.1018422546&entry.2060338072&entry.1052547294&entry.365006055&entry.1323592748="+e+"&entry.1534052334="+t+"&entry.1011916189&entry.1303192619&entry.825337910&entry.1931492709&entry.2023645450="+e+"&entry.913416032="+t},e.prototype.viewList=function(){this.getStatuses(),this.currentAddrList=c.cloneDeep(this.currentMap.addresses),this.addrListDlg=this.dialog.open(_,{data:{consumer:this},disableClose:!0})},e.prototype.closeAddrListDlg=function(){this.addrListDlg.close(),this.currentAddrList=null},e.prototype.getAddressTitleWithStatus=function(t){var e=this.getAddressTitle(t);return t.status&&(e=this.getStatusLabel(t.status)+" - "+e),e},e.prototype.getStatusLabel=function(t){var e="Not Done";return c.isUndefined(t.status)||c.forEach(this.addrStatuses,function(n){t.status==n.val&&(e=n.label)}),e},e.prototype.getStatus=function(t){return(c.isUndefined(t.status)||c.isNull(t.status))&&(t.status=0),t},e.prototype.getStatusBgColor=function(t,e){void 0===e&&(e=null);var n="#960202",r=t?t.status:e;if(!c.isUndefined(r))switch(r){case 1:case 9:n="#428214";break;case 2:n="#401804";break;case 3:n="#e88017";break;case 4:n="#8d57c2";break;case 5:n="#4a5963";break;case 7:case 8:n="#227874";break;case 10:n="#f2046f"}return n},e}(d.a);O=y([n.i(r.Component)({selector:"map-component",template:n("3CHR"),styles:[n("KJMk")]}),v("design:paramtypes",["function"==typeof(M=void 0!==o.a&&o.a)&&M||Object,"function"==typeof(A=void 0!==i.b&&i.b)&&A||Object,"function"==typeof(k=void 0!==l.a&&l.a)&&k||Object,"function"==typeof(S=void 0!==u.b&&u.b)&&S||Object,"function"==typeof(x=void 0!==p.a&&p.a)&&x||Object,"function"==typeof(I=void 0!==i.e&&i.e)&&I||Object,"function"==typeof(C=void 0!==m.d&&m.d)&&C||Object])],O);var w=function(){function t(t,e,n,r){this.dialogRef=t,this.data=e,n.addSvgIcon("google-map",r.bypassSecurityTrustResourceUrl("/assets/images/google-maps.svg")),n.addSvgIcon("edit-address",r.bypassSecurityTrustResourceUrl("/assets/images/edit_address.svg"))}return t}();w=y([n.i(r.Component)({selector:"addr-component",template:n("Z/XM")}),j(1,n.i(r.Inject)(i.c)),v("design:paramtypes",["function"==typeof(U=void 0!==i.d&&i.d)&&U||Object,Object,"function"==typeof(L=void 0!==i.e&&i.e)&&L||Object,"function"==typeof(R=void 0!==m.d&&m.d)&&R||Object])],w);var _=function(){function t(t,e,n,r){this.dialogRef=t,this.data=e}return t}();_=y([n.i(r.Component)({selector:"addrlist-component",template:n("cukb")}),j(1,n.i(r.Inject)(i.c)),v("design:paramtypes",["function"==typeof(D=void 0!==i.d&&i.d)&&D||Object,Object,"function"==typeof(P=void 0!==i.e&&i.e)&&P||Object,"function"==typeof(E=void 0!==m.d&&m.d)&&E||Object])],_);var M,A,k,S,x,I,C,U,L,R,D,P,E},wQAS:function(t,e,n){"use strict";var r=n("/oeL");n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},s=function(){function t(){}return t}();s=o([n.i(r.Component)({selector:"app-root",template:n("efyd"),styles:[n("hxJY")]})],s)},xwLn:function(t,e,n){"use strict";var r=n("/oeL"),o=n("a0oU"),s=n("Dqrr"),a=(n.n(s),n("xrDH")),i=(n.n(a),n("Xir+"));n.n(i);n.d(e,"a",function(){return p});var c=this&&this.__decorate||function(t,e,n,r){var o,s=arguments.length,a=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(a=(s<3?o(a):s>3?o(e,n,a):o(e,n))||a);return s>3&&a&&Object.defineProperty(e,n,a),a},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t){this.gmapsApi=t,this.markers=[],this.maxTypeIdx=3,this.maxColorIdx=3,this.markerIcons=[],this.hasLoaded=!1,this.style={url:"/assets/images/place-markers/cluster.png",height:40,width:40,textColor:"#FFF",textSize:11,backgroundPosition:"center center"},this.options={imagePath:"/assets/images/place-markers/cluster",gridSize:20,minimumClusterSize:2,styles:[this.style,this.style,this.style]},this.minimumClusterSize=2}return t.prototype.ngOnInit=function(){var t=this;this.onUpdate.subscribe(function(e){t.clearMarkers(),t.loadPoints()}),this.onSetShowClusterInfo.subscribe(function(e){t.markerCluster.setShowInfo(e)}),this.onFit&&this.onFit.subscribe(function(e){t.fitBounds()}),this.onClear&&this.onClear.subscribe(function(e){t.clearMarkers()}),this.onAddLocMarker&&this.onAddLocMarker.subscribe(function(e){t.gmapsApi.getNativeMap().then(function(n){if(t.resetBounds(),t.locationMarker)if(e){var r=new google.maps.LatLng(e.position.lat,e.position.lng);t.locationMarker.setPosition(r),t.bounds.extend(t.locationMarker.getPosition())}else t.locationMarker.setMap(null),t.locationMarker=null;else t.locationMarker=new google.maps.Marker({position:e.position,map:n,icon:e.iconUrl,optimized:!1}),t.bounds.extend(t.locationMarker.getPosition())})})},t.prototype.resetBounds=function(){var t=this;this.bounds=new google.maps.LatLngBounds,a.forEach(this.markers,function(e){t.bounds.extend(e.getPosition())})},t.prototype.ngOnChanges=function(t){this.clearMarkers(),this.loadPoints()},t.prototype.loadPoints=function(){var t=this;if(!this.points||0==this.points.length)return void console.log("No points to load...");this.bounds=new google.maps.LatLngBounds,this.gmapsApi.getNativeMap().then(function(e){if(a.isEmpty(t.markerIcons)){t.scaledMarkerSize=new google.maps.Size(35,35);for(var n=0;n<=t.maxTypeIdx;n++)for(var r=0;r<=t.maxColorIdx;r++){var o="/assets/images/place-markers/pin-"+n+"-"+r+".svg";t.markerIcons.push({scaledSize:t.scaledMarkerSize,url:o})}}s.Observable.interval(500).skipWhile(function(e){return null==t.points||t.points.length<=0}).take(1).subscribe(function(){if(t.points.length>0){console.log("Painting markers...");for(var n=t.onAddressClick,r=0,o=t.points;r<o.length;r++){var s=o[r];!function(r){var o=new google.maps.Marker({position:new google.maps.LatLng(r.addObj.clat,r.addObj.clong),icon:t.markerIcons[r.markerIdx%t.markerIcons.length]});if(r.marker&&(o=r.marker),r.modalMode)o.addListener("click",function(){n.emit({gmap:e,gmarker:o,addrMarker:r})});else{var s='<div id="info-window">'+r.infoWindowStr+"</div>";o.infoWindowStr=r.infoWindowStr;var a=new google.maps.InfoWindow({content:s});o.addListener("click",function(){a.open(e,o)})}t.markers.push(o),t.bounds.extend(o.getPosition())}(s)}}else t.markers=[];t.options.minimumClusterSize=t.minimumClusterSize,t.markerCluster=new MarkerClusterer(e,t.markers,t.options),t.hasLoaded||(t.hasLoaded=!0,e.setCenter(t.bounds.getCenter()),e.fitBounds(t.bounds))})})},t.prototype.clearMarkers=function(){this.markerCluster&&(this.markers=[],this.markerCluster.clearMarkers())},t.prototype.fitBounds=function(){var t=this;this.gmapsApi.getNativeMap().then(function(e){e.setCenter(t.bounds.getCenter()),e.fitBounds(t.bounds)})},t}();c([n.i(r.Input)(),u("design:type",Array)],p.prototype,"points",void 0),c([n.i(r.Input)(),u("design:type","function"==typeof(d=void 0!==r.EventEmitter&&r.EventEmitter)&&d||Object)],p.prototype,"onUpdate",void 0),c([n.i(r.Input)(),u("design:type","function"==typeof(l=void 0!==r.EventEmitter&&r.EventEmitter)&&l||Object)],p.prototype,"onFit",void 0),c([n.i(r.Input)(),u("design:type","function"==typeof(m=void 0!==r.EventEmitter&&r.EventEmitter)&&m||Object)],p.prototype,"onSetShowClusterInfo",void 0),c([n.i(r.Input)(),u("design:type","function"==typeof(f=void 0!==r.EventEmitter&&r.EventEmitter)&&f||Object)],p.prototype,"onClear",void 0),c([n.i(r.Input)(),u("design:type","function"==typeof(h=void 0!==r.EventEmitter&&r.EventEmitter)&&h||Object)],p.prototype,"onAddressClick",void 0),c([n.i(r.Input)(),u("design:type","function"==typeof(g=void 0!==r.EventEmitter&&r.EventEmitter)&&g||Object)],p.prototype,"onAddLocMarker",void 0),c([n.i(r.Input)(),u("design:type",Array)],p.prototype,"markerIcons",void 0),c([n.i(r.Input)(),u("design:type",Object)],p.prototype,"style",void 0),c([n.i(r.Input)(),u("design:type",Object)],p.prototype,"options",void 0),c([n.i(r.Input)(),u("design:type",Number)],p.prototype,"minimumClusterSize",void 0),p=c([n.i(r.Directive)({selector:"marker-cluster"}),u("design:paramtypes",["function"==typeof(b=void 0!==o.b&&o.b)&&b||Object])],p);var d,l,m,f,h,g,b},zgAq:function(t,e){t.exports='<div style="text-align:center">\n  <h2>\n    {{ appTitle }}\n  </h2>\n</div>\n<div>\n  \x3c!-- <div class="flex-container"\n     fxLayout="row"\n     fxLayout.xs="row"\n     fxLayoutAlign="space-around none"\n     fxLayoutAlign.xs="start"> --\x3e\n     <mat-toolbar [ngClass]="\'bgc-blue-grey-900 whiteText marginTopBottom-2\'">\n        <userinfo></userinfo>\n        <span class="fill-remaining-space"></span>\n        <span><a style="margin-right: 5px;" mat-mini-fab [routerLink]="[\'/map/all\']" *ngIf="canViewAllMaps()"><mat-icon >map</mat-icon></a></span>\n        \x3c!-- <span><a style="margin-right: 5px;" mat-mini-fab [routerLink]="[\'/mapadmin\']" *ngIf="canViewAllMaps()"><mat-icon >edit</mat-icon></a></span> --\x3e\n        <span><a href="{{ addUrl }}" target="_blank" mat-mini-fab style="margin-right: 5px;"><mat-icon svgIcon="add-address"></mat-icon></a></span>\n        <span><a mat-mini-fab target="_blank" href="https://docs.google.com/document/d/1sNfzBlGop98HkbRW46PdGk0K2Hg8TLbHLkmysjLExKw/edit?usp=drive_web" ><mat-icon>help</mat-icon></a></span>\n        <user-admin></user-admin>\n     </mat-toolbar>\n   \x3c!-- </div> --\x3e\n  <mapslist-component #myMapsList></mapslist-component>\n</div>\n'}},[0]);